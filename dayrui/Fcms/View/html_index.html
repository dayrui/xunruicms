{template "header.html"}

{template "api_list_date_search.html"}

<div class="note note-danger">
    <p>{dr_lang('确保网站目录必须有可写权限')}</p>
</div>

<div class="portlet bordered light form-horizontal">
    <div class="portlet-title tabbable-line">
        <ul class="nav nav-tabs" style="float:left;">
            <li class="active">
                <a href="#tab_0" data-toggle="tab"> <i class="fa fa-cog"></i> {dr_lang('网站')} </a>
            </li>
            {loop $module $i $mod}
            <li>
                <a href="#tab_{$i}" data-toggle="tab"> <i class="{$mod.icon}"></i> {dr_lang($mod.name)} </a>
            </li>
            {/loop}
        </ul>
    </div>
    <div class="portlet-body">
        <div class="tab-content" style="padding-top: 10px">

            <div class="tab-pane active" id="tab_0">
                <div class="form-body">

                    <div class="form-group">
                        <label class="col-md-2 control-label">{dr_lang('网站首页')}</label>
                        <div class="col-md-9">
                            <label><button type="button" onclick="dr_admin_menu_ajax('{WEB_DIR}index.php?c=home&m=html', 1)" class="btn blue"> <i class="fa fa-file-o"></i> {dr_lang('生成首页')} </button></label>
                        </div>
                    </div>

                    <form id="myform_share_category">
                        <div class="form-group " style="border-top: 1px dashed #eef1f5; padding-top: 10px;">
                            <label class="col-md-2 control-label">{dr_lang('最大分页限制')}</label>
                            <div class="col-md-9">
                                <label><input type="text" class="form-control" value="" name="maxsize"></label>

                                <span class="help-block">{dr_lang('当栏目页数过多时，设置此数量可以生成指定的页数，后面页数就不会再生成')}</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-2 control-label">{dr_lang('按所选栏目')}</label>
                            <div class="col-md-9">
                                {php echo \Phpcmf\Service::L('Tree')->select_category(\Phpcmf\Service::C()->get_cache('module-'.SITE_ID.'-share', 'category'), 0, 'name=\'ids[]\' multiple style=\'width:370px;height:400px\'', dr_lang('全部栏目'));}
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-2 control-label">{dr_lang('生成共享栏目')}</label>
                            <div class="col-md-9">
                                <label><button type="button" onclick="dr_bfb('{dr_lang('生成共享栏目')}', 'myform_share_category', '{dr_url('html/category_index')}&app=')" class="btn dark"> <i class="fa fa-th-large"></i> {dr_lang('开始生成静态')} </button></label>
                                <label><button type="button" onclick="dr_bfb('{dr_lang('生成共享栏目')}', 'myform_share_category', '{dr_url('html/category_point_index')}&app=')" class="btn red"> <i class="fa fa-th-large"></i> {dr_lang('上次未执行完毕时继续执行')} </button></label>
                            </div>
                        </div>
                    </form>
                </div>

            </div>

            {loop $module $i $mod}
            <div class="tab-pane " id="tab_{$i}">
                {if !$mod.share}
                <div class="form-group">
                    <label class="col-md-2 control-label">{dr_lang('模块首页')}</label>
                    <div class="col-md-9"><label><button type="button" onclick="dr_admin_menu_ajax('{WEB_DIR}index.php?s={$mod.dirname}&c=html&m=index', 1)" class="btn blue"> <i class="fa fa-home"></i> {dr_lang('生成模块首页')} </button></label>
                    </div>
                </div>

                <form id="myform_category_{$i}">
                    <div class="form-group " style="border-top: 1px dashed #eef1f5; padding-top: 10px;">
                        <label class="col-md-2 control-label">{dr_lang('最大分页限制')}</label>
                        <div class="col-md-9">
                            <label><input type="text" class="form-control" value="" name="maxsize"></label>

                            <span class="help-block">{dr_lang('当栏目页数过多时，设置此数量可以生成指定的页数，后面页数就不会再生成')}</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-2 control-label">{dr_lang('按所选栏目')}</label>
                        <div class="col-md-9">
                            {php echo \Phpcmf\Service::L('Tree')->select_category(\Phpcmf\Service::C()->get_cache('module-'.SITE_ID.'-'.$mod.dirname, 'category'), 0, 'name=\'ids[]\' multiple style=\'width:370px;height:400px\'', dr_lang('全部栏目'));}
                        </div>
                    </div>
                    <div class="form-group" style="border-bottom: 1px dashed #eef1f5; padding-bottom: 10px;">
                        <label class="col-md-2 control-label">{dr_lang('生成栏目')}</label>
                        <div class="col-md-9">
                            <label><button type="button" onclick="dr_bfb('{dr_lang('生成栏目')}', 'myform_category_{$i}', '{dr_url('html/category_index')}&app={$mod.dirname}')" class="btn dark"> <i class="fa fa-th-large"></i> {dr_lang('开始生成静态')} </button></label>
                            <label><button type="button" onclick="dr_bfb('{dr_lang('生成共享栏目')}', 'myform_share_category', '{dr_url('html/category_point_index')}&app={$mod.dirname}')" class="btn red"> <i class="fa fa-th-large"></i> {dr_lang('上次未执行完毕时继续执行')} </button></label>
                        </div>
                    </div>
                </form>
                {/if}

                <form id="myform{$i}">
                    <div class="form-group ">
                        <label class="col-md-2 control-label">{dr_lang('每页生成数量')}</label>
                        <div class="col-md-9">
                            <label><input type="text" placeholder="{dr_lang('建议不要太多')}" class="form-control" value="{$pagesize}" name="pagesize"></label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-2 control-label">{dr_lang('按内容ID范围')}</label>
                        <div class="col-md-9">
                            <div class="input-group">
                                <div class="input-group  input-daterange " >
                                    <input type="text" placeholder="{dr_lang('按ID开始')}" class="form-control" value="{$param.id_form}" name="id_form">
                                    <span class="input-group-addon"> {dr_lang('到')} </span>
                                    <input type="text" placeholder="{dr_lang('按ID结束')}" class="form-control" value="{$param.id_to}" name="id_to">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-2 control-label">{dr_lang('按发布时间范围')}</label>
                        <div class="col-md-9">
                            <div class="input-group">
                                <div class="input-group date-picker input-daterange " data-date="" data-date-format="yyyy-mm-dd">
                                    <input type="text" placeholder="{dr_lang('按发布时间范围')}" class="form-control" value="{$param.date_form}" name="date_form">
                                    <span class="input-group-addon"> {dr_lang('到')} </span>
                                    <input type="text" placeholder="{dr_lang('按发布时间范围')}" class="form-control" value="{$param.date_to}" name="date_to">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-2 control-label">{dr_lang('按所选栏目')}</label>
                        <div class="col-md-9">
                            {php echo \Phpcmf\Service::L('Tree')->select_category(\Phpcmf\Service::C()->get_cache('module-'.SITE_ID.'-'.$mod.dirname, 'category'), 0, 'name=\'catids[]\' multiple style=\'width:370px;height:200px\'', dr_lang('全部栏目'));}
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-2 control-label">{dr_lang('生成内容页面')}</label>
                        <div class="col-md-9">
                            <label><button type="button" onclick="dr_bfb('{dr_lang('生成内容页面')}', 'myform{$i}', '{dr_url('html/show_index')}&app={$mod.dirname}')" class="btn dark"> <i class="fa fa-th-large"></i> {dr_lang('开始生成静态')} </button></label>
                            <label><button type="button" onclick="dr_bfb('{dr_lang('生成内容页面')}', 'myform{$i}', '{dr_url('html/show_point_index')}&app={$mod.dirname}')" class="btn red"> <i class="fa fa-th-large"></i> {dr_lang('上次未执行完毕时继续执行')} </button></label>
                        </div>
                    </div>


                </form>
            </div>
            {/loop}


        </div>
    </div>
</div>


{template "footer.html"}