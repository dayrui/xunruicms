function dr_show_member(e){1==is_mobile_cms?width=height="90%":(width="50%",height="70%");var t=admin_file+"?c=api&m=member&name="+$("#dr_"+e).val();layer.open({type:2,title:'<i class="fa fa-user"></i> '+lang.member,shadeClose:!0,shade:0,scrollbar:!1,area:[width,width],success:function(e,t){var a=layer.getChildFrame("body",t),r=$(a).html();if(r.indexOf('"code":0')>0&&r.length<150){var i=JSON.parse(r);layer.close(t),dr_tips(0,i.msg)}},content:t+"&is_ajax=1"})}function dr_admin_menu_ajax(e,t){var a=layer.load(2,{shade:[.3,"#fff"],time:1e4});$.ajax({type:"GET",dataType:"json",url:e,success:function(e){if(layer.close(a),dr_tips(e.code,e.msg),1==e.code){if(t)return;setTimeout("window.location.reload(true)",2e3)}},error:function(e,t,a){dr_ajax_admin_alert_error(e,t,a)}})}function dr_update_cache(e,t){dr_update_cache_all()}function dr_load_ajax(e,t,a){layer.confirm(e,{icon:3,shade:0,title:lang.ts,btn:[lang.ok,lang.esc]},function(e){layer.close(e);var e=layer.load(2,{shade:[.3,"#fff"],time:5e3});$.ajax({type:"GET",dataType:"json",url:t,success:function(t){layer.close(e),dr_tips(t.code,t.msg),1==a&&t.code>0&&setTimeout("window.location.reload(true)",2e3)},error:function(e,t,a){dr_ajax_admin_alert_error(e,t,a)}})})}function dr_install_confirm(e){"undefined"!=typeof is_oem_cms_down&&is_oem_cms_down?(window.opener=null,window.open("","_self"),window.close(),alert("请关闭当前窗口")):layer.confirm("确定要刷新整个后台吗？",{icon:3,shade:0,title:lang.ts,btn:[lang.ok,lang.esc]},function(e){layer.close(e),parent.location.reload(!0)},function(t){layer.close(t),e?window.location.href=e:window.location.reload(!0)})}function dr_install_app(e){layer.confirm("当您在使用第三方应用程序时，官方不保证它的合法性、安全性、完整性、真实性或品质等，请用户自行判断是否安装并承担所有风险。",{shade:0,title:"免责声明",btn:["安装","取消"]},function(t){var t=layer.load(2,{shade:[.3,"#fff"],time:5e3});$.ajax({type:"GET",dataType:"json",url:e,success:function(e){layer.close(t),dr_tips(e.code,e.msg),1==e.code&&setTimeout("dr_install_confirm()",2e3)},error:function(e,t,a){dr_ajax_admin_alert_error(e,t,a)}})},function(e){})}function dr_install_module_select(e){layer.confirm("共享模块: 共用一个栏目，在栏目中选择模块<br>独立模块: 独立栏目管理，在模块中选择栏目<br>",{shade:0,title:"安装选择",btn:["独立","共享","了解区别"],btn3:function(e,t){dr_help(626)}},function(t){var t=layer.load(2,{shade:[.3,"#fff"],time:5e3});$.ajax({type:"GET",dataType:"json",url:e+"&type=1",success:function(e){layer.close(t),dr_tips(e.code,e.msg),1==e.code&&setTimeout("dr_install_confirm('"+admin_file+"?c=module&m=index')",2e3)},error:function(e,t,a){dr_ajax_admin_alert_error(e,t,a)}})},function(t){var t=layer.load(2,{shade:[.3,"#fff"],time:5e3});$.ajax({type:"GET",dataType:"json",url:e+"&type=0",success:function(e){layer.close(t),dr_tips(e.code,e.msg),1==e.code&&setTimeout("dr_install_confirm('"+admin_file+"?c=module&m=index')",2e3)},error:function(e,t,a){dr_ajax_admin_alert_error(e,t,a)}})})}function dr_install_module(e){layer.confirm("你确定要安装到当前站点吗？",{shade:0,title:"安装",btn:["安装","取消"]},function(t){var t=layer.load(2,{shade:[.3,"#fff"],time:5e3});$.ajax({type:"GET",dataType:"json",url:e,success:function(e){layer.close(t),dr_tips(e.code,e.msg),1==e.code&&setTimeout("dr_install_confirm()",2e3)},error:function(e,t,a){dr_ajax_admin_alert_error(e,t,a)}})},function(e){})}function dr_module_send(e,t){var a="50%",r="60%";1==is_mobile_cms&&(a=r="90%"),t+="&"+$("#myform").serialize(),layer.open({type:2,title:e,shadeClose:!0,shade:0,area:[a,r],btn:[lang.ok],yes:function(e,a){var r=layer.getChildFrame("body",e);$(r).find(".form-group").removeClass("has-error");var i=layer.load(2,{shade:[.3,"#fff"],time:5e3});return $.ajax({type:"POST",dataType:"json",url:t,data:$(r).find("#myform").serialize(),success:function(t){return layer.close(i),1==t.code?(layer.close(e),setTimeout("window.location.reload(true)",2e3)):$(r).find("#dr_row_"+t.data.field).addClass("has-error"),dr_tips(t.code,t.msg),!1},error:function(e,t,a){dr_ajax_admin_alert_error(e,t,a)}}),!1},success:function(e,t){var a=layer.getChildFrame("body",t),r=$(a).html();if(r.indexOf('"code":0')>0&&r.length<150){var i=JSON.parse(r);layer.close(t),dr_tips(0,i.msg)}if(r.indexOf('"code":1')>0&&r.length<150){var i=JSON.parse(r);layer.close(t),dr_tips(1,i.msg)}},content:t+"&is_ajax=1"})}function dr_module_send_ajax(e){e+="&"+$("#myform").serialize();var t=layer.load(2,{shade:[.3,"#fff"],time:1e4});$.ajax({type:"GET",dataType:"json",url:e,success:function(e){layer.close(t),dr_tips(e.code,e.msg),1==e.code&&setTimeout("window.location.reload(true)",2e3)},error:function(e,t,a){dr_ajax_admin_alert_error(e,t,a)}})}function dr_ajax_open_close(e,t,a){var r=layer.load(2,{shade:[.3,"#fff"],time:5e3}),i=$(e);$.ajax({type:"GET",url:t,dataType:"json",success:function(e){layer.close(r),1==e.code&&(e.data.value==a?(i.attr("class","badge badge-no"),i.html('<i class="fa fa-times"></i>')):(i.attr("class","badge badge-yes"),i.html('<i class="fa fa-check"></i>'))),dr_tips(e.code,e.msg)},error:function(e,t,a){dr_ajax_admin_alert_error(e,t,a)}})}function dr_bfb(e,t,a){layer.load(2,{shade:[.3,"#fff"],time:1e3}),layer.open({type:2,title:e,scrollbar:!1,resize:!0,maxmin:!0,shade:0,area:["80%","80%"],success:function(e,t){var a=layer.getChildFrame("body",t),r=$(a).html();if(r.indexOf('"code":0')>0&&r.length<150){var i=JSON.parse(r);layer.closeAll(),dr_tips(0,i.msg)}},content:a+"&"+$("#"+t).serialize(),cancel:function(e,t){return layer.confirm(dr_lang("关闭后将中断操作，是否确认关闭呢？"),{icon:3,shade:0,title:lang.ts,btn:[lang.ok,lang.esc]},function(e){layer.closeAll()}),!1}})}function dr_bfb_submit(e,t,a){layer.load(2,{shade:[.3,"#fff"],time:1e3}),$.ajax({type:"POST",dataType:"json",url:a,data:$("#"+t).serialize(),success:function(t){return layer.closeAll("loading"),1==t.code?layer.open({type:2,title:e,scrollbar:!1,resize:!0,maxmin:!0,shade:0,area:["80%","80%"],success:function(e,t){var a=layer.getChildFrame("body",t),r=$(a).html();if(r.indexOf('"code":0')>0&&r.length<150){var i=JSON.parse(r);layer.closeAll("loading"),dr_tips(0,i.msg)}},content:t.data.url,cancel:function(e,t){return layer.confirm(dr_lang("关闭后将中断操作，是否确认关闭呢？"),{icon:3,shade:0,title:dr_lang("ts"),btn:[dr_lang("ok"),dr_lang("esc")]},function(e){layer.closeAll()}),!1}}):dr_tips(0,t.msg,9e4),!1},error:function(e,t,a){dr_ajax_admin_alert_error(e,t,a)}})}function dr_show_file_code(e,t){layer.load(2,{shade:[.3,"#fff"],time:1e3}),layer.open({type:2,title:e,scrollbar:!1,resize:!0,maxmin:!0,shade:0,area:["80%","80%"],success:function(e,t){layer.closeAll("loading")},content:t})}function dr_export(e,t){dr_tips(0,"此功能不可用")}function dr_submit_htmlfile(e,t){layer.load(2,{shade:[.3,"#fff"],time:1e3}),layer.open({type:2,title:lang.htmlfile,shadeClose:!0,shade:0,area:["480px","30%"],success:function(e,t){var a=layer.getChildFrame("body",t),r=$(a).html();if(r.indexOf('"code":0')>0&&r.length<150){var i=JSON.parse(r);layer.closeAll(t),dr_tips(0,i.msg)}},content:t+"&"+$("#"+e).serialize()})}function dr_submit_todo(e,t){layer.load(2,{shade:[.3,"#fff"],time:1e3}),layer.open({type:2,title:lang.todoing,shadeClose:!0,shade:0,area:["480px","30%"],success:function(e,t){var a=layer.getChildFrame("body",t),r=$(a).html();if(r.indexOf('"code":0')>0&&r.length<150){var i=JSON.parse(r);layer.closeAll(t),dr_tips(0,i.msg)}},content:t+"&"+$("#"+e).serialize()})}function dr_submit_post_todo(e,t){var a=layer.load(2,{shade:[.3,"#fff"],time:1e3});$.ajax({type:"POST",dataType:"json",url:t,data:$("#"+e).serialize(),success:function(e){return layer.close(a),1==e.code?dr_tips(1,e.msg):dr_tips(0,e.msg,9e4),!1},error:function(e,t,a){dr_ajax_admin_alert_error(e,t,a)}})}function dr_submit_sql_todo(e,t){var a=layer.load(2,{shade:[.3,"#fff"],time:1e3});$("#sql_result").html(" ... "),$.ajax({type:"POST",dataType:"json",url:t,data:$("#"+e).serialize(),success:function(e){return layer.close(a),1==e.code?$("#sql_result").html("<pre>"+e.msg+"</pre>"):$("#sql_result").html('<div class="alert alert-danger">'+e.msg+"</div>"),!1},error:function(e,t,a){dr_ajax_admin_alert_error(e,t,a)}})}function dr_call_alert(){layer.alert("回调是用于在列表显示时对其值进行格式化，函数需要开发者自己定义<br><br>标题: title<br>评论: comment<br>多文件: files （只显示有或无）<br>单文件: file<br>uid会员: uid<br>地区联动: linkage_address<br>地区联动名称: linkage_name<br>单选字段名称: radio_name<br>下拉字段名称: select_name<br>复选框字段名称: checkbox_name<br>栏目: catid<br>URL地址: url<br>实时存储字段值: save_text_value<br>时间: datetime<br>会员信息: author",{title:"回调参数",shade:0,btn:["访问手册"]},function(e,t){dr_help(463)})}function dr_seo_rule(){layer.alert("通用标签<br>{join}\tSEO连接符号，默认“_”<br>[{page}]\t分页页码<br>{SITE_NAME}\t网站名称<br>支持“对应表”任何字段，格式：{字段名}，<br>如：{title}表示标题<br>支持网站系统常量，格式：{大写的常量名称}，<br>如：{SITE_NAME}表示网站名称<br>",{shade:0,title:"",btn:[]})}function dr_url_module_index(){layer.alert("<b>举例</b><hr>默认模块地址: index.php?s=news<br>形如news.html 这种地址格式为: {modname}.html 或者直接写成 news.html<br><br><br><b>通配符</b><hr>{modname}\t表示当前模块目录<br>如果此模块绑定了域名,那么此规则就无效了<br>",{shade:0,area:["50%","50%"],title:"",btn:[]})}function dr_url_module_list(){layer.alert('<b>举例</b><hr>默认模块地址: <br>index.php?s=news&c=category&id=1<br>形如news/1.html <br>这种地址格式为: {dirname}/{id}.html<br><br><b>通配符</b><hr>{id}   表示栏目id<br>{page}   表示分页号<br>{dirname}   表示栏目目录名称<br>{pdirname}   包含父级层次的目录<br>{modname}  表示模块目录（只能独立模块使用，共享模块不能使用）<br>支持主表任何字段，格式：{字段名}，如：{name}表示栏目名称<br><br><br><b>使用自定义函数方法(需要有php开发经验)</b><hr>{自定义函数方法名($data)}\t   表示用自定义函数方法来定义url<br><br><br><b>自定义函数举例(需要有php开发经验)</b><hr>自定义函数文件: /config/custom.php <br>增加以下函数体:<br>function my_url($data) { return "你的URL"; } // 这个函数内容你自己定义<br>那么你就填写: {my_url($data)}<br>',{shade:0,title:"",area:["50%","50%"],btn:[]})}function dr_url_mform_list(){layer.alert('<b>举例</b><hr>默认模块地址: <br>index.php?s=news&c=xxxxx&cid=1<br>形如news/xxxxx/1-list.html <br>这种地址格式为: {modname}/{form}/{cid}-list.html<br><br><b>通配符</b><hr>{page}   表示分页号<br>{cid}   表示对应模块内容的id<br>{form}   表示表单的别名<br>{modname}  表示模块目录<br>支持主表任何字段，格式：{字段名}，如：{name}表示栏目名称<br><br><br><b>使用自定义函数方法(需要有php开发经验)</b><hr>{自定义函数方法名($data)}\t   表示用自定义函数方法来定义url<br><br><br><b>自定义函数举例(需要有php开发经验)</b><hr>自定义函数文件: /config/custom.php <br>增加以下函数体:<br>function my_url($data) { return "你的URL"; } // 这个函数内容你自己定义<br>那么你就填写: {my_url($data)}<br>',{shade:0,title:"",area:["50%","50%"],btn:[]})}function dr_url_mform_show(){layer.alert('<b>举例</b><hr>默认模块地址: <br>index.php?s=news&c=xxxxx&m=show&cid=1<br>形如news/xxxxx/1-show.html <br>这种地址格式为: {modname}/{form}/{cid}-show.html<br><br><b>通配符</b><hr>{id}   表示表单内容id<br>{page}   表示分页号<br>{cid}   表示对应模块内容的id<br>{form}   表示表单的别名<br>{modname}  表示模块目录<br>支持主表任何字段，格式：{字段名}，如：{name}表示栏目名称<br><br><br><b>使用自定义函数方法(需要有php开发经验)</b><hr>{自定义函数方法名($data)}\t   表示用自定义函数方法来定义url<br><br><br><b>自定义函数举例(需要有php开发经验)</b><hr>自定义函数文件: /config/custom.php <br>增加以下函数体:<br>function my_url($data) { return "你的URL"; } // 这个函数内容你自己定义<br>那么你就填写: {my_url($data)}<br>',{shade:0,title:"",area:["50%","50%"],btn:[]})}function dr_url_mform_post(){layer.alert('<b>举例</b><hr>默认模块地址: <br>index.php?s=news&c=xxxxx&m=post&cid=1<br>形如news/xxxxx/1-post.html <br>这种地址格式为: {modname}/{form}/{cid}-post.html<br><br><b>通配符</b><hr>{page}   表示分页号<br>{cid}   表示对应模块内容的id<br>{form}   表示表单的别名<br>{modname}  表示模块目录<br>支持主表任何字段，格式：{字段名}，如：{name}表示栏目名称<br><br><br><b>使用自定义函数方法(需要有php开发经验)</b><hr>{自定义函数方法名($data)}\t   表示用自定义函数方法来定义url<br><br><br><b>自定义函数举例(需要有php开发经验)</b><hr>自定义函数文件: /config/custom.php <br>增加以下函数体:<br>function my_url($data) { return "你的URL"; } // 这个函数内容你自己定义<br>那么你就填写: {my_url($data)}<br>',{shade:0,title:"",area:["50%","50%"],btn:[]})}function dr_url_module_show(){layer.alert('<b>举例</b><hr>默认模块地址: <br>index.php?s=news&c=show&id=1<br>形如show/1.html <br>这种地址格式为: {modname}/{id}.html<br><br><b>通配符</b><hr>{id}   表示id<br>{y}   表示年<br>{m}   表示月<br>{d}   表示日<br>{page}   表示分页号<br>{dirname}   表示栏目目录名称<br>{pdirname}   包含父级层次的目录<br>{modname}  表示模块目录<br><br><br><b>使用自定义函数方法(需要有php开发经验)</b><hr>{自定义函数方法名($data)}\t   表示用自定义函数方法来定义url<br><br><br><b>自定义函数举例(需要有php开发经验)</b><hr>自定义函数文件: /config/custom.php <br>增加以下函数体:<br>function my_url($data) { return "你的URL"; } // 这个函数内容你自己定义<br>那么你就填写: {my_url($data)}<br>',{shade:0,title:"",area:["50%","50%"],btn:[]})}function dr_url_page(){layer.alert('<b>举例</b><hr>默认模块地址: <br>index.php?s=page&id=1<br>形如page/1.html <br>这种地址格式为: page/{id}.html<br><br><b>通配符</b><hr>{id}   表示id<br>{page}   表示分页号<br>{dirname}   表示栏目目录名称<br>{pdirname}   包含父级层次的目录<br><br><br><b>使用自定义函数方法(需要有php开发经验)</b><hr>{自定义函数方法名($data)}\t   表示用自定义函数方法来定义url<br><br><br><b>自定义函数举例(需要有php开发经验)</b><hr>自定义函数文件: /config/custom.php <br>增加以下函数体:<br>function my_url($data) { return "你的URL"; } // 这个函数内容你自己定义<br>那么你就填写: {my_url($data)}<br>',{shade:0,title:"",area:["50%","50%"],btn:[]})}function dr_url_module_tag(){layer.alert('<b>举例</b><hr>默认模块地址: <br>index.php?s=tag&name=guanjianci<br>形如tag/guanjianci.html <br>这种地址格式为: tag/{tag}.html<br><br><b>通配符</b><hr>{tag}   表示tag英文名称<br><br><br><b>使用自定义函数方法(需要有php开发经验)</b><hr>{自定义函数方法名($data)}\t   表示用自定义函数方法来定义url<br><br><br><b>自定义函数举例(需要有php开发经验)</b><hr>自定义函数文件: /config/custom.php <br>增加以下函数体:<br>function my_url($data) { return "你的URL"; } // 这个函数内容你自己定义<br>那么你就填写: {my_url($data)}<br>',{shade:0,title:"",area:["50%","50%"],btn:[]})}function dr_url_module_search(){layer.alert("<b>举例</b><hr>默认模块地址: index.php?s=news&c=search<br>形如news/search.html 这种地址格式为: {modname}/search.html<br><br><br><b>通配符</b><hr>{modname}\t表示当前模块目录<br>",{shade:0,area:["50%","50%"],title:"",btn:[]})}function dr_url_fanzhan(){layer.alert("<b>举例</b><hr>默认模块地址: index.php?fid=分站别名<br>形如/beijin.html 这种地址格式为: index.php?fid=beijin<br><br><br><b>通配符</b><hr>{fid}\t表示当前分站别名<br>",{shade:0,area:["50%","50%"],title:"",btn:[]})}function dr_url_module_search_page(){layer.alert('<b>举例</b><hr>默认模块地址: <br>index.php?s=news&c=search&字段=值<br>形如news/search/搜索参数.html <br>这种地址格式为: {modname}/search/{param}.html<br><br><b>通配符</b><hr>{param}   表示搜索参数<br>{modname}  表示模块目录<br><br><br><b>使用自定义函数方法(需要有php开发经验)</b><hr>{自定义函数方法名($data)}\t   表示用自定义函数方法来定义url<br><br><br><b>自定义函数举例(需要有php开发经验)</b><hr>自定义函数文件: /config/custom.php <br>增加以下函数体:<br>function my_url($data) { return "你的URL"; } // 这个函数内容你自己定义<br>那么你就填写: {my_url($data)}<br>',{shade:0,title:"",area:["50%","50%"],btn:[]})}function dr_help(e){return 1==is_oemcms?void dr_tips(1,"请联系开发商"):void layer.open({type:2,title:'<i class="fa fa-question-circle"></i> 在线帮助',shadeClose:!0,scrollbar:!1,shade:0,area:["80%","90%"],content:"https://www.xunruicms.com/index.php?s=doc&c=show&id="+e+"&is_phpcmf=cms"})}function dr_search_help(){return 1==is_oemcms?void dr_tips(1,"请联系开发商"):void layer.open({type:2,title:'<i class="fa fa-question-circle"></i> 在线帮助',shadeClose:!0,scrollbar:!1,shade:0,area:["80%","90%"],content:admin_file+"?c=api&m=search_help&kw="+$("#mysearchform_kw").val()})}function dr_test_html_dir(e){$.ajax({type:"GET",dataType:"json",url:admin_file+"?c=api&m=test_dir&v="+encodeURIComponent($("#"+e).val()),success:function(e){dr_tips(e.code,e.msg)},error:function(e,t,a){dr_ajax_admin_alert_error(e,t,a)}})}function dr_ajax_admin_alert_error(e,t,a){layer.closeAll("loading");var r=e.responseText;r?layer.open({type:1,title:lang.error,fix:!0,shadeClose:!0,shade:0,area:["50%","50%"],content:'<div style="padding:10px;">'+r+"</div>"}):dr_tips(0,lang.error)}var App=function(){var e,t=!1,a=!1,r=!1,i=[],o=function(){"rtl"===$("body").css("direction")&&(t=!0)},n=function(){for(var e=0;e<i.length;e++){var t=i[e];t.call()}},l=function(){var e;$(window).resize(function(){e&&clearTimeout(e),e=setTimeout(function(){n()},50)})},s=function(){$("body").on("click",".portlet > .portlet-title .fullscreen",function(e){e.preventDefault();var t=$(this).closest(".portlet");if(t.hasClass("portlet-fullscreen"))$(this).removeClass("on"),t.removeClass("portlet-fullscreen"),$("body").removeClass("page-portlet-fullscreen"),t.children(".portlet-body").css("height","auto");else{var a=App.getViewPort().height-t.children(".portlet-title").outerHeight()-parseInt(t.children(".portlet-body").css("padding-top"))-parseInt(t.children(".portlet-body").css("padding-bottom"));$(this).addClass("on"),t.addClass("portlet-fullscreen"),$("body").addClass("page-portlet-fullscreen"),t.children(".portlet-body").css("height",a)}})},d=function(){if($("body").on("click",".md-checkbox > label, .md-radio > label",function(){var e=$(this),t=$(this).children("span:first-child");t.addClass("inc");var a=t.clone(!0);t.before(a),$("."+t.attr("class")+":last",e).remove()}),$("body").hasClass("page-md")){var e,t,a,r,i;$("body").on("click","a.btn, button.btn, input.btn, label.btn",function(o){e=$(this),0==e.find(".md-click-circle").length&&e.prepend("<span class='md-click-circle'></span>"),t=e.find(".md-click-circle"),t.removeClass("md-click-animate"),t.height()||t.width()||(a=Math.max(e.outerWidth(),e.outerHeight()),t.css({height:a,width:a})),r=o.pageX-e.offset().left-t.width()/2,i=o.pageY-e.offset().top-t.height()/2,t.css({top:i+"px",left:r+"px"}).addClass("md-click-animate"),setTimeout(function(){t.remove()},1e3)})}var o=function(e){""!=e.val()?e.addClass("edited"):e.removeClass("edited")};$("body").on("keydown",".form-md-floating-label .form-control",function(e){o($(this))}),$("body").on("blur",".form-md-floating-label .form-control",function(e){o($(this))}),$(".form-md-floating-label .form-control").each(function(){$(this).val().length>0&&$(this).addClass("edited")})},c=function(){$().bootstrapSwitch&&$(".make-switch").bootstrapSwitch()},h=function(){$("body").on("shown.bs.collapse",".accordion.scrollable",function(e){App.scrollTo($(e.target))})},p=function(){if(encodeURI(location.hash)){var e=encodeURI(location.hash.substr(1));$('a[href="#'+e+'"]').parents(".tab-pane:hidden").each(function(){var e=$(this).attr("id");$('a[href="#'+e+'"]').click()}),$('a[href="#'+e+'"]').click()}$().tabdrop&&$(".tabbable-tabdrop .nav-pills, .tabbable-tabdrop .nav-tabs").tabdrop({text:'<i class="fa fa-ellipsis-v"></i>&nbsp;<i class="fa fa-angle-down"></i>'})},b=function(){$(".tooltips").tooltip(),$(".portlet > .portlet-title .fullscreen").tooltip({trigger:"hover",container:"body",title:"Fullscreen"}),$(".portlet > .portlet-title > .tools > .reload").tooltip({trigger:"hover",container:"body",title:"Reload"}),$(".portlet > .portlet-title > .tools > .remove").tooltip({trigger:"hover",container:"body",title:"Remove"}),$(".portlet > .portlet-title > .tools > .config").tooltip({trigger:"hover",container:"body",title:"Settings"}),$(".portlet > .portlet-title > .tools > .collapse, .portlet > .portlet-title > .tools > .expand").tooltip({trigger:"hover",container:"body",title:"Collapse/Expand"})},u=function(){$("body").on("click",".dropdown-menu.hold-on-click",function(e){e.stopPropagation()})},f=function(){$('[data-hover="dropdown"]').not(".hover-initialized").each(function(){$(this).dropdownHover(),$(this).addClass("hover-initialized")})},m=function(){"function"==typeof autosize&&autosize(document.querySelector("textarea.autosizeme"))},g=function(){$(".popovers").popover(),$(document).on("click.bs.popover.data-api",function(t){e&&e.popover("hide")})},_=function(){App.initSlimScroll(".scroller")},y=function(){$().counterUp&&$("[data-counter='counterup']").counterUp({delay:10,time:1e3})},v=function(){$("[data-auto-height]").each(function(){var e=$(this),t=$("[data-height]",e),a=0,r=e.attr("data-mode"),i=parseInt(e.attr("data-offset")?e.attr("data-offset"):0);t.each(function(){"height"==$(this).attr("data-height")?$(this).css("height",""):$(this).css("min-height","");var e="base-height"==r?$(this).outerHeight():$(this).outerHeight(!0);e>a&&(a=e)}),a+=i,t.each(function(){"height"==$(this).attr("data-height")?$(this).css("height",a):$(this).css("min-height",a)}),e.attr("data-related")&&$(e.attr("data-related")).css("height",e.height())})};return{init:function(){o(),l(),d(),c(),_(),s(),u(),p(),b(),g(),h(),m(),y(),this.addResizeHandler(v)},initAjax:function(){c(),f(),_(),u(),b(),g(),h()},initComponents:function(){this.initAjax()},setLastPopedPopover:function(t){e=t},addResizeHandler:function(e){i.push(e)},runResizeHandlers:function(){n()},scrollTo:function(e,t){var a=e&&e.length>0?e.offset().top:0;e&&($("body").hasClass("page-header-fixed")?a-=$(".page-header").height():$("body").hasClass("page-header-top-fixed")?a-=$(".page-header-top").height():$("body").hasClass("page-header-menu-fixed")&&(a-=$(".page-header-menu").height()),a+=t?t:-1*e.height()),$("html,body").animate({scrollTop:a},"slow")},initSlimScroll:function(e){$().slimScroll&&$(e).each(function(){if(!$(this).attr("data-initialized")){var e;e=$(this).attr("data-height")?$(this).attr("data-height"):$(this).css("height"),$(this).slimScroll({allowPageScroll:!0,size:"7px",color:$(this).attr("data-handle-color")?$(this).attr("data-handle-color"):"#bbb",wrapperClass:$(this).attr("data-wrapper-class")?$(this).attr("data-wrapper-class"):"slimScrollDiv",railColor:$(this).attr("data-rail-color")?$(this).attr("data-rail-color"):"#eaeaea",position:t?"left":"right",height:e,alwaysVisible:"1"==$(this).attr("data-always-visible"),railVisible:"1"==$(this).attr("data-rail-visible"),disableFadeOut:!0}),$(this).attr("data-initialized","1")}})},destroySlimScroll:function(e){$().slimScroll&&$(e).each(function(){if("1"===$(this).attr("data-initialized")){$(this).removeAttr("data-initialized"),$(this).removeAttr("style");var e={};$(this).attr("data-handle-color")&&(e["data-handle-color"]=$(this).attr("data-handle-color")),$(this).attr("data-wrapper-class")&&(e["data-wrapper-class"]=$(this).attr("data-wrapper-class")),$(this).attr("data-rail-color")&&(e["data-rail-color"]=$(this).attr("data-rail-color")),$(this).attr("data-always-visible")&&(e["data-always-visible"]=$(this).attr("data-always-visible")),$(this).attr("data-rail-visible")&&(e["data-rail-visible"]=$(this).attr("data-rail-visible")),$(this).slimScroll({wrapperClass:$(this).attr("data-wrapper-class")?$(this).attr("data-wrapper-class"):"slimScrollDiv",destroy:!0});var t=$(this);$.each(e,function(e,a){t.attr(e,a)})}})},scrollTop:function(){App.scrollTo()},getActualVal:function(e){return e=$(e),e.val()===e.attr("placeholder")?"":e.val()},getURLParameter:function(e){var t,a,r=window.location.search.substring(1),i=r.split("&");for(t=0;t<i.length;t++)if(a=i[t].split("="),a[0]==e)return unescape(a[1]);return null},isTouchDevice:function(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}},getViewPort:function(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),{width:e[t+"Width"],height:e[t+"Height"]}},getUniqueID:function(e){return"prefix_"+Math.floor(Math.random()*(new Date).getTime())},isIE8:function(){return a},isIE9:function(){return r},isRTL:function(){return t},isAngularJsApp:function(){return"undefined"!=typeof angular},getResponsiveBreakpoint:function(e){var t={xs:480,sm:768,md:992,lg:1200};return t[e]?t[e]:0}}}();jQuery(document).ready(function(){App.init()});var Layout=function(){var t=App.getResponsiveBreakpoint("md"),a=function(){},r=function(){$(".page-sidebar-mobile-offcanvas .responsive-toggler").click(function(){$("body").toggleClass("page-sidebar-mobile-offcanvas-open"),e.preventDefault(),e.stopPropagation()}),$("body").hasClass("page-sidebar-mobile-offcanvas")&&$(document).on("click",function(e){$("body").hasClass("page-sidebar-mobile-offcanvas-open")&&0===$(e.target).closest(".page-sidebar-mobile-offcanvas .responsive-toggler").length&&0===$(e.target).closest(".page-sidebar-wrapper").length&&($("body").removeClass("page-sidebar-mobile-offcanvas-open"),e.preventDefault(),e.stopPropagation())}),$(".page-sidebar-menu").on("click","li > a.nav-toggle, li > a > span.nav-toggle",function(e){var r=$(this).closest(".nav-item").children(".nav-link");if(!(App.getViewPort().width>=t&&!$(".page-sidebar-menu").attr("data-initialized")&&$("body").hasClass("page-sidebar-closed")&&1===r.parent("li").parent(".page-sidebar-menu").length)){var i=r.next().hasClass("sub-menu");if(!(App.getViewPort().width>=t&&1===r.parents(".page-sidebar-menu-hover-submenu").length)){if(i===!1)return void(App.getViewPort().width<t&&$(".page-sidebar").hasClass("in")&&$(".page-header .responsive-toggler").click());var o=r.parent().parent(),n=r,l=$(".page-sidebar-menu"),s=r.next(),d=l.data("auto-scroll"),c=parseInt(l.data("slide-speed")),h=l.data("keep-expanded");h||(o.children("li.open").children("a").children(".arrow").removeClass("open"),o.children("li.open").children(".sub-menu:not(.always-open)").slideUp(c),o.children("li.open").removeClass("open"));var p=-200;s.is(":visible")?($(".arrow",n).removeClass("open"),n.parent().removeClass("open"),s.slideUp(c,function(){d===!0&&$("body").hasClass("page-sidebar-closed")===!1&&($("body").hasClass("page-sidebar-fixed")?l.slimScroll({scrollTo:n.position().top}):App.scrollTo(n,p)),a()})):i&&($(".arrow",n).addClass("open"),n.parent().addClass("open"),s.slideDown(c,function(){d===!0&&$("body").hasClass("page-sidebar-closed")===!1&&($("body").hasClass("page-sidebar-fixed")?l.slimScroll({scrollTo:n.position().top}):App.scrollTo(n,p)),a()})),e.preventDefault()}}}),App.isAngularJsApp()&&$(".page-sidebar-menu li > a").on("click",function(e){App.getViewPort().width<t&&$(this).next().hasClass("sub-menu")===!1&&$(".page-header .responsive-toggler").click()}),$(".page-sidebar").on("click"," li > a.ajaxify",function(e){}),$(".page-content").on("click",".ajaxify",function(e){}),$(document).on("click",".page-header-fixed-mobile .page-header .responsive-toggler",function(){App.scrollTop()}),$(".page-sidebar").on("click",".sidebar-search .remove",function(e){e.preventDefault(),$(".sidebar-search").removeClass("open")}),$(".page-sidebar .sidebar-search").on("keypress","input.form-control",function(e){if(13==e.which)return dr_search_help(),!1}),$(".sidebar-search .submit").on("click",function(e){dr_search_help()}),0!==$(".sidebar-search").length&&($(".sidebar-search .input-group").on("click",function(e){e.stopPropagation()}),$("body").on("click",function(){$(".sidebar-search").hasClass("open")&&$(".sidebar-search").removeClass("open")}))},i=function(){var e=App.getViewPort().height-$(".page-header").outerHeight(!0);return $("body").hasClass("page-footer-fixed")&&(e-=$(".page-footer").outerHeight()),e},o=function(){var e=$(".page-sidebar-menu");a(),0!==$(".page-sidebar-fixed").length&&App.getViewPort().width>=t&&!$("body").hasClass("page-sidebar-menu-not-fixed")&&(e.attr("data-height",i()),App.destroySlimScroll(e),App.initSlimScroll(e),a())},n=function(){if("undefined"!=typeof is_min&&1==is_min){var e=$("body");$.cookie&&"1"===$.cookie("sidebar_closed")&&App.getViewPort().width>=t&&($("body").addClass("page-sidebar-closed"),$(".page-sidebar-menu").addClass("page-sidebar-menu-closed")),$("body").on("click",".sidebar-toggler",function(t){var a=$(".page-sidebar"),r=$(".page-sidebar-menu");$(".sidebar-search",a).removeClass("open"),e.hasClass("page-sidebar-closed")?(e.removeClass("page-sidebar-closed"),r.removeClass("page-sidebar-menu-closed"),$.cookie&&$.cookie("sidebar_closed","0")):(e.addClass("page-sidebar-closed"),r.addClass("page-sidebar-menu-closed"),e.hasClass("page-sidebar-fixed")&&r.trigger("mouseleave"),$.cookie&&$.cookie("sidebar_closed","1")),$(window).trigger("resize")})}};return{initSidebar:function(){o(),r(),n(),App.addResizeHandler(o)},initContent:function(){App.addResizeHandler(a)},init:function(){this.initSidebar(),this.initContent()},fixContentHeight:function(){a()},initFixedSidebar:function(){o()}}}();App.isAngularJsApp()===!1&&jQuery(document).ready(function(){Layout.init()}),jQuery(document).ready(function(){if($(".onloading").click(function(){layer.load(2,{time:5e3})}),$(".fc_member_show").click(function(){var e=$(this).attr("uid"),t=$(this).attr("member"),a=admin_file+"?c=api&m=member&name="+t+"&uid="+e;1==is_mobile_cms?width=height="90%":(width="50%",height="70%"),layer.open({type:2,title:'<i class="fa fa-user"></i> '+lang.member,shadeClose:!0,shade:0,area:[width,width],success:function(e,t){var a=layer.getChildFrame("body",t),r=$(a).html();if(r.indexOf('"code":0')>0&&r.length<150){var i=JSON.parse(r);layer.close(t),dr_tips(0,i.msg)}},content:a+"&is_ajax=1"})}),$(".table td,.table th").click(function(){var e=$(this);if(1==dr_isEllipsis(e[0])){var t=e.html();if(t.indexOf("checkbox")!=-1)return;if(t.indexOf("<input")!=-1)return;if(t.indexOf('class="btn')!=-1);else if(t.indexOf('href="')!=-1)return;layer.tips(t,e,{tips:[1,"#fff"],time:5e3})}}),"undefined"!=typeof is_admin&&1==is_admin){var e,t=!1;window.onunloadcancel=function(){clearTimeout(e)},window.onbeforeunload=function(){if(t)return setTimeout(function(){e=setTimeout(onunloadcancel,0)},0),lang.unloadtips},$("[type='submit'], [type='button']").click(function(){t=!1}),$("select").change(function(){t=!0}),$(document).keydown(function(e){(e.keyCode>=40||0==e.keyCode)&&(t=!0),16!=e.keyCode&&82!=e.keyCode&&91!=e.keyCode||(t=!1)})}$(document).width()<900?($(".fc-all-menu-top").remove(),$(".fc-mini-menu-top").show(),$(".fc-list-select button").each(function(){var e=$(this).html();if(re=new RegExp(/<i class=\"(.+)\"(.+)/i),re.test(e)){var t=e.match(re);$(this).html('<i class="'+t[1]+'"></i>'),$(this).attr("title",t[2].replace("></i> ",""))}}),$('a[data-toggle="tab"]').each(function(){var e=$(this).html();if(re=new RegExp(/<i class=\"(.+)\"(.+)/i),re.test(e)){var t=e.match(re);$(this).html('<i class="'+t[1]+'"></i>'),$(this).attr("title",t[2].replace("></i> ",""))}}),$(".my-top-left").html('<div class="fc-mini-logo">'+$(".page-header-inner .page-logo").html()+"</div>")):($(".fc-all-menu-top").show(),$(".fc-mini-menu-top").remove())});