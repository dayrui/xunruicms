if("undefined"==typeof editor_lang)var editor_lang={font:{bold:"\u7c97\u4f53",italic:"\u659c\u4f53",underline:"\u4e0b\u5212\u7ebf",clear:"\u6e05\u9664\u683c\u5f0f",height:"\u884c\u9ad8",name:"\u5b57\u4f53",strikethrough:"\u5220\u9664\u7ebf",subscript:"\u4e0b\u6807",superscript:"\u4e0a\u6807",size:"\u5b57\u53f7"},image:{image:"\u56fe\u7247",insert:"\u63d2\u5165\u56fe\u7247",resizeFull:"\u7f29\u653e\u81f3 100%",resizeHalf:"\u7f29\u653e\u81f3 50%",resizeQuarter:"\u7f29\u653e\u81f3 25%",floatLeft:"\u9760\u5de6\u6d6e\u52a8",floatRight:"\u9760\u53f3\u6d6e\u52a8",floatNone:"\u53d6\u6d88\u6d6e\u52a8",shapeRounded:"\u5f62\u72b6: \u5706\u89d2",shapeCircle:"\u5f62\u72b6: \u5706",shapeThumbnail:"\u5f62\u72b6: \u7f29\u7565\u56fe",shapeNone:"\u5f62\u72b6: \u65e0",dragImageHere:"\u5c06\u56fe\u7247\u62d6\u62fd\u81f3\u6b64\u5904",dropImage:"\u62d6\u62fd\u56fe\u7247\u6216\u6587\u672c",selectFromFiles:"\u4ece\u672c\u5730\u4e0a\u4f20",maximumFileSize:"\u6587\u4ef6\u5927\u5c0f\u6700\u5927\u503c",maximumFileSizeError:"\u6587\u4ef6\u5927\u5c0f\u8d85\u51fa\u6700\u5927\u503c\u3002",url:"\u56fe\u7247\u5730\u5740",remove:"\u79fb\u9664\u56fe\u7247",original:"\u539f\u59cb\u56fe\u7247"},video:{video:"\u89c6\u9891",videoLink:"\u89c6\u9891\u94fe\u63a5",insert:"\u63d2\u5165\u89c6\u9891",url:"\u89c6\u9891\u5730\u5740",providers:""},link:{link:"\u94fe\u63a5",insert:"\u63d2\u5165\u94fe\u63a5",unlink:"\u53bb\u9664\u94fe\u63a5",edit:"\u7f16\u8f91\u94fe\u63a5",textToDisplay:"\u663e\u793a\u6587\u672c",url:"\u94fe\u63a5\u5730\u5740",openInNewWindow:"\u5728\u65b0\u7a97\u53e3\u6253\u5f00"},table:{table:"\u8868\u683c",addRowAbove:"\u5728\u4e0a\u65b9\u63d2\u5165\u884c",addRowBelow:"\u5728\u4e0b\u65b9\u63d2\u5165\u884c",addColLeft:"\u5728\u5de6\u4fa7\u63d2\u5165\u5217",addColRight:"\u5728\u53f3\u4fa7\u63d2\u5165\u5217",delRow:"\u5220\u9664\u884c",delCol:"\u5220\u9664\u5217",delTable:"\u5220\u9664\u8868\u683c"},hr:{insert:"\u6c34\u5e73\u7ebf"},style:{style:"\u6837\u5f0f",p:"\u666e\u901a",blockquote:"\u5f15\u7528",pre:"\u4ee3\u7801",h1:"\u6807\u9898 1",h2:"\u6807\u9898 2",h3:"\u6807\u9898 3",h4:"\u6807\u9898 4",h5:"\u6807\u9898 5",h6:"\u6807\u9898 6"},lists:{unordered:"\u65e0\u5e8f\u5217\u8868",ordered:"\u6709\u5e8f\u5217\u8868"},options:{help:"\u6d4f\u89c8\u56fe\u7247\u76ee\u5f55",llvideo:"\u6d4f\u89c8\u89c6\u9891\u76ee\u5f55",attach:"\u9644\u4ef6\u4e0a\u4f20",fullscreen:"\u5168\u5c4f",codeview:"\u6e90\u4ee3\u7801"},paragraph:{paragraph:"\u6bb5\u843d",outdent:"\u51cf\u5c11\u7f29\u8fdb",indent:"\u589e\u52a0\u7f29\u8fdb",left:"\u5de6\u5bf9\u9f50",center:"\u5c45\u4e2d\u5bf9\u9f50",right:"\u53f3\u5bf9\u9f50",justify:"\u4e24\u7aef\u5bf9\u9f50"},color:{recent:"\u6700\u8fd1\u4f7f\u7528",more:"\u66f4\u591a",background:"\u80cc\u666f",foreground:"\u524d\u666f",transparent:"\u900f\u660e",setTransparent:"\u900f\u660e",reset:"\u91cd\u7f6e",resetToDefault:"\u9ed8\u8ba4"},shortcut:{shortcuts:"\u5feb\u6377\u952e",close:"\u5173\u95ed",textFormatting:"\u6587\u672c\u683c\u5f0f",action:"\u52a8\u4f5c",paragraphFormatting:"\u6bb5\u843d\u683c\u5f0f",documentStyle:"\u6587\u6863\u6837\u5f0f",extraKeys:"\u989d\u5916\u6309\u952e"},help:{insertParagraph:"\u63d2\u5165\u6bb5\u843d",undo:"\u64a4\u9500",redo:"\u91cd\u505a",tab:"\u589e\u52a0\u7f29\u8fdb",untab:"\u51cf\u5c11\u7f29\u8fdb",bold:"\u7c97\u4f53",italic:"\u659c\u4f53",underline:"\u4e0b\u5212\u7ebf",strikethrough:"\u5220\u9664\u7ebf",removeFormat:"\u6e05\u9664\u683c\u5f0f",justifyLeft:"\u5de6\u5bf9\u9f50",justifyCenter:"\u5c45\u4e2d\u5bf9\u9f50",justifyRight:"\u53f3\u5bf9\u9f50",justifyFull:"\u4e24\u7aef\u5bf9\u9f50",insertUnorderedList:"\u65e0\u5e8f\u5217\u8868",insertOrderedList:"\u6709\u5e8f\u5217\u8868",outdent:"\u51cf\u5c11\u7f29\u8fdb",indent:"\u589e\u52a0\u7f29\u8fdb",formatPara:"\u8bbe\u7f6e\u9009\u4e2d\u5185\u5bb9\u6837\u5f0f\u4e3a \u666e\u901a",formatH1:"\u8bbe\u7f6e\u9009\u4e2d\u5185\u5bb9\u6837\u5f0f\u4e3a \u6807\u98981",formatH2:"\u8bbe\u7f6e\u9009\u4e2d\u5185\u5bb9\u6837\u5f0f\u4e3a \u6807\u98982",formatH3:"\u8bbe\u7f6e\u9009\u4e2d\u5185\u5bb9\u6837\u5f0f\u4e3a \u6807\u98983",formatH4:"\u8bbe\u7f6e\u9009\u4e2d\u5185\u5bb9\u6837\u5f0f\u4e3a \u6807\u98984",formatH5:"\u8bbe\u7f6e\u9009\u4e2d\u5185\u5bb9\u6837\u5f0f\u4e3a \u6807\u98985",formatH6:"\u8bbe\u7f6e\u9009\u4e2d\u5185\u5bb9\u6837\u5f0f\u4e3a \u6807\u98986",insertHorizontalRule:"\u63d2\u5165\u6c34\u5e73\u7ebf","linkDialog.show":"\u663e\u793a\u94fe\u63a5\u5bf9\u8bdd\u6846"},history:{undo:"\u64a4\u9500",redo:"\u91cd\u505a"},specialChar:{specialChar:"\u7279\u6b8a\u5b57\u7b26",select:"\u9009\u53d6\u7279\u6b8a\u5b57\u7b26"}};(function(J,C){if("object"===typeof exports&&"object"===typeof module)module.exports=C(require("jquery"));else if("function"===typeof define&&define.amd)define(["jquery"],C);else{var v="object"===typeof exports?C(require("jquery")):C(J.jQuery),u;for(u in v)("object"===typeof exports?exports:J)[u]=v[u]}})(window,function(J){return function(C){function v(m){if(u[m])return u[m].exports;var q=u[m]={i:m,l:!1,exports:{}};C[m].call(q.exports,q,q.exports,v);q.l=!0;return q.exports}var u={};v.m=C;v.c=u;v.d=function(m,q,n){v.o(m,q)||Object.defineProperty(m,q,{enumerable:!0,get:n})};v.r=function(m){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"});Object.defineProperty(m,"__esModule",{value:!0})};v.t=function(m,q){q&1&&(m=v(m));if(q&8||q&4&&"object"===typeof m&&m&&m.__esModule)return m;var n=Object.create(null);v.r(n);Object.defineProperty(n,"default",{enumerable:!0,value:m});if(q&2&&"string"!=typeof m)for(var u in m)v.d(n,u,function(q){return m[q]}.bind(null,u));return n};v.n=function(m){var q=m&&m.__esModule?function(){return m["default"]}:function(){return m};v.d(q,"a",q);return q};v.o=function(m,q){return Object.prototype.hasOwnProperty.call(m,q)};v.p="";return v(v.s=52)}({0:function(C,v){C.exports=J},1:function(C,v,u){function m(t){"@babel/helpers - typeof";m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"===typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m};return m(t)}function q(m,q){for(var t=0;t<q.length;t++){var n=q[t];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(m,n.key,n)}}function n(m,n,H){n&&q(m.prototype,n);H&&q(m,H);return m}C=u(0);var N=u.n(C),F=function(){function m(n,q,t,v){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");this.markup=n;this.children=q;this.options=t;this.callback=v}n(m,[{key:"render",value:function(m){var n=N()(this.markup);this.options&&this.options.contents&&n.html(this.options.contents);this.options&&this.options.className&&n.addClass(this.options.className);this.options&&this.options.data&&N.a.each(this.options.data,function(m,q){n.attr("data-"+m,q)});if(this.options&&this.options.click)n.on("click",this.options.click);if(this.children){var q=n.find(".note-children-container");this.children.forEach(function(m){m.render(q.length?q:n)})}this.callback&&this.callback(n,this.options);this.options&&this.options.callback&&this.options.callback(n);m&&m.append(n);return n}}]);return m}();v.a={create:function(n,q){return function(t,v){var u="object"===m(v)?v:t,C=Array.isArray(t)?t:[];u&&u.children&&(C=u.children);return new F(n,C,u,q)}}}},2:function(C,v){C.exports={}},3:function(C,v,u){function m(d){return-1===f.a.inArray(d.toLowerCase(),la)?"'".concat(d,"'"):d}function q(d){return d[d.length-1]}function n(d){return d.slice(1)}function N(d,b){if(d&&d.length&&b){if(d.indexOf)return-1!==d.indexOf(b);if(d.contains)return d.contains(b)}return!1}function F(d){return d&&f()(d).hasClass("note-editable")}function t(d){d=d.toUpperCase();return function(b){return b&&b.nodeName.toUpperCase()===d}}function D(d){return d&&3===d.nodeType}function H(d){return d&&/^BR|^IMG|^HR|^IFRAME|^BUTTON|^INPUT|^AUDIO|^VIDEO|^EMBED/.test(d.nodeName.toUpperCase())}function K(d){return F(d)?!1:d&&/^DIV|^P|^LI|^H[1-7]/.test(d.nodeName.toUpperCase())}function ba(d){return!V(d)&&!U(d)&&!lb(d)&&!K(d)&&!ma(d)&&!ea(d)&&!na(d)}function U(d){return d&&/^UL|^OL/.test(d.nodeName.toUpperCase())}function J(d){return d&&/^TD|^TH/.test(d.nodeName.toUpperCase())}function V(d){return J(d)||ea(d)||F(d)}function G(d){return D(d)?d.nodeValue.length:d?d.childNodes.length:0}function L(d){var b=G(d);return 0===b||!D(d)&&1===b&&d.innerHTML===W||p.all(d.childNodes,D)&&""===d.innerHTML?!0:!1}function S(d,b){for(;d;){if(b(d))return d;if(F(d))break;d=d.parentNode}return null}function P(d,b){b=b||x.fail;var a=[];S(d,function(c){F(c)||a.push(c);return b(c)});return a}function ca(d,b){b=b||x.fail;for(var a=[];d&&!b(d);)a.push(d),d=d.nextSibling;return a}function R(d,b){var a=b.nextSibling,c=b.parentNode;a?c.insertBefore(d,a):c.appendChild(d);return d}function fa(d,b){f.a.each(b,function(a,c){d.appendChild(c)});return d}function k(d){return 0===d.offset}function O(d){return d.offset===G(d.node)}function oa(d){return k(d)||O(d)}function pa(d,b){for(;d&&d!==b;){if(0!==Q(d))return!1;d=d.parentNode}return!0}function qa(d,b){if(!b)return!1;for(;d&&d!==b;){if(Q(d)!==G(d.parentNode)-1)return!1;d=d.parentNode}return!0}function Q(d){for(var b=0;d=d.previousSibling;)b+=1;return b}function X(d){return!!(d&&d.childNodes&&d.childNodes.length)}function ra(d,b){var a,c;if(0===d.offset){if(F(d.node))return null;a=d.node.parentNode;c=Q(d.node)}else X(d.node)?(a=d.node.childNodes[d.offset-1],c=G(a)):(a=d.node,c=b?0:d.offset-1);return{node:a,offset:c}}function sa(d,b){var a,c;if(G(d.node)===d.offset){if(F(d.node))return null;(a=ga(d.node))?c=0:(a=d.node.parentNode,c=Q(d.node)+1)}else X(d.node)?(a=d.node.childNodes[d.offset],c=0):(a=d.node,c=b?G(d.node):d.offset+1);return{node:a,offset:c}}function ta(d,b){var a,c;if(L(d.node))return a=d.node.nextSibling,{node:a,offset:0};if(G(d.node)===d.offset){if(F(d.node))return null;(a=ga(d.node))?c=0:(a=d.node.parentNode,c=Q(d.node)+1);F(a)&&(a=d.node.nextSibling,c=0)}else if(X(d.node)?(a=d.node.childNodes[d.offset],c=0):(a=d.node,c=b?G(d.node):d.offset+1),L(a))return null;return{node:a,offset:c}}function ga(d){if(d.nextSibling&&d.parent===d.nextSibling.parent)return D(d.nextSibling)?d.nextSibling:ga(d.nextSibling)}function ua(d,b){return d.node===b.node&&d.offset===b.offset}function ha(d,b){var a=b&&b.isSkipPaddingBlankHTML,c=b&&b.isNotSplitEdgePoint,h=b&&b.isDiscardEmptySplits;h&&(a=!0);if(oa(d)&&(D(d.node)||c)){if(k(d))return d.node;if(O(d))return d.node.nextSibling}if(D(d.node))return d.node.splitText(d.offset);var g=d.node.childNodes[d.offset],c=R(d.node.cloneNode(!1),d.node);fa(c,ca(g));a||(a=d.node,H(a)||G(a)||(a.innerHTML=W),H(c)||G(c)||(c.innerHTML=W));return h&&(L(d.node)&&Y(d.node),L(c))?(Y(c),d.node.nextSibling):c}function va(d,b,a){d=P(b.node,x.eq(d));return d.length?1===d.length?ha(b,a):d.reduce(function(c,d){c===b.node&&(c=ha(b,a));return ha({node:d,offset:c?Q(c):G(d)},a)}):null}function wa(d){return document.createElement(d)}function Y(d,b){if(d&&d.parentNode){if(d.removeNode)return d.removeNode(b);var a=d.parentNode;if(!b){for(var c=[],h=0,g=d.childNodes.length;h<g;h++)c.push(d.childNodes[h]);h=0;for(g=c.length;h<g;h++)a.insertBefore(c[h],d)}a.removeChild(d)}}function xa(d,b){var a=ya(d[0])?d.val():d.html();return b?a.replace(/[\n\r]/g,""):a}function za(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function nb(d,b,a){b&&za(d.prototype,b);a&&za(d,a);return d}function Aa(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function ob(d,b,a){b&&Aa(d.prototype,b);a&&Aa(d,a);return d}function Ba(d,b){var a=d.parentElement(),c,h=document.body.createTextRange(),g,l=p.from(a.childNodes);for(c=0;c<l.length;c++)if(!e.isText(l[c])){h.moveToElementText(l[c]);if(0<=h.compareEndPoints("StartToStart",d))break;g=l[c]}if(0!==c&&e.isText(l[c-1])){c=document.body.createTextRange();c.moveToElementText(g||a);c.collapse(!g);a=g?g.nextSibling:a.firstChild;g=d.duplicate();g.setEndPoint("StartToStart",c);for(g=g.text.replace(/[\r\n]/g,"").length;g>a.nodeValue.length&&a.nextSibling;)g-=a.nodeValue.length,a=a.nextSibling;b&&a.nextSibling&&e.isText(a.nextSibling)&&g===a.nodeValue.length&&(g-=a.nodeValue.length,a=a.nextSibling);c=g}return{cont:a,offset:c}}function Ca(d){var b=document.body.createTextRange();d=function c(b,d){var h,g;if(e.isText(b)){g=e.listPrev(b,x.not(e.isText));var f=p.last(g).previousSibling;h=f||b.parentNode;d+=p.sum(p.tail(g),e.nodeLength);g=!f}else{h=b.childNodes[d]||b;if(e.isText(h))return c(h,0);d=0;g=!1}return{node:h,collapseToStart:g,offset:d}}(d.node,d.offset);b.moveToElementText(d.node);b.collapse(d.collapseToStart);b.moveStart("character",d.offset);return b}function pb(d){return f.a.Deferred(function(b){f.a.extend(new FileReader,{onload:function(a){b.resolve(a.target.result)},onerror:function(a){b.reject(a)}}).readAsDataURL(d)}).promise()}function qb(d){return f.a.Deferred(function(b){var a=f()("\x3cimg\x3e");a.one("load",function(){a.off("error abort");b.resolve(a)}).one("error abort",function(){a.off("load").detach();b.reject(a)}).css({display:"none"}).appendTo(document.body).attr("src",d)}).promise()}function Da(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function rb(d,b,a){b&&Da(d.prototype,b);a&&Da(d,a);return d}function Ea(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function sb(d,b,a){b&&Ea(d.prototype,b);a&&Ea(d,a);return d}function Fa(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function tb(d,b,a){b&&Fa(d.prototype,b);a&&Fa(d,a);return d}function Ga(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function ub(d,b,a){b&&Ga(d.prototype,b);a&&Ga(d,a);return d}function Ha(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function vb(d,b,a){b&&Ha(d.prototype,b);a&&Ha(d,a);return d}function Ia(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function wb(d,b,a){b&&Ia(d.prototype,b);a&&Ia(d,a);return d}function Ja(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function xb(d,b,a){b&&Ja(d.prototype,b);a&&Ja(d,a);return d}function Ka(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function yb(d,b,a){b&&Ka(d.prototype,b);a&&Ka(d,a);return d}function zb(d){if("undefined"===typeof Symbol||null==d[Symbol.iterator]){if(Array.isArray(d)||(d=Ab(d))){var b=0,a=function(){};return{s:a,n:function(){return b>=d.length?{done:!0}:{done:!1,value:d[b++]}},e:function(a){throw a;},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var c,h=!0,g=!1,l;return{s:function(){c=d[Symbol.iterator]()},n:function(){var a=c.next();h=a.done;return a},e:function(a){g=!0;l=a},f:function(){try{if(!h&&null!=c["return"])c["return"]()}finally{if(g)throw l;}}}}function Ab(d,b){if(d){if("string"===typeof d)return La(d,b);var a=Object.prototype.toString.call(d).slice(8,-1);"Object"===a&&d.constructor&&(a=d.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return La(d,b)}}function La(d,b){if(null==b||b>d.length)b=d.length;for(var a=0,c=Array(b);a<b;a++)c[a]=d[a];return c}function Ma(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function Bb(d,b,a){b&&Ma(d.prototype,b);a&&Ma(d,a);return d}function Na(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function Cb(d,b,a){b&&Na(d.prototype,b);a&&Na(d,a);return d}function Oa(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function Db(d,b,a){b&&Oa(d.prototype,b);a&&Oa(d,a);return d}function Pa(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function Eb(d,b,a){b&&Pa(d.prototype,b);a&&Pa(d,a);return d}function Qa(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function Fb(d,b,a){b&&Qa(d.prototype,b);a&&Qa(d,a);return d}function Ra(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function Gb(d,b,a){b&&Ra(d.prototype,b);a&&Ra(d,a);return d}function Sa(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function Hb(d,b,a){b&&Sa(d.prototype,b);a&&Sa(d,a);return d}function Ta(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function Ib(d,b,a){b&&Ta(d.prototype,b);a&&Ta(d,a);return d}function Ua(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function Jb(d,b,a){b&&Ua(d.prototype,b);a&&Ua(d,a);return d}function Va(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function Kb(d,b,a){b&&Va(d.prototype,b);a&&Va(d,a);return d}function Wa(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function Lb(d,b,a){b&&Wa(d.prototype,b);a&&Wa(d,a);return d}function Xa(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function Mb(d,b,a){b&&Xa(d.prototype,b);a&&Xa(d,a);return d}function Ya(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function Nb(d,b,a){b&&Ya(d.prototype,b);a&&Ya(d,a);return d}function Za(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function Ob(d,b,a){b&&Za(d.prototype,b);a&&Za(d,a);return d}function $a(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function Pb(d,b,a){b&&$a(d.prototype,b);a&&$a(d,a);return d}function ab(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function Qb(d,b,a){b&&ab(d.prototype,b);a&&ab(d,a);return d}function bb(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function Rb(d,b,a){b&&bb(d.prototype,b);a&&bb(d,a);return d}function cb(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function Sb(d,b,a){b&&cb(d.prototype,b);a&&cb(d,a);return d}function db(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function Tb(d,b,a){b&&db(d.prototype,b);a&&db(d,a);return d}function eb(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function Ub(d,b,a){b&&eb(d.prototype,b);a&&eb(d,a);return d}function fb(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}function Vb(d,b,a){b&&fb(d.prototype,b);a&&fb(d,a);return d}var Wb=u(0),f=u.n(Wb);f.a.summernote=f.a.summernote||{lang:{}};f.a.extend(f.a.summernote.lang,{"en-US":editor_lang});var Xb="function"===typeof define&&u(2),la=["sans-serif","serif","monospace","cursive","fantasy"],M=navigator.userAgent,ia=/MSIE|Trident/i.test(M),ja;if(ia){var da=/MSIE (\d+[.]\d+)/.exec(M);da&&(ja=parseFloat(da[1]));(da=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(M))&&(ja=parseFloat(da[1]))}var Z=/Edge\/\d+/.test(M),Yb="ontouchstart"in window||0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints,Zb=ia?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input",E={isMac:-1<navigator.appVersion.indexOf("Mac"),isMSIE:ia,isEdge:Z,isFF:!Z&&/firefox/i.test(M),isPhantom:/PhantomJS/i.test(M),isWebkit:!Z&&/webkit/i.test(M),isChrome:!Z&&/chrome/i.test(M),isSafari:!Z&&/safari/i.test(M)&&!/chrome/i.test(M),browserVersion:ja,jqueryVersion:parseFloat(f.a.fn.jquery),isSupportAmd:Xb,isSupportTouch:Yb,isFontInstalled:function(d){var b="Comic Sans MS"===d?"Courier New":"Comic Sans MS",a=document.createElement("canvas").getContext("2d");a.font="200px '"+b+"'";var c=a.measureText("mmmmmmmmmmwwwww").width;a.font="200px "+m(d)+', "'+b+'"';d=a.measureText("mmmmmmmmmmwwwww").width;return c!==d},isW3CRangeSupport:!!document.createRange,inputEventName:Zb,genericFontFamilies:la,validFontName:m},gb=0,x={eq:function(d){return function(b){return d===b}},eq2:function(d,b){return d===b},peq2:function(d){return function(b,a){return b[d]===a[d]}},ok:function(){return!0},fail:function(){return!1},self:function(d){return d},not:function(d){return function(){return!d.apply(d,arguments)}},and:function(d,b){return function(a){return d(a)&&b(a)}},invoke:function(d,b){return function(){return d[b].apply(d,arguments)}},resetUniqueId:function(){gb=0},uniqueId:function(d){var b=++gb+"";return d?d+b:b},rect2bnd:function(d){var b=f()(document);return{top:d.top+b.scrollTop(),left:d.left+b.scrollLeft(),width:d.right-d.left,height:d.bottom-d.top}},invertObject:function(d){var b={},a;for(a in d)Object.prototype.hasOwnProperty.call(d,a)&&(b[d[a]]=a);return b},namespaceToCamel:function(d,b){return(b||"")+d.split(".").map(function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}).join("")},debounce:function(d,b,a){var c;return function(){var h=this,g=arguments,l=a&&!c;clearTimeout(c);c=setTimeout(function(){c=null;a||d.apply(h,g)},b);l&&d.apply(h,g)}},isValidUrl:function(d){return/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/gi.test(d)}},p={head:function(d){return d[0]},last:q,initial:function(d){return d.slice(0,d.length-1)},tail:n,prev:function(d,b){if(d&&d.length&&b){var a=d.indexOf(b);return-1===a?null:d[a-1]}return null},next:function(d,b){if(d&&d.length&&b){var a=d.indexOf(b);return-1===a?null:d[a+1]}return null},find:function(d,b){for(var a=0,c=d.length;a<c;a++){var h=d[a];if(b(h))return h}},contains:N,all:function(d,b){for(var a=0,c=d.length;a<c;a++)if(!b(d[a]))return!1;return!0},sum:function(d,b){b=b||x.self;return d.reduce(function(a,c){return a+b(c)},0)},from:function(d){for(var b=[],a=d.length,c=-1;++c<a;)b[c]=d[c];return b},isEmpty:function(d){return!d||!d.length},clusterBy:function(d,b){return d.length?n(d).reduce(function(a,c){var d=q(a);b(q(d),c)?d[d.length]=c:a[a.length]=[c];return a},[[d[0]]]):[]},compact:function(d){for(var b=[],a=0,c=d.length;a<c;a++)d[a]&&b.push(d[a]);return b},unique:function(d){for(var b=[],a=0,c=d.length;a<c;a++)N(b,d[a])||b.push(d[a]);return b}},ka=String.fromCharCode(160),$b=t("PRE"),hb=t("LI"),ma=t("TABLE"),na=t("DATA"),lb=t("HR"),ea=t("BLOCKQUOTE"),ib=t("A"),ac=t("BODY"),W=E.isMSIE&&11>E.browserVersion?"\x26nbsp;":"\x3cbr\x3e",ya=t("TEXTAREA"),e={NBSP_CHAR:ka,ZERO_WIDTH_NBSP_CHAR:"\ufeff",blank:W,emptyPara:"\x3cp\x3e".concat(W,"\x3c/p\x3e"),makePredByNodeName:t,isEditable:F,isControlSizing:function(d){return d&&f()(d).hasClass("note-control-sizing")},isText:D,isElement:function(d){return d&&1===d.nodeType},isVoid:H,isPara:K,isPurePara:function(d){return K(d)&&!hb(d)},isHeading:function(d){return d&&/^H[1-7]/.test(d.nodeName.toUpperCase())},isInline:ba,isBlock:x.not(ba),isBodyInline:function(d){return ba(d)&&!S(d,K)},isBody:ac,isParaInline:function(d){return ba(d)&&!!S(d,K)},isPre:$b,isList:U,isTable:ma,isData:na,isCell:J,isBlockquote:ea,isBodyContainer:V,isAnchor:ib,isDiv:t("DIV"),isLi:hb,isBR:t("BR"),isSpan:t("SPAN"),isB:t("B"),isU:t("U"),isS:t("S"),isI:t("I"),isImg:t("IMG"),isTextarea:ya,deepestChildIsEmpty:function(d){do if(null===d.firstElementChild||""===d.firstElementChild.innerHTML)break;while(d=d.firstElementChild);return L(d)},isEmpty:L,isEmptyAnchor:x.and(ib,L),isClosestSibling:function(d,b){return d.nextSibling===b||d.previousSibling===b},withClosestSiblings:function(d,b){b=b||x.ok;var a=[];d.previousSibling&&b(d.previousSibling)&&a.push(d.previousSibling);a.push(d);d.nextSibling&&b(d.nextSibling)&&a.push(d.nextSibling);return a},nodeLength:G,isLeftEdgePoint:k,isRightEdgePoint:O,isEdgePoint:oa,isLeftEdgeOf:pa,isRightEdgeOf:qa,isLeftEdgePointOf:function(d,b){return k(d)&&pa(d.node,b)},isRightEdgePointOf:function(d,b){return O(d)&&qa(d.node,b)},prevPoint:ra,nextPoint:sa,nextPointWithEmptyNode:ta,isSamePoint:ua,isVisiblePoint:function(d){if(D(d.node)||!X(d.node)||L(d.node))return!0;var b=d.node.childNodes[d.offset-1];d=d.node.childNodes[d.offset];return b&&!H(b)||d&&!H(d)?!1:!0},prevPointUntil:function(d,b){for(;d;){if(b(d))return d;d=ra(d)}return null},nextPointUntil:function(d,b){for(;d;){if(b(d))return d;d=sa(d)}return null},isCharPoint:function(d){return D(d.node)?(d=d.node.nodeValue.charAt(d.offset-1))&&" "!==d&&d!==ka:!1},isSpacePoint:function(d){if(!D(d.node))return!1;d=d.node.nodeValue.charAt(d.offset-1);return" "===d||d===ka},walkPoint:function(d,b,a,c){for(var h=d;h;){a(h);if(ua(h,b))break;h=ta(h,c&&d.node!==h.node&&b.node!==h.node)}},ancestor:S,singleChildAncestor:function(d,b){for(d=d.parentNode;d&&1===G(d);){if(b(d))return d;if(F(d))break;d=d.parentNode}return null},listAncestor:P,lastAncestor:function(d,b){var a=P(d);return p.last(a.filter(b))},listNext:ca,listPrev:function(d,b){b=b||x.fail;for(var a=[];d&&!b(d);)a.push(d),d=d.previousSibling;return a},listDescendant:function(d,b){var a=[];b=b||x.ok;(function h(g){d!==g&&b(g)&&a.push(g);for(var l=0,e=g.childNodes.length;l<e;l++)h(g.childNodes[l])})(d);return a},commonAncestor:function(d,b){for(var a=P(d),c=b;c;c=c.parentNode)if(-1<a.indexOf(c))return c;return null},wrap:function(d,b){var a=d.parentNode,c=f()("\x3c"+b+"\x3e")[0];a.insertBefore(c,d);c.appendChild(d);return c},insertAfter:R,appendChildNodes:fa,position:Q,hasChildren:X,makeOffsetPath:function(d,b){return P(b,x.eq(d)).map(Q).reverse()},fromOffsetPath:function(d,b){for(var a=d,c=0,h=b.length;c<h;c++)a=a.childNodes.length<=b[c]?a.childNodes[a.childNodes.length-1]:a.childNodes[b[c]];return a},splitTree:va,splitPoint:function(d,b){var a=b?K:V,c=P(d.node,a),h=p.last(c)||d.node;a(h)?a=c[c.length-2]:(a=h,h=a.parentNode);(a=a&&va(a,d,{isSkipPaddingBlankHTML:b,isNotSplitEdgePoint:b}))||h!==d.node||(a=d.node.childNodes[d.offset]);return{rightNode:a,container:h}},create:wa,createText:function(d){return document.createTextNode(d)},remove:Y,removeWhile:function(d,b){for(;d&&!F(d)&&b(d);){var a=d.parentNode;Y(d);d=a}},replace:function(d,b){if(d.nodeName.toUpperCase()===b.toUpperCase())return d;var a=wa(b);d.style.cssText&&(a.style.cssText=d.style.cssText);fa(a,p.from(d.childNodes));R(a,d);Y(d);return a},html:function(d,b){var a=xa(d);b&&(a=a.replace(/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g,function(a,b,d){d=d.toUpperCase();b=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(d)&&!!b;d=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(d);return a+(b||d?"\n":"")}),a=a.trim());return a},value:xa,posFromPlaceholder:function(d){var b=f()(d);d=b.offset();b=b.outerHeight(!0);return{left:d.left,top:d.top+b}},attachEvents:function(d,b){Object.keys(b).forEach(function(a){d.on(a,b[a])})},detachEvents:function(d,b){Object.keys(b).forEach(function(a){d.off(a,b[a])})},isCustomStyleTag:function(d){return d&&!D(d)&&p.contains(d.classList,"note-styletag")}},bc=function(){function d(b,a){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.$note=b;this.memos={};this.modules={};this.layoutInfo={};this.options=f.a.extend(!0,{},a);f.a.summernote.ui=f.a.summernote.ui_template(this.options);this.ui=f.a.summernote.ui;this.initialize()}nb(d,[{key:"initialize",value:function(){this.layoutInfo=this.ui.createLayout(this.$note);this._initialize();this.$note.hide();return this}},{key:"destroy",value:function(){this._destroy();this.$note.removeData("summernote");this.ui.removeLayout(this.$note,this.layoutInfo)}},{key:"reset",value:function(){var b=this.isDisabled();this.code(e.emptyPara);this._destroy();this._initialize();b&&this.disable()}},{key:"_initialize",value:function(){var b=this;this.options.id=x.uniqueId(f.a.now());this.options.container=this.options.container||this.layoutInfo.editor;var a=f.a.extend({},this.options.buttons);Object.keys(a).forEach(function(c){b.memo("button."+c,a[c])});var c=f.a.extend({},this.options.modules,f.a.summernote.plugins||{});Object.keys(c).forEach(function(a){b.module(a,c[a],!0)});Object.keys(this.modules).forEach(function(a){b.initializeModule(a)})}},{key:"_destroy",value:function(){var b=this;Object.keys(this.modules).reverse().forEach(function(a){b.removeModule(a)});Object.keys(this.memos).forEach(function(a){b.removeMemo(a)});this.triggerEvent("destroy",this)}},{key:"code",value:function(b){var a=this.invoke("codeview.isActivated");if(void 0===b)return this.invoke("codeview.sync"),a?this.layoutInfo.codable.val():this.layoutInfo.editable.html();a?this.invoke("codeview.sync",b):this.layoutInfo.editable.html(b);this.$note.val(b);this.triggerEvent("change",b,this.layoutInfo.editable)}},{key:"isDisabled",value:function(){return"false"===this.layoutInfo.editable.attr("contenteditable")}},{key:"enable",value:function(){this.layoutInfo.editable.attr("contenteditable",!0);this.invoke("toolbar.activate",!0);this.triggerEvent("disable",!1);this.options.editing=!0}},{key:"disable",value:function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate");this.layoutInfo.editable.attr("contenteditable",!1);this.options.editing=!1;this.invoke("toolbar.deactivate",!0);this.triggerEvent("disable",!0)}},{key:"triggerEvent",value:function(){var b=p.head(arguments),a=p.tail(p.from(arguments)),c=this.options.callbacks[x.namespaceToCamel(b,"on")];c&&c.apply(this.$note[0],a);this.$note.trigger("summernote."+b,a)}},{key:"initializeModule",value:function(b){b=this.modules[b];b.shouldInitialize=b.shouldInitialize||x.ok;b.shouldInitialize()&&(b.initialize&&b.initialize(),b.events&&e.attachEvents(this.$note,b.events))}},{key:"module",value:function(b,a,c){if(1===arguments.length)return this.modules[b];this.modules[b]=new a(this);c||this.initializeModule(b)}},{key:"removeModule",value:function(b){var a=this.modules[b];a.shouldInitialize()&&(a.events&&e.detachEvents(this.$note,a.events),a.destroy&&a.destroy());delete this.modules[b]}},{key:"memo",value:function(b,a){if(1===arguments.length)return this.memos[b];this.memos[b]=a}},{key:"removeMemo",value:function(b){this.memos[b]&&this.memos[b].destroy&&this.memos[b].destroy();delete this.memos[b]}},{key:"createInvokeHandlerAndUpdateState",value:function(b,a){var c=this;return function(d){c.createInvokeHandler(b,a)(d);c.invoke("buttons.updateCurrentStyle")}}},{key:"createInvokeHandler",value:function(b,a){var c=this;return function(d){d.preventDefault();d=f()(d.target);c.invoke(b,a||d.closest("[data-value]").data("value"),d)}}},{key:"invoke",value:function(){var b=p.head(arguments),a=p.tail(p.from(arguments)),c=b.split("."),d=1<c.length,b=d&&p.head(c),c=d?p.last(c):p.head(c),d=this.modules[b||"editor"];if(!b&&this[c])return this[c].apply(this,a);if(d&&d[c]&&d.shouldInitialize())return d[c].apply(d,a)}}]);return d}();f.a.fn.extend({summernote:function(){var d=f.a.type(p.head(arguments)),b="string"===d,a=f.a.extend({},f.a.summernote.options,"object"===d?p.head(arguments):{});a.langInfo=f.a.extend(!0,{},f.a.summernote.lang["en-US"],f.a.summernote.lang[a.lang]);a.icons=f.a.extend(!0,{},f.a.summernote.options.icons,a.icons);a.tooltip="auto"===a.tooltip?!E.isSupportTouch:a.tooltip;this.each(function(c,b){var d=f()(b);if(!d.data("summernote")){var h=new bc(d,a);d.data("summernote",h);d.data("summernote").triggerEvent("init",h.layoutInfo)}});d=this.first();if(d.length){d=d.data("summernote");if(b)return d.invoke.apply(d,p.from(arguments));a.focus&&d.invoke("editor.focus")}return this}});var aa=function(){function d(b,a,c,h){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.sc=b;this.so=a;this.ec=c;this.eo=h;this.isOnEditable=this.makeIsOn(e.isEditable);this.isOnList=this.makeIsOn(e.isList);this.isOnAnchor=this.makeIsOn(e.isAnchor);this.isOnCell=this.makeIsOn(e.isCell);this.isOnData=this.makeIsOn(e.isData)}ob(d,[{key:"nativeRange",value:function(){if(E.isW3CRangeSupport){var b=document.createRange();b.setStart(this.sc,this.so);b.setEnd(this.ec,this.eo);return b}b=Ca({node:this.sc,offset:this.so});b.setEndPoint("EndToEnd",Ca({node:this.ec,offset:this.eo}));return b}},{key:"getPoints",value:function(){return{sc:this.sc,so:this.so,ec:this.ec,eo:this.eo}}},{key:"getStartPoint",value:function(){return{node:this.sc,offset:this.so}}},{key:"getEndPoint",value:function(){return{node:this.ec,offset:this.eo}}},{key:"select",value:function(){var b=this.nativeRange();if(E.isW3CRangeSupport){var a=document.getSelection();0<a.rangeCount&&a.removeAllRanges();a.addRange(b)}else b.select();return this}},{key:"scrollIntoView",value:function(b){var a=f()(b).height();b.scrollTop+a<this.sc.offsetTop&&(b.scrollTop+=Math.abs(b.scrollTop+a-this.sc.offsetTop));return this}},{key:"normalize",value:function(){var b=function(a,b){if(!a||e.isVisiblePoint(a)&&(!e.isEdgePoint(a)||e.isRightEdgePoint(a)&&!b||e.isLeftEdgePoint(a)&&b||e.isRightEdgePoint(a)&&b&&e.isVoid(a.node.nextSibling)||e.isLeftEdgePoint(a)&&!b&&e.isVoid(a.node.previousSibling)||e.isBlock(a.node)&&e.isEmpty(a.node)))return a;var c=e.ancestor(a.node,e.isBlock),d=!1;d||(d=e.prevPoint(a)||{node:null},d=(e.isLeftEdgePointOf(a,c)||e.isVoid(d.node))&&!b);var h=!1;h=e.nextPoint(a)||{node:null},h=(e.isRightEdgePointOf(a,c)||e.isVoid(h.node))&&b;if(d||h){if(e.isVisiblePoint(a))return a;b=!b}return(b?e.nextPointUntil(e.nextPoint(a),e.isVisiblePoint):e.prevPointUntil(e.prevPoint(a),e.isVisiblePoint))||a},a=b(this.getEndPoint(),!1),b=this.isCollapsed()?a:b(this.getStartPoint(),!0);return new d(b.node,b.offset,a.node,a.offset)}},{key:"nodes",value:function(b,a){b=b||x.ok;var c=a&&a.includeAncestor,d=a&&a.fullyContains,g=this.getStartPoint(),l=this.getEndPoint(),r=[],f=[];e.walkPoint(g,l,function(a){if(!e.isEditable(a.node)){var h;d?(e.isLeftEdgePoint(a)&&f.push(a.node),e.isRightEdgePoint(a)&&p.contains(f,a.node)&&(h=a.node)):h=c?e.ancestor(a.node,b):a.node;h&&b(h)&&r.push(h)}},!0);return p.unique(r)}},{key:"commonAncestor",value:function(){return e.commonAncestor(this.sc,this.ec)}},{key:"expand",value:function(b){var a=e.ancestor(this.sc,b);b=e.ancestor(this.ec,b);if(!a&&!b)return new d(this.sc,this.so,this.ec,this.eo);var c=this.getPoints();a&&(c.sc=a,c.so=0);b&&(c.ec=b,c.eo=e.nodeLength(b));return new d(c.sc,c.so,c.ec,c.eo)}},{key:"collapse",value:function(b){return b?new d(this.sc,this.so,this.sc,this.so):new d(this.ec,this.eo,this.ec,this.eo)}},{key:"splitText",value:function(){var b=this.sc===this.ec,a=this.getPoints();e.isText(this.ec)&&!e.isEdgePoint(this.getEndPoint())&&this.ec.splitText(this.eo);e.isText(this.sc)&&!e.isEdgePoint(this.getStartPoint())&&(a.sc=this.sc.splitText(this.so),a.so=0,b&&(a.ec=a.sc,a.eo=this.eo-this.so));return new d(a.sc,a.so,a.ec,a.eo)}},{key:"deleteContents",value:function(){if(this.isCollapsed())return this;var b=this.splitText(),a=b.nodes(null,{fullyContains:!0}),c=e.prevPointUntil(b.getStartPoint(),function(c){return!p.contains(a,c.node)}),h=[];f.a.each(a,function(a,b){var d=b.parentNode;c.node!==d&&1===e.nodeLength(d)&&h.push(d);e.remove(b,!1)});f.a.each(h,function(a,c){e.remove(c,!1)});return(new d(c.node,c.offset,c.node,c.offset)).normalize()}},{key:"makeIsOn",value:function(b){return function(){var a=e.ancestor(this.sc,b);return!!a&&a===e.ancestor(this.ec,b)}}},{key:"isLeftEdgeOf",value:function(b){return e.isLeftEdgePoint(this.getStartPoint())?(b=e.ancestor(this.sc,b))&&e.isLeftEdgeOf(this.sc,b):!1}},{key:"isCollapsed",value:function(){return this.sc===this.ec&&this.so===this.eo}},{key:"wrapBodyInlineWithPara",value:function(){if(e.isBodyContainer(this.sc)&&e.isEmpty(this.sc))return this.sc.innerHTML=e.emptyPara,new d(this.sc.firstChild,0,this.sc.firstChild,0);var b=this.normalize();if(e.isParaInline(this.sc)||e.isPara(this.sc))return b;var a;if(e.isInline(b.sc)){var c=e.listAncestor(b.sc,x.not(e.isInline));a=p.last(c);e.isInline(a)||(a=c[c.length-2]||b.sc.childNodes[b.so])}else a=b.sc.childNodes[0<b.so?b.so-1:0];a&&(b=e.listPrev(a,e.isParaInline).reverse(),b=b.concat(e.listNext(a.nextSibling,e.isParaInline)),b.length&&(a=e.wrap(p.head(b),"p"),e.appendChildNodes(a,p.tail(b))));return this.normalize()}},{key:"insertNode",value:function(b){var a=this;if(e.isText(b)||e.isInline(b))a=this.wrapBodyInlineWithPara().deleteContents();a=e.splitPoint(a.getStartPoint(),e.isInline(b));a.rightNode?(a.rightNode.parentNode.insertBefore(b,a.rightNode),e.isEmpty(a.rightNode)&&e.isPara(b)&&a.rightNode.parentNode.removeChild(a.rightNode)):a.container.appendChild(b);return b}},{key:"pasteHTML",value:function(b){b=f.a.trim(b);b=f()("\x3cdiv\x3e\x3c/div\x3e").html(b)[0];b=p.from(b.childNodes);var a=this,c=!1;0<=a.so&&(b=b.reverse(),c=!0);b=b.map(function(c){return a.insertNode(c)});c&&(b=b.reverse());return b}},{key:"toString",value:function(){var b=this.nativeRange();return E.isW3CRangeSupport?b.toString():b.text}},{key:"getWordRange",value:function(b){var a=this.getEndPoint();if(!e.isCharPoint(a))return this;var c=e.prevPointUntil(a,function(a){return!e.isCharPoint(a)});b&&(a=e.nextPointUntil(a,function(a){return!e.isCharPoint(a)}));return new d(c.node,c.offset,a.node,a.offset)}},{key:"getWordsRange",value:function(b){var a=this.getEndPoint(),c=function(a){return!e.isCharPoint(a)&&!e.isSpacePoint(a)};if(c(a))return this;var h=e.prevPointUntil(a,c);b&&(a=e.nextPointUntil(a,c));return new d(h.node,h.offset,a.node,a.offset)}},{key:"getWordsMatchRange",value:function(b){var a=this.getEndPoint(),c=e.prevPointUntil(a,function(c){if(!e.isCharPoint(c)&&!e.isSpacePoint(c))return!0;c=new d(c.node,c.offset,a.node,a.offset);return(c=b.exec(c.toString()))&&0===c.index}),c=new d(c.node,c.offset,a.node,a.offset),h=c.toString(),g=b.exec(h);return g&&g[0].length===h.length?c:null}},{key:"bookmark",value:function(b){return{s:{path:e.makeOffsetPath(b,this.sc),offset:this.so},e:{path:e.makeOffsetPath(b,this.ec),offset:this.eo}}}},{key:"paraBookmark",value:function(b){return{s:{path:p.tail(e.makeOffsetPath(p.head(b),this.sc)),offset:this.so},e:{path:p.tail(e.makeOffsetPath(p.last(b),this.ec)),offset:this.eo}}}},{key:"getClientRects",value:function(){return this.nativeRange().getClientRects()}}]);return d}(),z={create:function(d,b,a,c){if(4===arguments.length)return new aa(d,b,a,c);if(2===arguments.length)return new aa(d,b,d,b);var h=this.createFromSelection();return h||1!==arguments.length?h:(h=arguments[0],e.isEditable(h)&&(h=h.lastChild),this.createFromBodyElement(h,e.emptyPara===arguments[0].innerHTML))},createFromBodyElement:function(d){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;return this.createFromNode(d).collapse(b)},createFromSelection:function(){var d,b,a,c;if(E.isW3CRangeSupport){d=document.getSelection();if(!d||0===d.rangeCount||e.isBody(d.anchorNode))return null;c=d.getRangeAt(0);d=c.startContainer;b=c.startOffset;a=c.endContainer;c=c.endOffset}else b=document.selection.createRange(),d=b.duplicate(),d.collapse(!1),b.collapse(!0),b=Ba(b,!0),c=Ba(d,!1),e.isText(b.node)&&e.isLeftEdgePoint(b)&&e.isTextNode(c.node)&&e.isRightEdgePoint(c)&&c.node.nextSibling===b.node&&(b=c),d=b.cont,b=b.offset,a=c.cont,c=c.offset;return new aa(d,b,a,c)},createFromNode:function(d){var b=d,a=0,c=e.nodeLength(d);e.isVoid(b)&&(a=e.listPrev(b).length-1,b=b.parentNode);e.isBR(d)?(c=e.listPrev(d).length-1,d=d.parentNode):e.isVoid(d)&&(c=e.listPrev(d).length,d=d.parentNode);return this.create(b,a,d,c)},createFromNodeBefore:function(d){return this.createFromNode(d).collapse(!0)},createFromNodeAfter:function(d){return this.createFromNode(d).collapse()},createFromBookmark:function(d,b){var a=e.fromOffsetPath(d,b.s.path),c=b.s.offset,h=e.fromOffsetPath(d,b.e.path);return new aa(a,c,h,b.e.offset)},createFromParaBookmark:function(d,b){var a=d.s.offset,c=d.e.offset,h=e.fromOffsetPath(p.head(b),d.s.path),g=e.fromOffsetPath(p.last(b),d.e.path);return new aa(h,a,g,c)}},I={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221,HOME:36,END:35,PAGEUP:33,PAGEDOWN:34},A={isEdit:function(d){return p.contains([I.BACKSPACE,I.TAB,I.ENTER,I.SPACE,I.DELETE],d)},isMove:function(d){return p.contains([I.LEFT,I.UP,I.RIGHT,I.DOWN],d)},isNavigation:function(d){return p.contains([I.HOME,I.END,I.PAGEUP,I.PAGEDOWN],d)},nameFromCode:x.invertObject(I),code:I},cc=function(){function d(b){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.stack=[];this.stackOffset=-1;this.context=b;this.$editable=b.layoutInfo.editable;this.editable=this.$editable[0]}rb(d,[{key:"makeSnapshot",value:function(){var b=z.create(this.editable),a={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:this.$editable.html(),bookmark:b&&b.isOnEditable()?b.bookmark(this.editable):a}}},{key:"applySnapshot",value:function(b){null!==b.contents&&this.$editable.html(b.contents);null!==b.bookmark&&z.createFromBookmark(this.editable,b.bookmark).select()}},{key:"rewind",value:function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo();this.stackOffset=0;this.applySnapshot(this.stack[this.stackOffset])}},{key:"commit",value:function(){this.stack=[];this.stackOffset=-1;this.recordUndo()}},{key:"reset",value:function(){this.stack=[];this.stackOffset=-1;this.$editable.html("");this.recordUndo()}},{key:"undo",value:function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo();0<this.stackOffset&&(this.stackOffset--,this.applySnapshot(this.stack[this.stackOffset]))}},{key:"redo",value:function(){this.stack.length-1>this.stackOffset&&(this.stackOffset++,this.applySnapshot(this.stack[this.stackOffset]))}},{key:"recordUndo",value:function(){this.stackOffset++;this.stack.length>this.stackOffset&&(this.stack=this.stack.slice(0,this.stackOffset));this.stack.push(this.makeSnapshot());this.stack.length>this.context.options.historyLimit&&(this.stack.shift(),--this.stackOffset)}}]);return d}(),dc=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");}sb(d,[{key:"jQueryCSS",value:function(b,a){if(1.9>E.jqueryVersion){var c={};f.a.each(a,function(a,d){c[d]=b.css(d)});return c}return b.css(a)}},{key:"fromNode",value:function(b){var a=this.jQueryCSS(b,["font-family","font-size","text-align","list-style-type","line-height"])||{};b=b[0].style.fontSize||a["font-size"];a["font-size"]=parseInt(b,10);a["font-size-unit"]=b.match(/[a-z%]+$/);return a}},{key:"stylePara",value:function(b,a){f.a.each(b.nodes(e.isPara,{includeAncestor:!0}),function(c,b){f()(b).css(a)})}},{key:"styleNodes",value:function(b,a){b=b.splitText();var c=a&&a.nodeName||"SPAN",d=!(!a||!a.expandClosestSibling),g=!(!a||!a.onlyPartialContains);if(b.isCollapsed())return[b.insertNode(e.create(c))];var l=e.makePredByNodeName(c),r=b.nodes(e.isText,{fullyContains:!0}).map(function(a){return e.singleChildAncestor(a,l)||e.wrap(a,c)});if(d){if(g)var y=b.nodes(),l=x.and(l,function(a){return p.contains(y,a)});return r.map(function(a){a=e.withClosestSiblings(a,l);var c=p.head(a),b=p.tail(a);f.a.each(b,function(a,b){e.appendChildNodes(c,b.childNodes);e.remove(b)});return p.head(a)})}return r}},{key:"current",value:function(b){var a=f()(e.isElement(b.sc)?b.sc:b.sc.parentNode),a=this.fromNode(a);try{a=f.a.extend(a,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal","font-family":document.queryCommandValue("fontname")||a["font-family"]})}catch(h){}if(b.isOnList()){var c=-1<["circle","disc","disc-leading-zero","square"].indexOf(a["list-style-type"]);a["list-style"]=c?"unordered":"ordered"}else a["list-style"]="none";(c=e.ancestor(b.sc,e.isPara))&&c.style["line-height"]?a["line-height"]=c.style.lineHeight:(c=parseInt(a["line-height"],10)/parseInt(a["font-size"],10),a["line-height"]=c.toFixed(1));a.anchor=b.isOnAnchor()&&e.ancestor(b.sc,e.isAnchor);a.ancestors=e.listAncestor(b.sc,e.isEditable);a.range=b;return a}}]);return d}(),kb=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");}tb(d,[{key:"insertOrderedList",value:function(b){this.toggleList("OL",b)}},{key:"insertUnorderedList",value:function(b){this.toggleList("UL",b)}},{key:"indent",value:function(b){var a=this;b=z.create(b).wrapBodyInlineWithPara();var c=b.nodes(e.isPara,{includeAncestor:!0}),c=p.clusterBy(c,x.peq2("parentNode"));f.a.each(c,function(c,b){var d=p.head(b);if(e.isLi(d)){var h=a.findList(d.previousSibling);h?b.map(function(a){return h.appendChild(a)}):(a.wrapList(b,d.parentNode.nodeName),b.map(function(a){return a.parentNode}).map(function(c){return a.appendToPrevious(c)}))}else f.a.each(b,function(a,c){f()(c).css("marginLeft",function(a,c){return(parseInt(c,10)||0)+25})})});b.select()}},{key:"outdent",value:function(b){var a=this;b=z.create(b).wrapBodyInlineWithPara();var c=b.nodes(e.isPara,{includeAncestor:!0}),c=p.clusterBy(c,x.peq2("parentNode"));f.a.each(c,function(c,b){var d=p.head(b);e.isLi(d)?a.releaseList([b]):f.a.each(b,function(a,c){f()(c).css("marginLeft",function(a,c){c=parseInt(c,10)||0;return 25<c?c-25:""})})});b.select()}},{key:"toggleList",value:function(b,a){var c=this,d=z.create(a).wrapBodyInlineWithPara(),g=d.nodes(e.isPara,{includeAncestor:!0}),l=d.paraBookmark(g),r=p.clusterBy(g,x.peq2("parentNode"));if(p.find(g,e.isPurePara)){var y=[];f.a.each(r,function(a,d){y=y.concat(c.wrapList(d,b))});g=y}else d=d.nodes(e.isList,{includeAncestor:!0}).filter(function(a){return!f.a.nodeName(a,b)}),d.length?f.a.each(d,function(a,c){e.replace(c,b)}):g=this.releaseList(r,!0);z.createFromParaBookmark(l,g).select()}},{key:"wrapList",value:function(b,a){var c=p.head(b),d=p.last(b),g=e.isList(c.previousSibling)&&c.previousSibling,c=e.isList(d.nextSibling)&&d.nextSibling,d=g||e.insertAfter(e.create(a||"UL"),d);b=b.map(function(a){return e.isPurePara(a)?e.replace(a,"LI"):a});e.appendChildNodes(d,b);c&&(e.appendChildNodes(d,p.from(c.childNodes)),e.remove(c));return b}},{key:"releaseList",value:function(b,a){var c=this,d=[];f.a.each(b,function(b,h){var l=p.head(h),g=p.last(h),k=a?e.lastAncestor(l,e.isList):l.parentNode,w=k.parentNode;if("LI"===k.parentNode.nodeName)h.map(function(a){var b=c.findNextSiblings(a);w.nextSibling?w.parentNode.insertBefore(a,w.nextSibling):w.parentNode.appendChild(a);b.length&&(c.wrapList(b,k.nodeName),a.appendChild(b[0].parentNode))}),0===k.children.length&&w.removeChild(k),0===w.childNodes.length&&w.parentNode.removeChild(w);else{g=1<k.childNodes.length?e.splitTree(k,{node:g.parentNode,offset:e.position(g)+1},{isSkipPaddingBlankHTML:!0}):null;l=e.splitTree(k,{node:l.parentNode,offset:e.position(l)},{isSkipPaddingBlankHTML:!0});h=a?e.listDescendant(l,e.isLi):p.from(l.childNodes).filter(e.isLi);if(a||!e.isList(k.parentNode))h=h.map(function(a){return e.replace(a,"P")});f.a.each(p.from(h).reverse(),function(a,c){e.insertAfter(c,k)});l=p.compact([k,l,g]);f.a.each(l,function(a,c){var b=[c].concat(e.listDescendant(c,e.isList));f.a.each(b.reverse(),function(a,c){e.nodeLength(c)||e.remove(c,!0)})})}d=d.concat(h)});return d}},{key:"appendToPrevious",value:function(b){return b.previousSibling?e.appendChildNodes(b.previousSibling,[b]):this.wrapList([b],"LI")}},{key:"findList",value:function(b){return b?p.find(b.children,function(a){return-1<["OL","UL"].indexOf(a.nodeName)}):null}},{key:"findNextSiblings",value:function(b){for(var a=[];b.nextSibling;)a.push(b.nextSibling),b=b.nextSibling;return a}}]);return d}(),ec=function(){function d(b){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.bullet=new kb;this.options=b.options}ub(d,[{key:"insertTab",value:function(b,a){var c=e.createText(Array(a+1).join(e.NBSP_CHAR));b=b.deleteContents();b.insertNode(c,!0);b=z.create(c,a);b.select()}},{key:"insertParagraph",value:function(b,a){a=a||z.create(b);a=a.deleteContents();a=a.wrapBodyInlineWithPara();var c=e.ancestor(a.sc,e.isPara),d;if(c){if(e.isLi(c)&&(e.isEmpty(c)||e.deepestChildIsEmpty(c))){this.bullet.toggleList(c.parentNode.nodeName);return}var g=null;1===this.options.blockquoteBreakingLevel?g=e.ancestor(c,e.isBlockquote):2===this.options.blockquoteBreakingLevel&&(g=e.lastAncestor(c,e.isBlockquote));g?(d=f()(e.emptyPara)[0],e.isRightEdgePoint(a.getStartPoint())&&e.isBR(a.sc.nextSibling)&&f()(a.sc.nextSibling).remove(),(c=e.splitTree(g,a.getStartPoint(),{isDiscardEmptySplits:!0}))?c.parentNode.insertBefore(d,c):e.insertAfter(d,g)):(d=e.splitTree(c,a.getStartPoint()),g=e.listDescendant(c,e.isEmptyAnchor),g=g.concat(e.listDescendant(d,e.isEmptyAnchor)),f.a.each(g,function(a,c){e.remove(c)}),(e.isHeading(d)||e.isPre(d)||e.isCustomStyleTag(d))&&e.isEmpty(d)&&(d=e.replace(d,"p")))}else g=a.sc.childNodes[a.so],d=f()(e.emptyPara)[0],g?a.sc.insertBefore(d,g):a.sc.appendChild(d);z.create(d,0).normalize().select().scrollIntoView(b)}}]);return d}(),B=function b(a,c,h,g){function l(a,c,b,h,l,g,e){b={baseRow:b,baseCell:h,isRowSpan:l,isColSpan:g,isVirtual:e};m[a]||(m[a]=[]);m[a][c]=b}function e(a,c){if(!m[a]||!m[a][c])return c;for(var b=c;m[a][b];)if(b++,!m[a][b])return b}function f(a){switch(c){case b.where.Column:if(a.isColSpan)return b.resultAction.SubtractSpanCount;break;case b.where.Row:if(!a.isVirtual&&a.isRowSpan)return b.resultAction.AddCell;if(a.isRowSpan)return b.resultAction.SubtractSpanCount}return b.resultAction.RemoveCell}function k(a){switch(c){case b.where.Column:if(a.isColSpan)return b.resultAction.SumSpanCount;if(a.isRowSpan&&a.isVirtual)return b.resultAction.Ignore;break;case b.where.Row:if(a.isRowSpan)return b.resultAction.SumSpanCount;if(a.isColSpan&&a.isVirtual)return b.resultAction.Ignore}return b.resultAction.AddCell}var w=0,p=0,m=[],n=[];this.getActionList=function(){for(var a=c===b.where.Row?p:-1,l=c===b.where.Column?w:-1,g=0;;){var e=0<=a?a:g,r=0<=l?l:g,y=m[e];if(!y)break;y=y[r];if(!y)break;var T=b.resultAction.Ignore;switch(h){case b.requestAction.Add:T=k(y);break;case b.requestAction.Delete:T=f(y)}n.push({baseCell:y.baseCell,action:T,virtualTable:{rowIndex:e,cellIndex:r}});g++}return n};a&&a.tagName&&("td"===a.tagName.toLowerCase()||"th"===a.tagName.toLowerCase())&&(w=a.cellIndex,a.parentElement&&a.parentElement.tagName&&"tr"===a.parentElement.tagName.toLowerCase()&&(p=a.parentElement.rowIndex));(function(){for(var a=g.rows,c=0;c<a.length;c++)for(var b=a[c].cells,h=0;h<b.length;h++){var f=a[c],r=b[h],y=e(f.rowIndex,r.cellIndex),k=1<r.colSpan,m=1<r.rowSpan,T=f.rowIndex===p&&r.cellIndex===w;l(f.rowIndex,y,f,r,m,k,!1);var n=r.attributes.rowSpan?parseInt(r.attributes.rowSpan.value,10):0;if(1<n)for(var q=1;q<n;q++){var jb=f.rowIndex+q;jb===p&&w>=r.cellIndex&&r.cellIndex<=y&&!T&&w++;l(jb,y,f,r,!0,k,!0)}k=r.attributes.colSpan?parseInt(r.attributes.colSpan.value,10):0;if(1<k)for(n=1;n<k;n++)q=e(f.rowIndex,y+n),f.rowIndex===p&&w>=r.cellIndex&&r.cellIndex<=q&&!T&&w++,l(f.rowIndex,q,f,r,m,!0,!0)}})()};B.where={Row:0,Column:1};B.requestAction={Add:0,Delete:1};B.resultAction={Ignore:0,SubtractSpanCount:1,RemoveCell:2,AddCell:3,SumSpanCount:4};var fc=function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");}vb(b,[{key:"tab",value:function(a,c){var b=e.ancestor(a.commonAncestor(),e.isCell),g=e.ancestor(b,e.isTable),g=e.listDescendant(g,e.isCell);(b=p[c?"prev":"next"](g,b))&&z.create(b,0).select()}},{key:"addRow",value:function(a,c){for(var b=e.ancestor(a.commonAncestor(),e.isCell),g=f()(b).closest("tr"),l=this.recoverAttributes(g),l=f()("\x3ctr"+l+"\x3e\x3c/tr\x3e"),r=(new B(b,B.where.Row,B.requestAction.Add,f()(g).closest("table")[0])).getActionList(),y=0;y<r.length;y++){var k=r[y],w=this.recoverAttributes(k.baseCell);switch(k.action){case B.resultAction.AddCell:l.append("\x3ctd"+w+"\x3e"+e.blank+"\x3c/td\x3e");break;case B.resultAction.SumSpanCount:"top"===c&&(k.baseCell.parent?k.baseCell.closest("tr").rowIndex:0)<=g[0].rowIndex?(k=f()("\x3cdiv\x3e\x3c/div\x3e").append(f()("\x3ctd"+w+"\x3e"+e.blank+"\x3c/td\x3e").removeAttr("rowspan")).html(),l.append(k)):(w=parseInt(k.baseCell.rowSpan,10),w++,k.baseCell.setAttribute("rowSpan",w))}}"top"===c?g.before(l):1<b.rowSpan?(b=g[0].rowIndex+(b.rowSpan-2),f()(f()(g).parent().find("tr")[b]).after(f()(l))):g.after(l)}},{key:"addCol",value:function(a,c){var b=e.ancestor(a.commonAncestor(),e.isCell),g=f()(b).closest("tr");f()(g).siblings().push(g);b=(new B(b,B.where.Column,B.requestAction.Add,f()(g).closest("table")[0])).getActionList();for(g=0;g<b.length;g++){var l=b[g],r=this.recoverAttributes(l.baseCell);switch(l.action){case B.resultAction.AddCell:"right"===c?f()(l.baseCell).after("\x3ctd"+r+"\x3e"+e.blank+"\x3c/td\x3e"):f()(l.baseCell).before("\x3ctd"+r+"\x3e"+e.blank+"\x3c/td\x3e");break;case B.resultAction.SumSpanCount:"right"===c?(r=parseInt(l.baseCell.colSpan,10),r++,l.baseCell.setAttribute("colSpan",r)):f()(l.baseCell).before("\x3ctd"+r+"\x3e"+e.blank+"\x3c/td\x3e")}}}},{key:"recoverAttributes",value:function(a){var c="";if(!a)return c;a=a.attributes||[];for(var b=0;b<a.length;b++)"id"!==a[b].name.toLowerCase()&&a[b].specified&&(c+=" "+a[b].name+"\x3d'"+a[b].value+"'");return c}},{key:"deleteRow",value:function(a){var c=e.ancestor(a.commonAncestor(),e.isCell);a=f()(c).closest("tr");for(var b=a.children("td, th").index(f()(c)),g=a[0].rowIndex,c=(new B(c,B.where.Row,B.requestAction.Delete,f()(a).closest("table")[0])).getActionList(),l=0;l<c.length;l++)if(c[l]){var r=c[l].baseCell,y=c[l].virtualTable,k=r.rowSpan&&1<r.rowSpan,w=k?parseInt(r.rowSpan,10):0;switch(c[l].action){case B.resultAction.Ignore:continue;case B.resultAction.AddCell:r=a.next("tr")[0];if(!r)continue;y=a[0].cells[b];k&&(2<w?(w--,r.insertBefore(y,r.cells[b]),r.cells[b].setAttribute("rowSpan",w),r.cells[b].innerHTML=""):2===w&&(r.insertBefore(y,r.cells[b]),r.cells[b].removeAttribute("rowSpan"),r.cells[b].innerHTML=""));continue;case B.resultAction.SubtractSpanCount:k&&(2<w?(w--,r.setAttribute("rowSpan",w),y.rowIndex!==g&&r.cellIndex===b&&(r.innerHTML="")):2===w&&(r.removeAttribute("rowSpan"),y.rowIndex!==g&&r.cellIndex===b&&(r.innerHTML="")))}}a.remove()}},{key:"deleteCol",value:function(a){var c=e.ancestor(a.commonAncestor(),e.isCell),b=f()(c).closest("tr");a=b.children("td, th").index(f()(c));c=(new B(c,B.where.Column,B.requestAction.Delete,f()(b).closest("table")[0])).getActionList();for(b=0;b<c.length;b++)if(c[b])switch(c[b].action){case B.resultAction.Ignore:continue;case B.resultAction.SubtractSpanCount:var g=c[b].baseCell;if(g.colSpan&&1<g.colSpan){var l=g.colSpan?parseInt(g.colSpan,10):0;2<l?(l--,g.setAttribute("colSpan",l),g.cellIndex===a&&(g.innerHTML="")):2===l&&(g.removeAttribute("colSpan"),g.cellIndex===a&&(g.innerHTML=""))}continue;case B.resultAction.RemoveCell:e.remove(c[b].baseCell,!0)}}},{key:"createTable",value:function(a,c,b){for(var h=[],l=0;l<a;l++)h.push("\x3ctd\x3e"+e.blank+"\x3c/td\x3e");a=h.join("");h=[];for(l=0;l<c;l++)h.push("\x3ctr\x3e"+a+"\x3c/tr\x3e");c=h.join("");c=f()("\x3ctable\x3e"+c+"\x3c/table\x3e");b&&b.tableClassName&&c.addClass(b.tableClassName);return c[0]}},{key:"deleteTable",value:function(a){a=e.ancestor(a.commonAncestor(),e.isCell);f()(a).closest("table").remove()}}]);return b}(),gc=function(){function b(a){var c=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.context=a;this.$note=a.layoutInfo.note;this.$editor=a.layoutInfo.editor;this.$editable=a.layoutInfo.editable;this.options=a.options;this.lang=this.options.langInfo;this.editable=this.$editable[0];this.snapshot=this.lastRange=null;this.style=new dc;this.table=new fc;this.typing=new ec(a);this.bullet=new kb;this.history=new cc(a);this.context.memo("help.escape",this.lang.help.escape);this.context.memo("help.undo",this.lang.help.undo);this.context.memo("help.redo",this.lang.help.redo);this.context.memo("help.tab",this.lang.help.tab);this.context.memo("help.untab",this.lang.help.untab);this.context.memo("help.insertParagraph",this.lang.help.insertParagraph);this.context.memo("help.insertOrderedList",this.lang.help.insertOrderedList);this.context.memo("help.insertUnorderedList",this.lang.help.insertUnorderedList);this.context.memo("help.indent",this.lang.help.indent);this.context.memo("help.outdent",this.lang.help.outdent);this.context.memo("help.formatPara",this.lang.help.formatPara);this.context.memo("help.insertHorizontalRule",this.lang.help.insertHorizontalRule);this.context.memo("help.fontName",this.lang.help.fontName);a="bold italic underline strikethrough superscript subscript justifyLeft justifyCenter justifyRight justifyFull formatBlock removeFormat backColor".split(" ");for(var h=0,g=a.length;h<g;h++)this[a[h]]=function(a){return function(b){c.beforeCommand();document.execCommand(a,!1,b);c.afterCommand(!0)}}(a[h]),this.context.memo("help."+a[h],this.lang.help[a[h]]);this.fontName=this.wrapCommand(function(a){return c.fontStyling("font-family",E.validFontName(a))});this.fontSize=this.wrapCommand(function(a){var b=c.currentStyle()["font-size-unit"];return c.fontStyling("font-size",a+b)});this.fontSizeUnit=this.wrapCommand(function(a){var b=c.currentStyle()["font-size"];return c.fontStyling("font-size",b+a)});for(a=1;6>=a;a++)this["formatH"+a]=function(a){return function(){c.formatBlock("H"+a)}}(a),this.context.memo("help.formatH"+a,this.lang.help["formatH"+a]);this.insertParagraph=this.wrapCommand(function(){c.typing.insertParagraph(c.editable)});this.insertOrderedList=this.wrapCommand(function(){c.bullet.insertOrderedList(c.editable)});this.insertUnorderedList=this.wrapCommand(function(){c.bullet.insertUnorderedList(c.editable)});this.indent=this.wrapCommand(function(){c.bullet.indent(c.editable)});this.outdent=this.wrapCommand(function(){c.bullet.outdent(c.editable)});this.insertNode=this.wrapCommand(function(a){c.isLimited(f()(a).text().length)||(c.getLastRange().insertNode(a),c.setLastRange(z.createFromNodeAfter(a).select()))});this.insertText=this.wrapCommand(function(a){c.isLimited(a.length)||(a=c.getLastRange().insertNode(e.createText(a)),c.setLastRange(z.create(a,e.nodeLength(a)).select()))});this.pasteHTML=this.wrapCommand(function(a){c.isLimited(a.length)||(a=c.context.invoke("codeview.purify",a),a=c.getLastRange().pasteHTML(a),c.setLastRange(z.createFromNodeAfter(p.last(a)).select()))});this.formatBlock=this.wrapCommand(function(a,b){var h=c.options.callbacks.onApplyCustomStyle;if(h)h.call(c,b,c.context,c.onFormatBlock);else c.onFormatBlock(a,b)});this.insertHorizontalRule=this.wrapCommand(function(){var a=c.getLastRange().insertNode(e.create("HR"));a.nextSibling&&c.setLastRange(z.create(a.nextSibling,0).normalize().select())});this.lineHeight=this.wrapCommand(function(a){c.style.stylePara(c.getLastRange(),{lineHeight:a})});this.createLink=this.wrapCommand(function(a){var b=a.url,h=a.text,g=a.isNewWindow,l=a.checkProtocol;a=a.range||c.getLastRange();var e=h.length-a.toString().length;0<e&&c.isLimited(e)||(e=a.toString()!==h,"string"===typeof b&&(b=b.trim()),c.options.onCreateLink?b=c.options.onCreateLink(b):l&&(b=/^([A-Za-z][A-Za-z0-9+-.]*\:|#|\/)/.test(b)?b:c.options.defaultProtocol+b),l=[],e?(a=a.deleteContents(),h=a.insertNode(f()("\x3cA\x3e"+h+"\x3c/A\x3e")[0]),l.push(h)):l=c.style.styleNodes(a,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0}),f.a.each(l,function(a,c){f()(c).attr("href",b);g?f()(c).attr("target","_blank"):f()(c).removeAttr("target")}),c.setLastRange(c.createRangeFromList(l).select()))});this.color=this.wrapCommand(function(a){var c=a.foreColor;a=a.backColor;c&&document.execCommand("foreColor",!1,c);a&&document.execCommand("backColor",!1,a)});this.foreColor=this.wrapCommand(function(a){document.execCommand("foreColor",!1,a)});this.insertTable=this.wrapCommand(function(a){a=a.split("x");c.getLastRange().deleteContents().insertNode(c.table.createTable(a[0],a[1],c.options))});this.removeMedia=this.wrapCommand(function(){var a=f()(c.restoreTarget()).parent();a.closest("figure").length?a.closest("figure").remove():a=f()(c.restoreTarget()).detach();c.context.triggerEvent("media.delete",a,c.$editable)});this.floatMe=this.wrapCommand(function(a){var b=f()(c.restoreTarget());b.toggleClass("note-float-left","left"===a);b.toggleClass("note-float-right","right"===a);b.css("float","none"===a?"":a)});this.resize=this.wrapCommand(function(a){var b=f()(c.restoreTarget());a=parseFloat(a);0===a?b.css("width",""):b.css({width:100*a+"%",height:""})})}wb(b,[{key:"initialize",value:function(){var a=this;this.$editable.on("keydown",function(c){c.keyCode===A.code.ENTER&&a.context.triggerEvent("enter",c);a.context.triggerEvent("keydown",c);a.snapshot=a.history.makeSnapshot();a.hasKeyShortCut=!1;c.isDefaultPrevented()||(a.options.shortcuts?a.hasKeyShortCut=a.handleKeyMap(c):a.preventDefaultEditableShortCuts(c));if(a.isLimited(1,c)&&(c=a.getLastRange(),0===c.eo-c.so))return!1;a.setLastRange();a.options.recordEveryKeystroke&&!1===a.hasKeyShortCut&&a.history.recordUndo()}).on("keyup",function(c){a.setLastRange();a.context.triggerEvent("keyup",c)}).on("focus",function(c){a.setLastRange();a.context.triggerEvent("focus",c)}).on("blur",function(c){a.context.triggerEvent("blur",c)}).on("mousedown",function(c){a.context.triggerEvent("mousedown",c)}).on("mouseup",function(c){a.setLastRange();a.history.recordUndo();a.context.triggerEvent("mouseup",c)}).on("scroll",function(c){a.context.triggerEvent("scroll",c)}).on("paste",function(c){a.setLastRange();a.context.triggerEvent("paste",c)}).on("input",function(){a.isLimited(0)&&a.snapshot&&a.history.applySnapshot(a.snapshot)});this.$editable.attr("spellcheck",this.options.spellCheck);this.$editable.attr("autocorrect",this.options.spellCheck);this.options.disableGrammar&&this.$editable.attr("data-gramm",!1);this.$editable.html(e.html(this.$note)||e.emptyPara);this.$editable.on(E.inputEventName,x.debounce(function(){a.context.triggerEvent("change",a.$editable.html(),a.$editable)},10));this.$editable.on("focusin",function(c){a.context.triggerEvent("focusin",c)}).on("focusout",function(c){a.context.triggerEvent("focusout",c)});if(this.options.airMode){if(this.options.overrideContextMenu)this.$editor.on("contextmenu",function(c){a.context.triggerEvent("contextmenu",c);return!1})}else this.options.width&&this.$editor.outerWidth(this.options.width),this.options.height&&this.$editable.outerHeight(this.options.height),this.options.maxHeight&&this.$editable.css("max-height",this.options.maxHeight),this.options.minHeight&&this.$editable.css("min-height",this.options.minHeight);this.history.recordUndo();this.setLastRange()}},{key:"destroy",value:function(){this.$editable.off()}},{key:"handleKeyMap",value:function(a){var c=this.options.keyMap[E.isMac?"mac":"pc"],b=[];a.metaKey&&b.push("CMD");a.ctrlKey&&!a.altKey&&b.push("CTRL");a.shiftKey&&b.push("SHIFT");var g=A.nameFromCode[a.keyCode];g&&b.push(g);c=c[b.join("+")];if("TAB"!==g||this.options.tabDisable)if(c){if(!1!==this.context.invoke(c))return a.preventDefault(),!0}else A.isEdit(a.keyCode)&&this.afterCommand();else this.afterCommand();return!1}},{key:"preventDefaultEditableShortCuts",value:function(a){(a.ctrlKey||a.metaKey)&&p.contains([66,73,85],a.keyCode)&&a.preventDefault()}},{key:"isLimited",value:function(a,c){a=a||0;return"undefined"!==typeof c&&(A.isMove(c.keyCode)||A.isNavigation(c.keyCode)||c.ctrlKey||c.metaKey||p.contains([A.code.BACKSPACE,A.code.DELETE],c.keyCode))?!1:0<this.options.maxTextLength&&this.$editable.text().length+a>this.options.maxTextLength?!0:!1}},{key:"createRange",value:function(){this.focus();this.setLastRange();return this.getLastRange()}},{key:"createRangeFromList",value:function(a){var c=z.createFromNodeBefore(p.head(a)).getStartPoint();a=z.createFromNodeAfter(p.last(a)).getEndPoint();return z.create(c.node,c.offset,a.node,a.offset)}},{key:"setLastRange",value:function(a){a?this.lastRange=a:(this.lastRange=z.create(this.editable),0===f()(this.lastRange.sc).closest(".note-editable").length&&(this.lastRange=z.createFromBodyElement(this.editable)))}},{key:"getLastRange",value:function(){this.lastRange||this.setLastRange();return this.lastRange}},{key:"saveRange",value:function(a){a&&this.getLastRange().collapse().select()}},{key:"restoreRange",value:function(){this.lastRange&&(this.lastRange.select(),this.focus())}},{key:"saveTarget",value:function(a){this.$editable.data("target",a)}},{key:"clearTarget",value:function(){this.$editable.removeData("target")}},{key:"restoreTarget",value:function(){return this.$editable.data("target")}},{key:"currentStyle",value:function(){var a=z.create();a&&(a=a.normalize());return a?this.style.current(a):this.style.fromNode(this.$editable)}},{key:"styleFromNode",value:function(a){return this.style.fromNode(a)}},{key:"undo",value:function(){this.context.triggerEvent("before.command",this.$editable.html());this.history.undo();this.context.triggerEvent("change",this.$editable.html(),this.$editable)}},{key:"commit",value:function(){this.context.triggerEvent("before.command",this.$editable.html());this.history.commit();this.context.triggerEvent("change",this.$editable.html(),this.$editable)}},{key:"redo",value:function(){this.context.triggerEvent("before.command",this.$editable.html());this.history.redo();this.context.triggerEvent("change",this.$editable.html(),this.$editable)}},{key:"beforeCommand",value:function(){this.context.triggerEvent("before.command",this.$editable.html());document.execCommand("styleWithCSS",!1,this.options.styleWithCSS);this.focus()}},{key:"afterCommand",value:function(a){this.normalizeContent();this.history.recordUndo();a||this.context.triggerEvent("change",this.$editable.html(),this.$editable)}},{key:"tab",value:function(){var a=this.getLastRange();if(a.isCollapsed()&&a.isOnCell())this.table.tab(a);else{if(0===this.options.tabSize)return!1;this.isLimited(this.options.tabSize)||(this.beforeCommand(),this.typing.insertTab(a,this.options.tabSize),this.afterCommand())}}},{key:"untab",value:function(){var a=this.getLastRange();if(a.isCollapsed()&&a.isOnCell())this.table.tab(a,!0);else if(0===this.options.tabSize)return!1}},{key:"wrapCommand",value:function(a){return function(){this.beforeCommand();a.apply(this,arguments);this.afterCommand()}}},{key:"insertImage",value:function(a,c){var b=this;return qb(a,c).then(function(a){b.beforeCommand();"function"===typeof c?c(a):(b.options.isImageTitle?a.attr("title",b.options.isImageTitle):"string"===typeof c&&c&&a.attr("title",c),b.options.isImageAlt?a.attr("alt",b.options.isImageAlt):"string"===typeof c&&c&&a.attr("alt",c));a.show();b.getLastRange().insertNode(a[0]);b.setLastRange(z.createFromNodeAfter(a[0]).select());b.afterCommand()}).fail(function(a){b.context.triggerEvent("image.upload.error",a)})}},{key:"insertImagesAsDataURL",value:function(a){var c=this;f.a.each(a,function(a,b){var h=b.name;c.options.maximumImageFileSize&&c.options.maximumImageFileSize<b.size?c.context.triggerEvent("image.upload.error",c.lang.image.maximumFileSizeError):pb(b).then(function(a){return c.insertImage(a,h)}).fail(function(){c.context.triggerEvent("image.upload.error")})})}},{key:"insertImagesOrCallback",value:function(a){this.options.callbacks.onImageUpload?this.context.triggerEvent("image.upload",a):this.insertImagesAsDataURL(a)}},{key:"getSelectedText",value:function(){var a=this.getLastRange();a.isOnAnchor()&&(a=z.createFromNode(e.ancestor(a.sc,e.isAnchor)));return a.toString()}},{key:"onFormatBlock",value:function(a,c){document.execCommand("FormatBlock",!1,E.isMSIE?"\x3c"+a+"\x3e":a);if(c&&c.length&&(c[0].tagName.toUpperCase()!==a.toUpperCase()&&(c=c.find(a)),c&&c.length)){var b=c[0].className||"";if(b){var g=this.createRange();f()([g.sc,g.ec]).closest(a).addClass(b)}}}},{key:"formatPara",value:function(){this.formatBlock("P")}},{key:"fontStyling",value:function(a,c){var b=this.getLastRange();if(""!==b){var g=this.style.styleNodes(b);this.$editor.find(".note-status-output").html("");f()(g).css(a,c);b.isCollapsed()?(b=p.head(g))&&!e.nodeLength(b)&&(b.innerHTML=e.ZERO_WIDTH_NBSP_CHAR,z.createFromNode(b.firstChild).select(),this.setLastRange(),this.$editable.data("bogus",b)):this.setLastRange(this.createRangeFromList(g).select())}else{var l=f.a.now();this.$editor.find(".note-status-output").html('\x3cdiv id\x3d"note-status-output-'+l+'" class\x3d"alert alert-info"\x3e'+this.lang.output.noSelection+"\x3c/div\x3e");setTimeout(function(){f()("#note-status-output-"+l).remove()},5E3)}}},{key:"unlink",value:function(){var a=this.getLastRange();a.isOnAnchor()&&(a=e.ancestor(a.sc,e.isAnchor),a=z.createFromNode(a),a.select(),this.setLastRange(),this.beforeCommand(),document.execCommand("unlink"),this.afterCommand())}},{key:"getLinkInfo",value:function(){var a=this.getLastRange().expand(e.isAnchor),c=f()(p.head(a.nodes(e.isAnchor))),a={range:a,text:a.toString(),url:c.length?c.attr("href"):""};c.length&&(a.isNewWindow="_blank"===c.attr("target"));return a}},{key:"addRow",value:function(a){var c=this.getLastRange(this.$editable);c.isCollapsed()&&c.isOnCell()&&(this.beforeCommand(),this.table.addRow(c,a),this.afterCommand())}},{key:"addCol",value:function(a){var c=this.getLastRange(this.$editable);c.isCollapsed()&&c.isOnCell()&&(this.beforeCommand(),this.table.addCol(c,a),this.afterCommand())}},{key:"deleteRow",value:function(){var a=this.getLastRange(this.$editable);a.isCollapsed()&&a.isOnCell()&&(this.beforeCommand(),this.table.deleteRow(a),this.afterCommand())}},{key:"deleteCol",value:function(){var a=this.getLastRange(this.$editable);a.isCollapsed()&&a.isOnCell()&&(this.beforeCommand(),this.table.deleteCol(a),this.afterCommand())}},{key:"deleteTable",value:function(){var a=this.getLastRange(this.$editable);a.isCollapsed()&&a.isOnCell()&&(this.beforeCommand(),this.table.deleteTable(a),this.afterCommand())}},{key:"resizeTo",value:function(a,c,b){if(b){b=a.y/a.x;var h=c.data("ratio");a={width:h>b?a.x:a.y/h,height:h>b?a.x*h:a.y}}else a={width:a.x,height:a.y};c.css(a)}},{key:"hasFocus",value:function(){return this.$editable.is(":focus")}},{key:"focus",value:function(){this.hasFocus()||this.$editable.focus()}},{key:"isEmpty",value:function(){return e.isEmpty(this.$editable[0])||e.emptyPara===this.$editable.html()}},{key:"empty",value:function(){this.context.invoke("code",e.emptyPara)}},{key:"normalizeContent",value:function(){this.$editable[0].normalize()}}]);return b}(),hc=function(){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.context=a;this.$editable=a.layoutInfo.editable}xb(b,[{key:"initialize",value:function(){this.$editable.on("paste",this.pasteByEvent.bind(this))}},{key:"pasteByEvent",value:function(a){var c=this,b=a.originalEvent.clipboardData;if(b&&b.items&&b.items.length){var g=1<b.items.length?b.items[1]:p.head(b.items);"file"===g.kind&&-1!==g.type.indexOf("image/")?(this.context.invoke("editor.insertImagesOrCallback",[g.getAsFile()]),a.preventDefault()):"string"===g.kind&&this.context.invoke("editor.isLimited",b.getData("Text").length)&&a.preventDefault()}else window.clipboardData&&(b=window.clipboardData.getData("text"),this.context.invoke("editor.isLimited",b.length)&&a.preventDefault());setTimeout(function(){c.context.invoke("editor.afterCommand")},10)}}]);return b}(),ic=function(){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.context=a;this.$eventListener=f()(document);this.$editor=a.layoutInfo.editor;this.$editable=a.layoutInfo.editable;this.options=a.options;this.lang=this.options.langInfo;this.documentEventHandlers={};this.$dropzone=f()('\x3cdiv class\x3d"note-dropzone"\x3e\x3cdiv class\x3d"note-dropzone-message"\x3e\x3c/div\x3e\x3c/div\x3e').prependTo(this.$editor)}yb(b,[{key:"initialize",value:function(){this.options.disableDragAndDrop?(this.documentEventHandlers.onDrop=function(a){a.preventDefault()},this.$eventListener=this.$dropzone,this.$eventListener.on("drop",this.documentEventHandlers.onDrop)):this.attachDragAndDropEvent()}},{key:"attachDragAndDropEvent",value:function(){var a=this,c=f()(),b=this.$dropzone.find(".note-dropzone-message");this.documentEventHandlers.onDragenter=function(h){var g=a.context.invoke("codeview.isActivated"),e=0<a.$editor.width()&&0<a.$editor.height();g||c.length||!e||(a.$editor.addClass("dragover"),a.$dropzone.width(a.$editor.width()),a.$dropzone.height(a.$editor.height()),b.text(a.lang.image.dragImageHere));c=c.add(h.target)};this.documentEventHandlers.onDragleave=function(b){c=c.not(b.target);c.length&&"BODY"!==b.target.nodeName||(c=f()(),a.$editor.removeClass("dragover"))};this.documentEventHandlers.onDrop=function(){c=f()();a.$editor.removeClass("dragover")};this.$eventListener.on("dragenter",this.documentEventHandlers.onDragenter).on("dragleave",this.documentEventHandlers.onDragleave).on("drop",this.documentEventHandlers.onDrop);this.$dropzone.on("dragenter",function(){a.$dropzone.addClass("hover");b.text(a.lang.image.dropImage)}).on("dragleave",function(){a.$dropzone.removeClass("hover");b.text(a.lang.image.dragImageHere)});this.$dropzone.on("drop",function(c){var b=c.originalEvent.dataTransfer;c.preventDefault();b&&b.files&&b.files.length?(a.$editable.focus(),a.context.invoke("editor.insertImagesOrCallback",b.files)):f.a.each(b.types,function(c,h){if(!(-1<h.toLowerCase().indexOf("_moz_"))){var e=b.getData(h);-1<h.toLowerCase().indexOf("text")?a.context.invoke("editor.pasteHTML",e):f()(e).each(function(c,b){a.context.invoke("editor.insertNode",b)})}})}).on("dragover",!1)}},{key:"destroy",value:function(){var a=this;Object.keys(this.documentEventHandlers).forEach(function(c){a.$eventListener.off(c.substr(2).toLowerCase(),a.documentEventHandlers[c])});this.documentEventHandlers={}}}]);return b}(),jc=function(){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.context=a;this.$editor=a.layoutInfo.editor;this.$editable=a.layoutInfo.editable;this.$codable=a.layoutInfo.codable;this.options=a.options;this.CodeMirrorConstructor=window.CodeMirror;this.options.codemirror.CodeMirrorConstructor&&(this.CodeMirrorConstructor=this.options.codemirror.CodeMirrorConstructor)}Bb(b,[{key:"sync",value:function(a){var c=this.isActivated(),b=this.CodeMirrorConstructor;c&&(a?b?this.$codable.data("cmEditor").getDoc().setValue(a):this.$codable.val(a):b&&this.$codable.data("cmEditor").save())}},{key:"initialize",value:function(){var a=this;this.$codable.on("keyup",function(c){c.keyCode===A.code.ESCAPE&&a.deactivate()})}},{key:"isActivated",value:function(){return this.$editor.hasClass("codeview")}},{key:"toggle",value:function(){this.isActivated()?this.deactivate():this.activate();this.context.triggerEvent("codeview.toggled")}},{key:"purify",value:function(a){if(this.options.codeviewFilter&&(a=a.replace(this.options.codeviewFilterRegex,""),this.options.codeviewIframeFilter)){var c=this.options.codeviewIframeWhitelistSrc.concat(this.options.codeviewIframeWhitelistSrcBase);a=a.replace(/(<iframe.*?>.*?(?:<\/iframe>)?)/gi,function(a){if(/<.+src(?==?('|"|\s)?)[\s\S]+src(?=('|"|\s)?)[^>]*?>/i.test(a))return"";var b=zb(c),h;try{for(b.s();!(h=b.n()).done;)if((new RegExp('src\x3d"(https?:)?//'+h.value.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")+'/(.+)"')).test(a))return a}catch(r){b.e(r)}finally{b.f()}return""})}return a}},{key:"activate",value:function(){var a=this,c=this.CodeMirrorConstructor;this.$codable.val(e.html(this.$editable,this.options.prettifyHtml));this.$codable.height(this.$editable.height());this.context.invoke("toolbar.updateCodeview",!0);this.context.invoke("airPopover.updateCodeview",!0);this.$editor.addClass("codeview");this.$codable.focus();if(c){var b=c.fromTextArea(this.$codable[0],this.options.codemirror);if(this.options.codemirror.tern){var g=new c.TernServer(this.options.codemirror.tern);b.ternServer=g;b.on("cursorActivity",function(a){g.updateArgHints(a)})}b.on("blur",function(c){a.context.triggerEvent("blur.codeview",b.getValue(),c)});b.on("change",function(){a.context.triggerEvent("change.codeview",b.getValue(),b)});b.setSize(null,this.$editable.outerHeight());this.$codable.data("cmEditor",b)}else this.$codable.on("blur",function(c){a.context.triggerEvent("blur.codeview",a.$codable.val(),c)}),this.$codable.on("input",function(){a.context.triggerEvent("change.codeview",a.$codable.val(),a.$codable)})}},{key:"deactivate",value:function(){if(this.CodeMirrorConstructor){var a=this.$codable.data("cmEditor");this.$codable.val(a.getValue());a.toTextArea()}var a=this.purify(e.value(this.$codable,this.options.prettifyHtml)||e.emptyPara),c=this.$editable.html()!==a;this.$editable.html(a);this.$editable.height(this.options.height?this.$codable.height():"auto");this.$editor.removeClass("codeview");c&&this.context.triggerEvent("change",this.$editable.html(),this.$editable);this.$editable.focus();this.context.invoke("toolbar.updateCodeview",!1);this.context.invoke("airPopover.updateCodeview",!1)}},{key:"destroy",value:function(){this.isActivated()&&this.deactivate()}}]);return b}(),kc=function(){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.$document=f()(document);this.$statusbar=a.layoutInfo.statusbar;this.$editable=a.layoutInfo.editable;this.options=a.options}Cb(b,[{key:"initialize",value:function(){var a=this;if(this.options.airMode||this.options.disableResizeEditor)this.destroy();else this.$statusbar.on("mousedown",function(c){c.preventDefault();c.stopPropagation();var b=a.$editable.offset().top-a.$document.scrollTop(),e=function(c){c=c.clientY-(b+24);c=0<a.options.minheight?Math.max(c,a.options.minheight):c;c=0<a.options.maxHeight?Math.min(c,a.options.maxHeight):c;a.$editable.height(c)};a.$document.on("mousemove",e).one("mouseup",function(){a.$document.off("mousemove",e)})})}},{key:"destroy",value:function(){this.$statusbar.off();this.$statusbar.addClass("locked")}}]);return b}(),lc=function(){function b(a){var c=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.context=a;this.$editor=a.layoutInfo.editor;this.$toolbar=a.layoutInfo.toolbar;this.$editable=a.layoutInfo.editable;this.$codable=a.layoutInfo.codable;this.$window=f()(window);this.$scrollbar=f()("html, body");this.onResize=function(){c.resizeTo({h:c.$window.height()-c.$toolbar.outerHeight()})}}Db(b,[{key:"resizeTo",value:function(a){this.$editable.css("height",a.h);this.$codable.css("height",a.h);this.$codable.data("cmeditor")&&this.$codable.data("cmeditor").setsize(null,a.h)}},{key:"toggle",value:function(){this.$editor.toggleClass("fullscreen");this.isFullscreen()?(this.$editable.data("orgHeight",this.$editable.css("height")),this.$editable.data("orgMaxHeight",this.$editable.css("maxHeight")),this.$editable.css("maxHeight",""),this.$window.on("resize",this.onResize).trigger("resize"),this.$scrollbar.css("overflow","hidden")):(this.$window.off("resize",this.onResize),this.resizeTo({h:this.$editable.data("orgHeight")}),this.$editable.css("maxHeight",this.$editable.css("orgMaxHeight")),this.$scrollbar.css("overflow","visible"));this.context.invoke("toolbar.updateFullscreen",this.isFullscreen())}},{key:"isFullscreen",value:function(){return this.$editor.hasClass("fullscreen")}}]);return b}(),mc=function(){function b(a){var c=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.context=a;this.$document=f()(document);this.$editingArea=a.layoutInfo.editingArea;this.options=a.options;this.lang=this.options.langInfo;this.events={"summernote.mousedown":function(a,b){c.update(b.target,b)&&b.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){c.update()},"summernote.disable summernote.blur":function(){c.hide()},"summernote.codeview.toggled":function(){c.update()}}}Eb(b,[{key:"initialize",value:function(){var a=this;this.$handle=f()(['\x3cdiv class\x3d"note-handle"\x3e\x3cdiv class\x3d"note-control-selection"\x3e\x3cdiv class\x3d"note-control-selection-bg"\x3e\x3c/div\x3e\x3cdiv class\x3d"note-control-holder note-control-nw"\x3e\x3c/div\x3e\x3cdiv class\x3d"note-control-holder note-control-ne"\x3e\x3c/div\x3e\x3cdiv class\x3d"note-control-holder note-control-sw"\x3e\x3c/div\x3e\x3cdiv class\x3d"',this.options.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"\x3e\x3c/div\x3e',this.options.disableResizeImage?"":'\x3cdiv class\x3d"note-control-selection-info"\x3e\x3c/div\x3e',"\x3c/div\x3e\x3c/div\x3e"].join("")).prependTo(this.$editingArea);this.$handle.on("mousedown",function(c){if(e.isControlSizing(c.target)){c.preventDefault();c.stopPropagation();var b=a.$handle.find(".note-control-selection").data("target"),g=b.offset(),l=a.$document.scrollTop(),f=function(c){a.context.invoke("editor.resizeTo",{x:c.clientX-g.left,y:c.clientY-(g.top-l)},b,!c.shiftKey);a.update(b[0],c)};a.$document.on("mousemove",f).one("mouseup",function(c){c.preventDefault();a.$document.off("mousemove",f);a.context.invoke("editor.afterCommand")});b.data("ratio")||b.data("ratio",b.height()/b.width())}});this.$handle.on("wheel",function(c){c.preventDefault();a.update()})}},{key:"destroy",value:function(){this.$handle.remove()}},{key:"update",value:function(a,c){if(this.context.isDisabled())return!1;var b=e.isImg(a),g=this.$handle.find(".note-control-selection");this.context.invoke("imagePopover.update",a,c);if(b){var l=f()(a),r=l.position(),k=r.left+parseInt(l.css("marginLeft"),10),p=r.top+parseInt(l.css("marginTop"),10),r=l.outerWidth(!1),w=l.outerHeight(!1);g.css({display:"block",left:k,top:p,width:r,height:w}).data("target",l);k=new Image;k.src=l.attr("src");l=r+"x"+w+" ("+this.lang.image.original+": "+k.width+"x"+k.height+")";g.find(".note-control-selection-info").text(l);this.context.invoke("editor.saveTarget",a)}else this.hide();return b}},{key:"hide",value:function(){this.context.invoke("editor.clearTarget");this.$handle.children().hide()}}]);return b}(),nc=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/]{2}|tel:|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i,oc=function(){function b(a){var c=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.context=a;this.options=a.options;this.events={"summernote.keyup":function(a,b){b.isDefaultPrevented()||c.handleKeyup(b)},"summernote.keydown":function(a,b){c.handleKeydown(b)}}}Fb(b,[{key:"initialize",value:function(){this.lastWordRange=null}},{key:"destroy",value:function(){this.lastWordRange=null}},{key:"replace",value:function(){if(this.lastWordRange){var a=this.lastWordRange.toString(),c=a.match(nc);c&&(c[1]||c[2])&&(c=c[1]?a:"http://"+a,a=this.options.showDomainOnlyForAutolink?a.replace(/^(?:https?:\/\/)?(?:tel?:?)?(?:mailto?:?)?(?:www\.)?/i,"").split("/")[0]:a,a=f()("\x3ca /\x3e").html(a).attr("href",c)[0],this.context.options.linkTargetBlank&&f()(a).attr("target","_blank"),this.lastWordRange.insertNode(a),this.lastWordRange=null,this.context.invoke("editor.focus"))}}},{key:"handleKeydown",value:function(a){p.contains([A.code.ENTER,A.code.SPACE],a.keyCode)&&(this.lastWordRange=this.context.invoke("editor.createRange").getWordRange())}},{key:"handleKeyup",value:function(a){p.contains([A.code.ENTER,A.code.SPACE],a.keyCode)&&this.replace()}}]);return b}(),pc=function(){function b(a){var c=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.$note=a.layoutInfo.note;this.events={"summernote.change":function(){c.$note.val(a.invoke("code"))}}}Gb(b,[{key:"shouldInitialize",value:function(){return e.isTextarea(this.$note[0])}}]);return b}(),qc=function(){function b(a){var c=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.context=a;this.options=a.options.replace||{};this.keys=[A.code.ENTER,A.code.SPACE,A.code.PERIOD,A.code.COMMA,A.code.SEMICOLON,A.code.SLASH];this.previousKeydownCode=null;this.events={"summernote.keyup":function(a,b){b.isDefaultPrevented()||c.handleKeyup(b)},"summernote.keydown":function(a,b){c.handleKeydown(b)}}}Hb(b,[{key:"shouldInitialize",value:function(){return!!this.options.match}},{key:"initialize",value:function(){this.lastWord=null}},{key:"destroy",value:function(){this.lastWord=null}},{key:"replace",value:function(){if(this.lastWord){var a=this;this.options.match(this.lastWord.toString(),function(c){if(c){var b="";"string"===typeof c?b=e.createText(c):c instanceof jQuery?b=c[0]:c instanceof Node&&(b=c);b&&(a.lastWord.insertNode(b),a.lastWord=null,a.context.invoke("editor.focus"))}})}}},{key:"handleKeydown",value:function(a){this.previousKeydownCode&&p.contains(this.keys,this.previousKeydownCode)||!p.contains(this.keys,a.keyCode)||(this.lastWord=this.context.invoke("editor.createRange").getWordRange());this.previousKeydownCode=a.keyCode}},{key:"handleKeyup",value:function(a){p.contains(this.keys,a.keyCode)&&this.replace()}}]);return b}(),rc=function(){function b(a){var c=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.context=a;this.$editingArea=a.layoutInfo.editingArea;this.options=a.options;!0===this.options.inheritPlaceholder&&(this.options.placeholder=this.context.$note.attr("placeholder")||this.options.placeholder);this.events={"summernote.init summernote.change":function(){c.update()},"summernote.codeview.toggled":function(){c.update()}}}Ib(b,[{key:"shouldInitialize",value:function(){return!!this.options.placeholder}},{key:"initialize",value:function(){var a=this;this.$placeholder=f()('\x3cdiv class\x3d"note-placeholder"\x3e');this.$placeholder.on("click",function(){a.context.invoke("focus")}).html(this.options.placeholder).prependTo(this.$editingArea);this.update()}},{key:"destroy",value:function(){this.$placeholder.remove()}},{key:"update",value:function(){var a=!this.context.invoke("codeview.isActivated")&&this.context.invoke("editor.isEmpty");this.$placeholder.toggle(a)}}]);return b}(),sc=function(){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.ui=f.a.summernote.ui;this.context=a;this.$toolbar=a.layoutInfo.toolbar;this.options=a.options;this.lang=this.options.langInfo;this.invertedKeyMap=x.invertObject(this.options.keyMap[E.isMac?"mac":"pc"])}Jb(b,[{key:"representShortcut",value:function(a){a=this.invertedKeyMap[a];if(!this.options.shortcuts||!a)return"";E.isMac&&(a=a.replace("CMD","\u2318").replace("SHIFT","\u21e7"));a=a.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]");return" ("+a+")"}},{key:"button",value:function(a){!this.options.tooltip&&a.tooltip&&delete a.tooltip;a.container=this.options.container;return this.ui.button(a)}},{key:"initialize",value:function(){this.addToolbarButtons();this.addImagePopoverButtons();this.addLinkPopoverButtons();this.addTablePopoverButtons();this.fontInstalledMap={}}},{key:"destroy",value:function(){delete this.fontInstalledMap}},{key:"isFontInstalled",value:function(a){Object.prototype.hasOwnProperty.call(this.fontInstalledMap,a)||(this.fontInstalledMap[a]=E.isFontInstalled(a)||p.contains(this.options.fontNamesIgnoreCheck,a));return this.fontInstalledMap[a]}},{key:"isFontDeservedToAdd",value:function(a){a=a.toLowerCase();return""!==a&&this.isFontInstalled(a)&&-1===E.genericFontFamilies.indexOf(a)}},{key:"colorPalette",value:function(a,c,b,e){var h=this;return this.ui.buttonGroup({className:"note-color "+a,children:[this.button({className:"note-current-color-button",contents:this.ui.icon(this.options.icons.font+" note-recent-color"),tooltip:c,click:function(a){a=f()(a.currentTarget);b&&e?h.context.invoke("editor.color",{backColor:a.attr("data-backColor"),foreColor:a.attr("data-foreColor")}):b?h.context.invoke("editor.color",{backColor:a.attr("data-backColor")}):e&&h.context.invoke("editor.color",{foreColor:a.attr("data-foreColor")})},callback:function(a){var c=a.find(".note-recent-color");b&&(c.css("background-color",h.options.colorButton.backColor),a.attr("data-backColor",h.options.colorButton.backColor));e?(c.css("color",h.options.colorButton.foreColor),a.attr("data-foreColor",h.options.colorButton.foreColor)):c.css("color","transparent")}}),this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents("",this.options),tooltip:this.lang.color.more,data:{toggle:"dropdown"}}),this.ui.dropdown({items:(b?['\x3cdiv class\x3d"note-palette"\x3e','\x3cdiv class\x3d"note-palette-title"\x3e'+this.lang.color.background+"\x3c/div\x3e",'\x3cdiv\x3e\x3cbutton type\x3d"button" class\x3d"note-color-reset btn btn-light btn-default" data-event\x3d"backColor" data-value\x3d"transparent"\x3e',this.lang.color.transparent,'\x3c/button\x3e\x3c/div\x3e\x3cdiv class\x3d"note-holder" data-event\x3d"backColor"\x3e\x3c!-- back colors --\x3e\x3c/div\x3e\x3cdiv\x3e\x3cbutton type\x3d"button" class\x3d"note-color-select btn btn-light btn-default" data-event\x3d"openPalette" data-value\x3d"backColorPicker"\x3e',this.lang.color.cpSelect,"\x3c/button\x3e",'\x3cinput type\x3d"color" id\x3d"backColorPicker" class\x3d"note-btn note-color-select-btn" value\x3d"'+this.options.colorButton.backColor+'" data-event\x3d"backColorPalette"\x3e','\x3c/div\x3e\x3cdiv class\x3d"note-holder-custom" id\x3d"backColorPalette" data-event\x3d"backColor"\x3e\x3c/div\x3e\x3c/div\x3e'].join(""):"")+(e?['\x3cdiv class\x3d"note-palette"\x3e','\x3cdiv class\x3d"note-palette-title"\x3e'+this.lang.color.foreground+"\x3c/div\x3e",'\x3cdiv\x3e\x3cbutton type\x3d"button" class\x3d"note-color-reset btn btn-light btn-default" data-event\x3d"removeFormat" data-value\x3d"foreColor"\x3e',this.lang.color.resetToDefault,'\x3c/button\x3e\x3c/div\x3e\x3cdiv class\x3d"note-holder" data-event\x3d"foreColor"\x3e\x3c!-- fore colors --\x3e\x3c/div\x3e\x3cdiv\x3e\x3cbutton type\x3d"button" class\x3d"note-color-select btn btn-light btn-default" data-event\x3d"openPalette" data-value\x3d"foreColorPicker"\x3e',this.lang.color.cpSelect,"\x3c/button\x3e",'\x3cinput type\x3d"color" id\x3d"foreColorPicker" class\x3d"note-btn note-color-select-btn" value\x3d"'+this.options.colorButton.foreColor+'" data-event\x3d"foreColorPalette"\x3e','\x3c/div\x3e\x3cdiv class\x3d"note-holder-custom" id\x3d"foreColorPalette" data-event\x3d"foreColor"\x3e\x3c/div\x3e\x3c/div\x3e'].join(""):""),callback:function(a){a.find(".note-holder").each(function(a,c){var b=f()(c);b.append(h.ui.palette({colors:h.options.colors,colorsName:h.options.colorsName,eventName:b.data("event"),container:h.options.container,tooltip:h.options.tooltip}).render())});var c=["#FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF".split(" ")];a.find(".note-holder-custom").each(function(a,b){var e=f()(b);e.append(h.ui.palette({colors:c,colorsName:c,eventName:e.data("event"),container:h.options.container,tooltip:h.options.tooltip}).render())});a.find("input[type\x3dcolor]").each(function(c,b){f()(b).change(function(){var c=a.find("#"+f()(this).data("event")).find(".note-color-btn").first(),b=this.value.toUpperCase();c.css("background-color",b).attr("aria-label",b).attr("data-value",b).attr("data-original-title",b);c.click()})})},click:function(c){c.stopPropagation();var b=f()("."+a).find(".note-dropdown-menu"),e=f()(c.target);c=e.data("event");var g=e.attr("data-value");if("openPalette"===c)c=b.find("#"+g),g=f()(b.find("#"+c.data("event")).find(".note-color-row")[0]),b=g.find(".note-color-btn").last().detach(),e=c.val(),b.css("background-color",e).attr("aria-label",e).attr("data-value",e).attr("data-original-title",e),g.prepend(b),c.click();else{if(p.contains(["backColor","foreColor"],c)){var b="backColor"===c?"background-color":"color",l=e.closest(".note-color").find(".note-recent-color"),e=e.closest(".note-color").find(".note-current-color-button");l.css(b,g);e.attr("data-"+c,g)}h.context.invoke("editor."+c,g)}}})]}).render()}},{key:"addToolbarButtons",value:function(){var a=this;this.context.memo("button.style",function(){return a.ui.buttonGroup([a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents(a.ui.icon(a.options.icons.magic),a.options),tooltip:a.lang.style.style,data:{toggle:"dropdown"}}),a.ui.dropdown({className:"dropdown-style",items:a.options.styleTags,title:a.lang.style.style,template:function(c){"string"===typeof c&&(c={tag:c,title:Object.prototype.hasOwnProperty.call(a.lang.style,c)?a.lang.style[c]:c});var b=c.tag;return"\x3c"+b+(c.style?' style\x3d"'+c.style+'" ':"")+(c.className?' class\x3d"'+c.className+'"':"")+"\x3e"+c.title+"\x3c/"+b+"\x3e"},click:a.context.createInvokeHandler("editor.formatBlock")})]).render()});for(var c=function(c,b){var e=a.options.styleTags[c];a.context.memo("button.style."+e,function(){return a.button({className:"note-btn-style-"+e,contents:'\x3cdiv data-value\x3d"'+e+'"\x3e'+e.toUpperCase()+"\x3c/div\x3e",tooltip:a.lang.style[e],click:a.context.createInvokeHandler("editor.formatBlock")}).render()})},b=0,e=this.options.styleTags.length;b<e;b++)c(b,e);this.context.memo("button.bold",function(){return a.button({className:"note-btn-bold",contents:a.ui.icon(a.options.icons.bold),tooltip:a.lang.font.bold+a.representShortcut("bold"),click:a.context.createInvokeHandlerAndUpdateState("editor.bold")}).render()});this.context.memo("button.italic",function(){return a.button({className:"note-btn-italic",contents:a.ui.icon(a.options.icons.italic),tooltip:a.lang.font.italic+a.representShortcut("italic"),click:a.context.createInvokeHandlerAndUpdateState("editor.italic")}).render()});this.context.memo("button.underline",function(){return a.button({className:"note-btn-underline",contents:a.ui.icon(a.options.icons.underline),tooltip:a.lang.font.underline+a.representShortcut("underline"),click:a.context.createInvokeHandlerAndUpdateState("editor.underline")}).render()});this.context.memo("button.clear",function(){return a.button({contents:a.ui.icon(a.options.icons.eraser),tooltip:a.lang.font.clear+a.representShortcut("removeFormat"),click:a.context.createInvokeHandler("editor.removeFormat")}).render()});this.context.memo("button.strikethrough",function(){return a.button({className:"note-btn-strikethrough",contents:a.ui.icon(a.options.icons.strikethrough),tooltip:a.lang.font.strikethrough+a.representShortcut("strikethrough"),click:a.context.createInvokeHandlerAndUpdateState("editor.strikethrough")}).render()});this.context.memo("button.superscript",function(){return a.button({className:"note-btn-superscript",contents:a.ui.icon(a.options.icons.superscript),tooltip:a.lang.font.superscript,click:a.context.createInvokeHandlerAndUpdateState("editor.superscript")}).render()});this.context.memo("button.subscript",function(){return a.button({className:"note-btn-subscript",contents:a.ui.icon(a.options.icons.subscript),tooltip:a.lang.font.subscript,click:a.context.createInvokeHandlerAndUpdateState("editor.subscript")}).render()});this.context.memo("button.fontname",function(){var c=a.context.invoke("editor.currentStyle");a.options.addDefaultFonts&&f.a.each(c["font-family"].split(","),function(c,b){b=b.trim().replace(/['"]+/g,"");a.isFontDeservedToAdd(b)&&-1===a.options.fontNames.indexOf(b)&&a.options.fontNames.push(b)});return a.ui.buttonGroup([a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents('\x3cspan class\x3d"note-current-fontname"\x3e\x3c/span\x3e',a.options),tooltip:a.lang.font.name,data:{toggle:"dropdown"}}),a.ui.dropdownCheck({className:"dropdown-fontname",checkClassName:a.options.icons.menuCheck,items:a.options.fontNames.filter(a.isFontInstalled.bind(a)),title:a.lang.font.name,template:function(a){return'\x3cspan style\x3d"font-family: '+E.validFontName(a)+'"\x3e'+a+"\x3c/span\x3e"},click:a.context.createInvokeHandlerAndUpdateState("editor.fontName")})]).render()});this.context.memo("button.fontsize",function(){return a.ui.buttonGroup([a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents('\x3cspan class\x3d"note-current-fontsize"\x3e\x3c/span\x3e',a.options),tooltip:a.lang.font.size,data:{toggle:"dropdown"}}),a.ui.dropdownCheck({className:"dropdown-fontsize",checkClassName:a.options.icons.menuCheck,items:a.options.fontSizes,title:a.lang.font.size,click:a.context.createInvokeHandlerAndUpdateState("editor.fontSize")})]).render()});this.context.memo("button.fontsizeunit",function(){return a.ui.buttonGroup([a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents('\x3cspan class\x3d"note-current-fontsizeunit"\x3e\x3c/span\x3e',a.options),tooltip:a.lang.font.sizeunit,data:{toggle:"dropdown"}}),a.ui.dropdownCheck({className:"dropdown-fontsizeunit",checkClassName:a.options.icons.menuCheck,items:a.options.fontSizeUnits,title:a.lang.font.sizeunit,click:a.context.createInvokeHandlerAndUpdateState("editor.fontSizeUnit")})]).render()});this.context.memo("button.color",function(){return a.colorPalette("note-color-all",a.lang.color.recent,!0,!0)});this.context.memo("button.forecolor",function(){return a.colorPalette("note-color-fore",a.lang.color.foreground,!1,!0)});this.context.memo("button.backcolor",function(){return a.colorPalette("note-color-back",a.lang.color.background,!0,!1)});this.context.memo("button.ul",function(){return a.button({contents:a.ui.icon(a.options.icons.unorderedlist),tooltip:a.lang.lists.unordered+a.representShortcut("insertUnorderedList"),click:a.context.createInvokeHandler("editor.insertUnorderedList")}).render()});this.context.memo("button.ol",function(){return a.button({contents:a.ui.icon(a.options.icons.orderedlist),tooltip:a.lang.lists.ordered+a.representShortcut("insertOrderedList"),click:a.context.createInvokeHandler("editor.insertOrderedList")}).render()});var l=this.button({contents:this.ui.icon(this.options.icons.alignLeft),tooltip:this.lang.paragraph.left+this.representShortcut("justifyLeft"),click:this.context.createInvokeHandler("editor.justifyLeft")}),r=this.button({contents:this.ui.icon(this.options.icons.alignCenter),tooltip:this.lang.paragraph.center+this.representShortcut("justifyCenter"),click:this.context.createInvokeHandler("editor.justifyCenter")}),k=this.button({contents:this.ui.icon(this.options.icons.alignRight),tooltip:this.lang.paragraph.right+this.representShortcut("justifyRight"),click:this.context.createInvokeHandler("editor.justifyRight")}),p=this.button({contents:this.ui.icon(this.options.icons.alignJustify),tooltip:this.lang.paragraph.justify+this.representShortcut("justifyFull"),click:this.context.createInvokeHandler("editor.justifyFull")}),m=this.button({contents:this.ui.icon(this.options.icons.outdent),tooltip:this.lang.paragraph.outdent+this.representShortcut("outdent"),click:this.context.createInvokeHandler("editor.outdent")}),n=this.button({contents:this.ui.icon(this.options.icons.indent),tooltip:this.lang.paragraph.indent+this.representShortcut("indent"),click:this.context.createInvokeHandler("editor.indent")});this.context.memo("button.justifyLeft",x.invoke(l,"render"));this.context.memo("button.justifyCenter",x.invoke(r,"render"));this.context.memo("button.justifyRight",x.invoke(k,"render"));this.context.memo("button.justifyFull",x.invoke(p,"render"));this.context.memo("button.outdent",x.invoke(m,"render"));this.context.memo("button.indent",x.invoke(n,"render"));this.context.memo("button.paragraph",function(){return a.ui.buttonGroup([a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents(a.ui.icon(a.options.icons.alignLeft),a.options),tooltip:a.lang.paragraph.paragraph,data:{toggle:"dropdown"}}),a.ui.dropdown([a.ui.buttonGroup({className:"note-align",children:[l,r,k,p]}),a.ui.buttonGroup({className:"note-list",children:[m,n]})])]).render()});this.context.memo("button.height",function(){return a.ui.buttonGroup([a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents(a.ui.icon(a.options.icons.textHeight),a.options),tooltip:a.lang.font.height,data:{toggle:"dropdown"}}),a.ui.dropdownCheck({items:a.options.lineHeights,checkClassName:a.options.icons.menuCheck,className:"dropdown-line-height",title:a.lang.font.height,click:a.context.createInvokeHandler("editor.lineHeight")})]).render()});this.context.memo("button.table",function(){return a.ui.buttonGroup([a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents(a.ui.icon(a.options.icons.table),a.options),tooltip:a.lang.table.table,data:{toggle:"dropdown"}}),a.ui.dropdown({title:a.lang.table.table,className:"note-table",items:'\x3cdiv class\x3d"note-dimension-picker"\x3e\x3cdiv class\x3d"note-dimension-picker-mousecatcher" data-event\x3d"insertTable" data-value\x3d"1x1"\x3e\x3c/div\x3e\x3cdiv class\x3d"note-dimension-picker-highlighted"\x3e\x3c/div\x3e\x3cdiv class\x3d"note-dimension-picker-unhighlighted"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"note-dimension-display"\x3e1 x 1\x3c/div\x3e'})],{callback:function(c){c.find(".note-dimension-picker-mousecatcher").css({width:a.options.insertTableMaxSize.col+"em",height:a.options.insertTableMaxSize.row+"em"}).mousedown(a.context.createInvokeHandler("editor.insertTable")).on("mousemove",a.tableMoveHandler.bind(a))}}).render()});this.context.memo("button.link",function(){return a.button({contents:a.ui.icon(a.options.icons.link),tooltip:a.lang.link.link+a.representShortcut("linkDialog.show"),click:a.context.createInvokeHandler("linkDialog.show")}).render()});this.context.memo("button.picture",function(){return a.button({contents:a.ui.icon(a.options.icons.picture),tooltip:a.lang.image.image,click:a.context.createInvokeHandler("imageDialog.show")}).render()});this.context.memo("button.video",function(){return a.button({contents:a.ui.icon(a.options.icons.video),tooltip:a.lang.video.video,click:a.context.createInvokeHandler("videoDialog.show")}).render()});this.context.memo("button.hr",function(){return a.button({contents:a.ui.icon(a.options.icons.minus),tooltip:a.lang.hr.insert+a.representShortcut("insertHorizontalRule"),click:a.context.createInvokeHandler("editor.insertHorizontalRule")}).render()});this.context.memo("button.fullscreen",function(){return a.button({className:"btn-fullscreen note-codeview-keep",contents:a.ui.icon(a.options.icons.arrowsAlt),tooltip:a.lang.options.fullscreen,click:a.context.createInvokeHandler("fullscreen.toggle")}).render()});this.context.memo("button.codeview",function(){return a.button({className:"btn-codeview note-codeview-keep",contents:a.ui.icon(a.options.icons.code),tooltip:a.lang.options.codeview,click:a.context.createInvokeHandler("codeview.toggle")}).render()});this.context.memo("button.redo",function(){return a.button({contents:a.ui.icon(a.options.icons.redo),tooltip:a.lang.history.redo+a.representShortcut("redo"),click:a.context.createInvokeHandler("editor.redo")}).render()});this.context.memo("button.undo",function(){return a.button({contents:a.ui.icon(a.options.icons.undo),tooltip:a.lang.history.undo+a.representShortcut("undo"),click:a.context.createInvokeHandler("editor.undo")}).render()});this.context.memo("button.help",function(){return a.button({contents:a.ui.icon(a.options.icons.question),tooltip:a.lang.options.help,click:a.context.createInvokeHandler("helpDialog.show")}).render()});this.context.memo("button.llvideo",function(){return a.button({contents:a.ui.icon(a.options.icons.llvideo),tooltip:a.lang.options.llvideo,click:a.context.createInvokeHandler("llvideoDialog.show")}).render()});this.context.memo("button.attach",function(){return a.button({contents:a.ui.icon(a.options.icons.attach),tooltip:a.lang.options.attach,click:a.context.createInvokeHandler("attachDialog.show")}).render()})}},{key:"addImagePopoverButtons",value:function(){var a=this;this.context.memo("button.resizeFull",function(){return a.button({contents:'\x3cspan class\x3d"note-fontsize-10"\x3e100%\x3c/span\x3e',tooltip:a.lang.image.resizeFull,click:a.context.createInvokeHandler("editor.resize","1")}).render()});this.context.memo("button.resizeHalf",function(){return a.button({contents:'\x3cspan class\x3d"note-fontsize-10"\x3e50%\x3c/span\x3e',tooltip:a.lang.image.resizeHalf,click:a.context.createInvokeHandler("editor.resize","0.5")}).render()});this.context.memo("button.resizeQuarter",function(){return a.button({contents:'\x3cspan class\x3d"note-fontsize-10"\x3e25%\x3c/span\x3e',tooltip:a.lang.image.resizeQuarter,click:a.context.createInvokeHandler("editor.resize","0.25")}).render()});this.context.memo("button.resizeNone",function(){return a.button({contents:a.ui.icon(a.options.icons.rollback),tooltip:a.lang.image.resizeNone,click:a.context.createInvokeHandler("editor.resize","0")}).render()});this.context.memo("button.floatLeft",function(){return a.button({contents:a.ui.icon(a.options.icons.floatLeft),tooltip:a.lang.image.floatLeft,click:a.context.createInvokeHandler("editor.floatMe","left")}).render()});this.context.memo("button.floatRight",function(){return a.button({contents:a.ui.icon(a.options.icons.floatRight),tooltip:a.lang.image.floatRight,click:a.context.createInvokeHandler("editor.floatMe","right")}).render()});this.context.memo("button.floatNone",function(){return a.button({contents:a.ui.icon(a.options.icons.rollback),tooltip:a.lang.image.floatNone,click:a.context.createInvokeHandler("editor.floatMe","none")}).render()});this.context.memo("button.removeMedia",function(){return a.button({contents:a.ui.icon(a.options.icons.trash),tooltip:a.lang.image.remove,click:a.context.createInvokeHandler("editor.removeMedia")}).render()})}},{key:"addLinkPopoverButtons",value:function(){var a=this;this.context.memo("button.linkDialogShow",function(){return a.button({contents:a.ui.icon(a.options.icons.link),tooltip:a.lang.link.edit,click:a.context.createInvokeHandler("linkDialog.show")}).render()});this.context.memo("button.unlink",function(){return a.button({contents:a.ui.icon(a.options.icons.unlink),tooltip:a.lang.link.unlink,click:a.context.createInvokeHandler("editor.unlink")}).render()})}},{key:"addTablePopoverButtons",value:function(){var a=this;this.context.memo("button.addRowUp",function(){return a.button({className:"btn-md",contents:a.ui.icon(a.options.icons.rowAbove),tooltip:a.lang.table.addRowAbove,click:a.context.createInvokeHandler("editor.addRow","top")}).render()});this.context.memo("button.addRowDown",function(){return a.button({className:"btn-md",contents:a.ui.icon(a.options.icons.rowBelow),tooltip:a.lang.table.addRowBelow,click:a.context.createInvokeHandler("editor.addRow","bottom")}).render()});this.context.memo("button.addColLeft",function(){return a.button({className:"btn-md",contents:a.ui.icon(a.options.icons.colBefore),tooltip:a.lang.table.addColLeft,click:a.context.createInvokeHandler("editor.addCol","left")}).render()});this.context.memo("button.addColRight",function(){return a.button({className:"btn-md",contents:a.ui.icon(a.options.icons.colAfter),tooltip:a.lang.table.addColRight,click:a.context.createInvokeHandler("editor.addCol","right")}).render()});this.context.memo("button.deleteRow",function(){return a.button({className:"btn-md",contents:a.ui.icon(a.options.icons.rowRemove),tooltip:a.lang.table.delRow,click:a.context.createInvokeHandler("editor.deleteRow")}).render()});this.context.memo("button.deleteCol",function(){return a.button({className:"btn-md",contents:a.ui.icon(a.options.icons.colRemove),tooltip:a.lang.table.delCol,click:a.context.createInvokeHandler("editor.deleteCol")}).render()});this.context.memo("button.deleteTable",function(){return a.button({className:"btn-md",contents:a.ui.icon(a.options.icons.trash),tooltip:a.lang.table.delTable,click:a.context.createInvokeHandler("editor.deleteTable")}).render()})}},{key:"build",value:function(a,c){for(var b=0,e=c.length;b<e;b++){for(var l=c[b],f=Array.isArray(l)?l[0]:l,l=Array.isArray(l)?1===l.length?[l[0]]:l[1]:[l],f=this.ui.buttonGroup({className:"note-"+f}).render(),k=0,p=l.length;k<p;k++){var m=this.context.memo("button."+l[k]);m&&f.append("function"===typeof m?m(this.context):m)}f.appendTo(a)}}},{key:"updateCurrentStyle",value:function(a){var c=this;a=a||this.$toolbar;var b=this.context.invoke("editor.currentStyle");this.updateBtnStates(a,{".note-btn-bold":function(){return"bold"===b["font-bold"]},".note-btn-italic":function(){return"italic"===b["font-italic"]},".note-btn-underline":function(){return"underline"===b["font-underline"]},".note-btn-subscript":function(){return"subscript"===b["font-subscript"]},".note-btn-superscript":function(){return"superscript"===b["font-superscript"]},".note-btn-strikethrough":function(){return"strikethrough"===b["font-strikethrough"]}});if(b["font-family"]){var e=b["font-family"].split(",").map(function(a){return a.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")}),l=p.find(e,this.isFontInstalled.bind(this));a.find(".dropdown-fontname a").each(function(a,c){var b=f()(c),e=b.data("value")+""===l+"";b.toggleClass("checked",e)});a.find(".note-current-fontname").text(l).css("font-family",l)}if(b["font-size"]){var k=b["font-size"];a.find(".dropdown-fontsize a").each(function(a,c){var b=f()(c),e=b.data("value")+""===k+"";b.toggleClass("checked",e)});a.find(".note-current-fontsize").text(k);var m=b["font-size-unit"];a.find(".dropdown-fontsizeunit a").each(function(a,c){var b=f()(c),e=b.data("value")+""===m+"";b.toggleClass("checked",e)});a.find(".note-current-fontsizeunit").text(m)}if(b["line-height"]){var n=b["line-height"];a.find(".dropdown-line-height li a").each(function(a,b){var e=f()(b).data("value")+""===n+"";c.className=e?"checked":""})}}},{key:"updateBtnStates",value:function(a,c){var b=this;f.a.each(c,function(c,e){b.ui.toggleBtnActive(a.find(c),e())})}},{key:"tableMoveHandler",value:function(a){var c,b=f()(a.target.parentNode),e=b.next(),l=b.find(".note-dimension-picker-mousecatcher"),k=b.find(".note-dimension-picker-highlighted"),b=b.find(".note-dimension-picker-unhighlighted");if(void 0===a.offsetX){var p=f()(a.target).offset();c=a.pageX-p.left;a=a.pageY-p.top}else c=a.offsetX,a=a.offsetY;c=Math.ceil(c/18)||1;a=Math.ceil(a/18)||1;k.css({width:c+"em",height:a+"em"});l.data("value",c+"x"+a);3<c&&c<this.options.insertTableMaxSize.col&&b.css({width:c+1+"em"});3<a&&a<this.options.insertTableMaxSize.row&&b.css({height:a+1+"em"});e.html(c+" x "+a)}}]);return b}(),tc=function(){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.context=a;this.$window=f()(window);this.$document=f()(document);this.ui=f.a.summernote.ui;this.$note=a.layoutInfo.note;this.$editor=a.layoutInfo.editor;this.$toolbar=a.layoutInfo.toolbar;this.$editable=a.layoutInfo.editable;this.$statusbar=a.layoutInfo.statusbar;this.options=a.options;this.isFollowing=!1;this.followScroll=this.followScroll.bind(this)}Kb(b,[{key:"shouldInitialize",value:function(){return!this.options.airMode}},{key:"initialize",value:function(){var a=this;this.options.toolbar=this.options.toolbar||[];this.options.toolbar.length?this.context.invoke("buttons.build",this.$toolbar,this.options.toolbar):this.$toolbar.hide();this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer);this.changeContainer(!1);this.$note.on("summernote.keyup summernote.mouseup summernote.change",function(){a.context.invoke("buttons.updateCurrentStyle")});this.context.invoke("buttons.updateCurrentStyle");if(this.options.followingToolbar)this.$window.on("scroll resize",this.followScroll)}},{key:"destroy",value:function(){this.$toolbar.children().remove();this.options.followingToolbar&&this.$window.off("scroll resize",this.followScroll)}},{key:"followScroll",value:function(){if(this.$editor.hasClass("fullscreen"))return!1;var a=this.$editor.outerHeight(),c=this.$editor.width(),b=this.$toolbar.height(),e=this.$statusbar.height(),l=0;this.options.otherStaticBar&&(l=f()(this.options.otherStaticBar).outerHeight());var k=this.$document.scrollTop(),p=this.$editor.offset().top,m=p-l,a=p+a-l-b-e;!this.isFollowing&&k>m&&k<a-b?(this.isFollowing=!0,this.$editable.css({marginTop:this.$toolbar.outerHeight()}),this.$toolbar.css({position:"fixed",top:l,width:c,zIndex:1E3})):this.isFollowing&&(k<m||k>a)&&(this.isFollowing=!1,this.$toolbar.css({position:"relative",top:0,width:"100%",zIndex:"auto"}),this.$editable.css({marginTop:""}))}},{key:"changeContainer",value:function(a){a?this.$toolbar.prependTo(this.$editor):this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer);this.options.followingToolbar&&this.followScroll()}},{key:"updateFullscreen",value:function(a){this.ui.toggleBtnActive(this.$toolbar.find(".btn-fullscreen"),a);this.changeContainer(a)}},{key:"updateCodeview",value:function(a){this.ui.toggleBtnActive(this.$toolbar.find(".btn-codeview"),a);a?this.deactivate():this.activate()}},{key:"activate",value:function(a){var c=this.$toolbar.find("button");a||(c=c.not(".note-codeview-keep"));this.ui.toggleBtn(c,!0)}},{key:"deactivate",value:function(a){var c=this.$toolbar.find("button");a||(c=c.not(".note-codeview-keep"));this.ui.toggleBtn(c,!1)}}]);return b}(),uc=function(){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.context=a;this.ui=f.a.summernote.ui;this.$body=f()(document.body);this.$editor=a.layoutInfo.editor;this.options=a.options;this.lang=this.options.langInfo;a.memo("help.linkDialog.show",this.options.langInfo.help["linkDialog.show"])}Lb(b,[{key:"initialize",value:function(){var a=this.options.dialogsInBody?this.$body:this.options.container,c=['\x3cdiv class\x3d"form-group note-form-group"\x3e','\x3clabel for\x3d"note-dialog-link-txt-'.concat(this.options.id,'" class\x3d"note-form-label"\x3e').concat(this.lang.link.textToDisplay,"\x3c/label\x3e"),'\x3cinput id\x3d"note-dialog-link-txt-'.concat(this.options.id,'" class\x3d"note-link-text form-control note-form-control note-input" type\x3d"text"/\x3e'),'\x3c/div\x3e\x3cdiv class\x3d"form-group note-form-group"\x3e','\x3clabel for\x3d"note-dialog-link-url-'.concat(this.options.id,'" class\x3d"note-form-label"\x3e').concat(this.lang.link.url,"\x3c/label\x3e"),'\x3cinput id\x3d"note-dialog-link-url-'.concat(this.options.id,'" class\x3d"note-link-url form-control note-form-control note-input" type\x3d"text" value\x3d"http://"/\x3e'),"\x3c/div\x3e",this.options.disableLinkTarget?"":f()("\x3cdiv/\x3e").append(this.ui.checkbox({className:"sn-checkbox-open-in-new-window",text:this.lang.link.openInNewWindow,checked:!0}).render()).html(),f()("\x3cdiv/\x3e").append(this.ui.checkbox({className:"sn-checkbox-use-protocol hide",text:this.lang.link.useProtocol,checked:!0}).render()).html()].join(""),b='\x3cinput type\x3d"button" href\x3d"#" class\x3d"'.concat("btn btn-primary note-btn note-btn-primary note-link-btn",'" value\x3d"').concat(this.lang.link.insert,'" disabled\x3e');this.$dialog=this.ui.dialog({className:"link-dialog",title:this.lang.link.insert,fade:this.options.dialogsFade,body:c,footer:b}).render().appendTo(a)}},{key:"destroy",value:function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()}},{key:"bindEnterKey",value:function(a,b){a.on("keypress",function(a){a.keyCode===A.code.ENTER&&(a.preventDefault(),b.trigger("click"))})}},{key:"toggleLinkBtn",value:function(a,b,e){this.ui.toggleBtn(a,b.val()&&e.val())}},{key:"showLinkDialog",value:function(a){var b=this;return f.a.Deferred(function(c){var e=b.$dialog.find(".note-link-text"),h=b.$dialog.find(".note-link-url"),f=b.$dialog.find(".note-link-btn"),k=b.$dialog.find(".sn-checkbox-open-in-new-window input[type\x3dcheckbox]"),p=b.$dialog.find(".sn-checkbox-use-protocol input[type\x3dcheckbox]");b.ui.onDialogShown(b.$dialog,function(){b.context.triggerEvent("dialog.shown");!a.url&&x.isValidUrl(a.text)&&(a.url=a.text);e.on("input paste propertychange",function(){a.text=e.val();b.toggleLinkBtn(f,e,h)}).val(a.text);h.on("input paste propertychange",function(){a.text||e.val(h.val());b.toggleLinkBtn(f,e,h)}).val(a.url);E.isSupportTouch||h.trigger("focus");b.toggleLinkBtn(f,e,h);b.bindEnterKey(h,f);b.bindEnterKey(e,f);k.prop("checked",void 0!==a.isNewWindow?a.isNewWindow:b.context.options.linkTargetBlank);p.prop("checked",a.url?!1:b.context.options.useProtocol);f.one("click",function(g){g.preventDefault();c.resolve({range:a.range,url:h.val(),text:e.val(),isNewWindow:k.is(":checked"),checkProtocol:p.is(":checked")});b.ui.hideDialog(b.$dialog)})});b.ui.onDialogHidden(b.$dialog,function(){e.off();h.off();f.off();"pending"===c.state()&&c.reject()});b.ui.showDialog(b.$dialog)}).promise()}},{key:"show",value:function(){var a=this,b=this.context.invoke("editor.getLinkInfo");this.context.invoke("editor.saveRange");this.showLinkDialog(b).then(function(b){a.context.invoke("editor.restoreRange");a.context.invoke("editor.createLink",b)}).fail(function(){a.context.invoke("editor.restoreRange")})}}]);return b}(),vc=function(){function b(a){var c=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.context=a;this.ui=f.a.summernote.ui;this.options=a.options;this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){c.update()},"summernote.disable summernote.dialog.shown summernote.blur":function(){c.hide()}}}Mb(b,[{key:"shouldInitialize",value:function(){return!p.isEmpty(this.options.popover.link)}},{key:"initialize",value:function(){this.$popover=this.ui.popover({className:"note-link-popover",callback:function(a){a.find(".popover-content,.note-popover-content").prepend('\x3cspan\x3e\x3ca target\x3d"_blank"\x3e\x3c/a\x3e\x26nbsp;\x3c/span\x3e')}}).render().appendTo(this.options.container);var a=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",a,this.options.popover.link);this.$popover.on("mousedown",function(a){a.preventDefault()})}},{key:"destroy",value:function(){this.$popover.remove()}},{key:"update",value:function(){if(this.context.invoke("editor.hasFocus")){var a=this.context.invoke("editor.getLastRange");if(a.isCollapsed()&&a.isOnAnchor()){var a=e.ancestor(a.sc,e.isAnchor),b=f()(a).attr("href");this.$popover.find("a").attr("href",b).text(b);a=e.posFromPlaceholder(a);b=f()(this.options.container).offset();a.top-=b.top;a.left-=b.left;this.$popover.css({display:"block",left:a.left,top:a.top})}else this.hide()}else this.hide()}},{key:"hide",value:function(){this.$popover.hide()}}]);return b}(),wc=function(){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.context=a;this.ui=f.a.summernote.ui;this.$body=f()(document.body);this.$editor=a.layoutInfo.editor;this.options=a.options;this.lang=this.options.langInfo}Nb(b,[{key:"initialize",value:function(){var a="";if(this.options.maximumImageFileSize)var b=Math.floor(Math.log(this.options.maximumImageFileSize)/Math.log(1024)),b=1*(this.options.maximumImageFileSize/Math.pow(1024,b)).toFixed(2)+" "+" KMGTP"[b]+"B",a="\x3csmall\x3e".concat(this.lang.image.maximumFileSize+" : "+b,"\x3c/small\x3e");var b=this.options.dialogsInBody?this.$body:this.options.container,a=['\x3cdiv class\x3d"form-group note-form-group note-group-select-from-files"\x3e','\x3clabel for\x3d"note-dialog-image-file-'+this.options.id+'" class\x3d"note-form-label btn blue btn-sm fileinput-button"\x3e'+this.lang.image.selectFromFiles+"",'\x3cinput id\x3d"note-dialog-image-file-'+this.options.id+'" class\x3d"note-image-input form-control-file note-form-control note-input hide" ',' type\x3d"file" name\x3d"files" accept\x3d"image/*" multiple\x3d"multiple"/\x3e\x3c/label\x3e',a,'\x3c/div\x3e\x3cdiv class\x3d"form-group note-group-image-url"\x3e','\x3clabel for\x3d"note-dialog-image-url-'+this.options.id+'" class\x3d"note-form-label"\x3e'+this.lang.image.url+"\x3c/label\x3e",'\x3cinput id\x3d"note-dialog-image-url-'+this.options.id+'" class\x3d"note-image-url form-control note-form-control note-input" type\x3d"text"/\x3e',"\x3c/div\x3e"].join(""),e='\x3cinput type\x3d"button" href\x3d"#" class\x3d"'.concat("btn btn-primary note-btn note-btn-primary note-image-btn",'" value\x3d"').concat(this.lang.image.insert,'" disabled\x3e');this.$dialog=this.ui.dialog({title:this.lang.image.insert,fade:this.options.dialogsFade,body:a,footer:e}).render().appendTo(b)}},{key:"destroy",value:function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()}},{key:"bindEnterKey",value:function(a,b){a.on("keypress",function(a){a.keyCode===A.code.ENTER&&(a.preventDefault(),b.trigger("click"))})}},{key:"show",value:function(){var a=this;this.context.invoke("editor.saveRange");this.showImageDialog().then(function(b){a.ui.hideDialog(a.$dialog);a.context.invoke("editor.restoreRange");"string"===typeof b?a.options.callbacks.onImageLinkInsert?a.context.triggerEvent("image.link.insert",b):a.context.invoke("editor.insertImage",b):a.context.invoke("editor.insertImagesOrCallback",b)}).fail(function(){a.context.invoke("editor.restoreRange")})}},{key:"showImageDialog",value:function(){var a=this;return f.a.Deferred(function(b){var c=a.$dialog.find(".note-image-input"),e=a.$dialog.find(".note-image-url"),f=a.$dialog.find(".note-image-btn");a.ui.onDialogShown(a.$dialog,function(){a.context.triggerEvent("dialog.shown");c.replaceWith(c.clone().on("change",function(a){b.resolve(a.target.files||a.target.value)}).val(""));e.on("input paste propertychange",function(){a.ui.toggleBtn(f,e.val())}).val("");E.isSupportTouch||e.trigger("focus");f.click(function(a){a.preventDefault();b.resolve(e.val())});a.bindEnterKey(e,f)});a.ui.onDialogHidden(a.$dialog,function(){c.off();e.off();f.off();"pending"===b.state()&&b.reject()});a.ui.showDialog(a.$dialog)})}}]);return b}(),xc=function(){function b(a){var c=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.context=a;this.ui=f.a.summernote.ui;this.editable=a.layoutInfo.editable[0];this.options=a.options;this.events={"summernote.disable summernote.blur":function(){c.hide()}}}Ob(b,[{key:"shouldInitialize",value:function(){return!p.isEmpty(this.options.popover.image)}},{key:"initialize",value:function(){this.$popover=this.ui.popover({className:"note-image-popover"}).render().appendTo(this.options.container);var a=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",a,this.options.popover.image);this.$popover.on("mousedown",function(a){a.preventDefault()})}},{key:"destroy",value:function(){this.$popover.remove()}},{key:"update",value:function(a,b){if(e.isImg(a)){var c=f()(a).offset(),g=f()(this.options.container).offset(),l={};this.options.popatmouse?(l.left=b.pageX-20,l.top=b.pageY):l=c;l.top-=g.top;l.left-=g.left;this.$popover.css({display:"block",left:l.left,top:l.top})}else this.hide()}},{key:"hide",value:function(){this.$popover.hide()}}]);return b}(),yc=function(){function b(a){var c=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.context=a;this.ui=f.a.summernote.ui;this.options=a.options;this.events={"summernote.mousedown":function(a,b){c.update(b.target)},"summernote.keyup summernote.scroll summernote.change":function(){c.update()},"summernote.disable summernote.blur":function(){c.hide()}}}Pb(b,[{key:"shouldInitialize",value:function(){return!p.isEmpty(this.options.popover.table)}},{key:"initialize",value:function(){this.$popover=this.ui.popover({className:"note-table-popover"}).render().appendTo(this.options.container);var a=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",a,this.options.popover.table);E.isFF&&document.execCommand("enableInlineTableEditing",!1,!1);this.$popover.on("mousedown",function(a){a.preventDefault()})}},{key:"destroy",value:function(){this.$popover.remove()}},{key:"update",value:function(a){if(this.context.isDisabled())return!1;var b=e.isCell(a);if(b){a=e.posFromPlaceholder(a);var h=f()(this.options.container).offset();a.top-=h.top;a.left-=h.left;this.$popover.css({display:"block",left:a.left,top:a.top})}else this.hide();return b}},{key:"hide",value:function(){this.$popover.hide()}}]);return b}(),zc=function(){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.context=a;this.ui=f.a.summernote.ui;this.$body=f()(document.body);this.$editor=a.layoutInfo.editor;this.options=a.options;this.lang=this.options.langInfo}Qb(b,[{key:"initialize",value:function(){var a=this.options.dialogsInBody?this.$body:this.options.container,b=['\x3cdiv class\x3d"form-group note-form-group row-fluid"\x3e','\x3clabel for\x3d"note-dialog-video-url-'.concat(this.options.id,'" class\x3d"note-form-label"\x3e').concat(this.lang.video.url,' \x3csmall class\x3d"text-muted"\x3e').concat(this.lang.video.providers,"\x3c/small\x3e\x3c/label\x3e"),'\x3cinput id\x3d"note-dialog-video-url-'.concat(this.options.id,'" class\x3d"note-video-url form-control note-form-control note-input" type\x3d"text"/\x3e'),"\x3c/div\x3e"].join(""),e='\x3cinput type\x3d"button" href\x3d"#" class\x3d"'.concat("btn btn-primary note-btn note-btn-primary note-video-btn",'" value\x3d"').concat(this.lang.video.insert,'" disabled\x3e');this.$dialog=this.ui.dialog({title:this.lang.video.insert,fade:this.options.dialogsFade,body:b,footer:e}).render().appendTo(a)}},{key:"destroy",value:function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()}},{key:"bindEnterKey",value:function(a,b){a.on("keypress",function(a){a.keyCode===A.code.ENTER&&(a.preventDefault(),b.trigger("click"))})}},{key:"createVideoNode",value:function(a){var b=/^(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?$/,e=a.match(/\/\/(?:(?:www|m)\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?$/),g=a.match(/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/),l=a.match(/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/),k=a.match(/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*(\d+)[?]?.*/),p=a.match(/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/),m=a.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),n=a.match(/\/\/v\.qq\.com.*?vid=(.+)/),q=a.match(/\/\/v\.qq\.com\/x?\/?(page|cover).*?\/([^\/]+)\.html\??.*/),t=a.match(/^.+.(mp4|m4v)$/),v=a.match(/^.+.(ogg|ogv)$/),O=a.match(/^.+.(webm)$/),u=a.match(/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/);if(e&&11===e[1].length){a=e[1];g=0;if("undefined"!==typeof e[2]&&(b=e[2].match(b)))for(e=[3600,60,1],l=0,k=e.length;l<k;l++)g+="undefined"!==typeof b[l+1]?e[l]*parseInt(b[l+1],10):0;b=f()("\x3ciframe\x3e").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+a+(0<g?"?start\x3d"+g:"")).attr("width","640").attr("height","360")}else if(g&&g[0].length)b=f()("\x3ciframe\x3e").attr("frameborder",0).attr("src","https://instagram.com/p/"+g[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(l&&l[0].length)b=f()("\x3ciframe\x3e").attr("frameborder",0).attr("src",l[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(k&&k[3].length)b=f()("\x3ciframe webkitallowfullscreen mozallowfullscreen allowfullscreen\x3e").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+k[3]).attr("width","640").attr("height","360");else if(p&&p[2].length)b=f()("\x3ciframe\x3e").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+p[2]).attr("width","640").attr("height","360");else if(m&&m[1].length)b=f()("\x3ciframe webkitallowfullscreen mozallowfullscreen allowfullscreen\x3e").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+m[1]);else if(n&&n[1].length||q&&q[2].length)b=n&&n[1].length?n[1]:q[2],b=f()("\x3ciframe webkitallowfullscreen mozallowfullscreen allowfullscreen\x3e").attr("frameborder",0).attr("height","310").attr("width","500").attr("src","https://v.qq.com/txp/iframe/player.html?vid\x3d"+b+"\x26amp;auto\x3d0");else if(t||v||O)b=f()("\x3cvideo controls\x3e").attr("src",a).attr("width","640").attr("height","360");else if(u&&u[0].length)b=f()("\x3ciframe\x3e").attr("frameborder",0).attr("src","https://www.facebook.com/plugins/video.php?href\x3d"+encodeURIComponent(u[0])+"\x26show_text\x3d0\x26width\x3d560").attr("width","560").attr("height","301").attr("scrolling","no").attr("allowtransparency","true");else return!1;b.addClass("note-video-clip");return b[0]}},{key:"show",value:function(){var a=this,b=this.context.invoke("editor.getSelectedText");this.context.invoke("editor.saveRange");this.showVideoDialog(b).then(function(b){a.ui.hideDialog(a.$dialog);a.context.invoke("editor.restoreRange");(b=a.createVideoNode(b))&&a.context.invoke("editor.insertNode",b)}).fail(function(){a.context.invoke("editor.restoreRange")})}},{key:"showVideoDialog",value:function(){var a=this;return f.a.Deferred(function(b){var c=a.$dialog.find(".note-video-url"),e=a.$dialog.find(".note-video-btn");a.ui.onDialogShown(a.$dialog,function(){a.context.triggerEvent("dialog.shown");c.on("input paste propertychange",function(){a.ui.toggleBtn(e,c.val())});E.isSupportTouch||c.trigger("focus");e.click(function(a){a.preventDefault();b.resolve(c.val())});a.bindEnterKey(c,e)});a.ui.onDialogHidden(a.$dialog,function(){c.off();e.off();"pending"===b.state()&&b.reject()});a.ui.showDialog(a.$dialog)})}}]);return b}(),Ac=function(){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.context=a;this.ui=f.a.summernote.ui;this.$body=f()(document.body);this.$editor=a.layoutInfo.editor;this.options=a.options;this.lang=this.options.langInfo}Rb(b,[{key:"initialize",value:function(){}},{key:"destroy",value:function(){}},{key:"createShortcutList",value:function(){}},{key:"showLlvideoDialog",value:function(){}},{key:"show",value:function(){var a=this,b=a.options.llVideoUrl+"\x26ct\x3d0\x26rand\x3d"+Math.random();layer.open({type:2,title:'\x3ci class\x3d"fa fa-folder-open"\x3e\x3c/i\x3e',fix:!0,scrollbar:!1,shadeClose:!0,shade:0,area:[a.options.isMobileWidth,"80%"],btn:[dr_lang("\u786e\u5b9a")],yes:function(c,e){var f=layer.getChildFrame("body",c),g=layer.load(2,{time:1E7});$.ajax({type:"POST",dataType:"json",url:b,data:$(f).find("#myform").serialize(),success:function(b){layer.close(g);if(1==b.code){layer.close(c);for(var e in b.data.result){var f=b.data.result[e];void 0!=f.id&&"undefined"!=f.id&&a.context.invoke("editor.pasteHTML",'\x3cvideo xunruicmsattachid\x3d"'+f.id+'" controls\x3d"" src\x3d"'+f.url+'" width\x3d"640" height\x3d"360" class\x3d"note-video-clip"\x3e\x3c/video\x3e\n\t')}dr_tips(1,b.msg)}else dr_tips(0,b.msg);return!1}});return!1},success:function(a,b){var c=layer.getChildFrame("body",b),c=$(c).html();if(0<c.indexOf('"code":0')&&150>c.length){var e=JSON.parse(c);layer.close(b);dr_tips(0,e.msg)}0<c.indexOf('"code":1')&&150>c.length&&(e=JSON.parse(c),layer.close(b),dr_tips(1,e.msg))},content:b+"\x26is_ajax\x3d1"})}}]);return b}(),Bc=function(){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.context=a;this.ui=f.a.summernote.ui;this.$body=f()(document.body);this.$editor=a.layoutInfo.editor;this.options=a.options;this.lang=this.options.langInfo}Sb(b,[{key:"initialize",value:function(){}},{key:"destroy",value:function(){}},{key:"createShortcutList",value:function(){}},{key:"showAttachDialog",value:function(){}},{key:"show",value:function(){var a=this,b=a.options.attachUrl+"\x26ct\x3d0\x26rand\x3d"+Math.random();layer.open({type:2,title:'\x3ci class\x3d"fa fa-folder-open"\x3e\x3c/i\x3e',fix:!0,scrollbar:!1,shadeClose:!0,shade:0,area:[a.options.isMobileWidth,"80%"],btn:[dr_lang("\u786e\u5b9a")],yes:function(c,e){var f=layer.getChildFrame("body",c),g=layer.load(2,{time:1E7});$.ajax({type:"POST",dataType:"json",url:b,data:$(f).find("#myform").serialize(),success:function(b){layer.close(g);if(1==b.code){layer.close(c);for(var e in b.data.result){var f=b.data.result[e];void 0!=f.id&&"undefined"!=f.id&&a.context.invoke("editor.pasteHTML",'\x3ca xunruicmsattachid\x3d"'+f.id+'" href\x3d"'+f.url+'" target\x3d"_blank"\x3e'+f.name+"\x3c/a\x3e\n\t")}dr_tips(1,b.msg)}else dr_tips(0,b.msg);return!1}});return!1},success:function(a,b){var c=layer.getChildFrame("body",b),c=$(c).html();if(0<c.indexOf('"code":0')&&150>c.length){var e=JSON.parse(c);layer.close(b);dr_tips(0,e.msg)}0<c.indexOf('"code":1')&&150>c.length&&(e=JSON.parse(c),layer.close(b),dr_tips(1,e.msg))},content:b+"\x26is_ajax\x3d1"})}}]);return b}(),Cc=function(){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.context=a;this.ui=f.a.summernote.ui;this.$body=f()(document.body);this.$editor=a.layoutInfo.editor;this.options=a.options;this.lang=this.options.langInfo}Tb(b,[{key:"initialize",value:function(){}},{key:"destroy",value:function(){}},{key:"createShortcutList",value:function(){}},{key:"showHelpDialog",value:function(){}},{key:"show",value:function(){var a=this,b=a.options.llImageUrl+"\x26ct\x3d0\x26rand\x3d"+Math.random();layer.open({type:2,title:'\x3ci class\x3d"fa fa-folder-open"\x3e\x3c/i\x3e',fix:!0,scrollbar:!1,shadeClose:!0,shade:0,area:[a.options.isMobileWidth,"80%"],btn:[dr_lang("\u786e\u5b9a")],yes:function(c,e){var f=layer.getChildFrame("body",c),g=layer.load(2,{time:1E7});$.ajax({type:"POST",dataType:"json",url:b,data:$(f).find("#myform").serialize(),success:function(b){layer.close(g);if(1==b.code){layer.close(c);for(var e in b.data.result){var f=b.data.result[e];if(void 0!=f.id&&"undefined"!=f.id){var h='\x3cimg xunruicmsattachid\x3d"'+f.id+'"';a.options.isImageTitle?h+=' title\x3d"'+a.options.isImageTitle+'"':f.name&&(h+=' title\x3d"'+f.name+'"');a.options.isImageAlt?h+=' alt\x3d"'+a.options.isImageTitle+'"':f.name&&(h+=' alt\x3d"'+f.name+'"');h+=' src\x3d"'+f.url+'"\x3e\n\t';a.context.invoke("editor.pasteHTML",h)}}dr_tips(1,b.msg)}else dr_tips(0,b.msg);return!1}});return!1},success:function(a,b){var c=layer.getChildFrame("body",b),c=$(c).html();if(0<c.indexOf('"code":0')&&150>c.length){var e=JSON.parse(c);layer.close(b);dr_tips(0,e.msg)}0<c.indexOf('"code":1')&&150>c.length&&(e=JSON.parse(c),layer.close(b),dr_tips(1,e.msg))},content:b+"\x26is_ajax\x3d1"})}}]);return b}(),Dc=function(){function b(a){var c=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.context=a;this.ui=f.a.summernote.ui;this.options=a.options;this.hidable=!0;this.onContextmenu=!1;this.pageY=this.pageX=null;this.events={"summernote.contextmenu":function(a){c.options.editing&&(a.preventDefault(),a.stopPropagation(),c.onContextmenu=!0,c.update(!0))},"summernote.mousedown":function(a,b){c.pageX=b.pageX;c.pageY=b.pageY},"summernote.keyup summernote.mouseup summernote.scroll":function(a,b){c.options.editing&&!c.onContextmenu&&(c.pageX=b.pageX,c.pageY=b.pageY,c.update());c.onContextmenu=!1},"summernote.disable summernote.change summernote.dialog.shown summernote.blur":function(){c.hide()},"summernote.focusout":function(){c.$popover.is(":active,:focus")||c.hide()}}}Ub(b,[{key:"shouldInitialize",value:function(){return this.options.airMode&&!p.isEmpty(this.options.popover.air)}},{key:"initialize",value:function(){var a=this;this.$popover=this.ui.popover({className:"note-air-popover"}).render().appendTo(this.options.container);var b=this.$popover.find(".popover-content");this.context.invoke("buttons.build",b,this.options.popover.air);this.$popover.on("mousedown",function(){a.hidable=!1});this.$popover.on("mouseup",function(){a.hidable=!0})}},{key:"destroy",value:function(){this.$popover.remove()}},{key:"update",value:function(a){var b=this.context.invoke("editor.currentStyle");if(!b.range||b.range.isCollapsed()&&!a)this.hide();else{a=this.pageX;var b=this.pageY,e=f()(this.options.container).offset(),b=b-e.top;a-=e.left;this.$popover.css({display:"block",left:Math.max(a,0)+-5,top:b+5});this.context.invoke("buttons.updateCurrentStyle",this.$popover)}}},{key:"updateCodeview",value:function(a){this.ui.toggleBtnActive(this.$popover.find(".btn-codeview"),a);a&&this.hide()}},{key:"hide",value:function(){this.hidable&&this.$popover.hide()}}]);return b}(),Ec=function(){function b(a){var c=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.context=a;this.ui=f.a.summernote.ui;this.$editable=a.layoutInfo.editable;this.options=a.options;this.hint=this.options.hint||[];this.direction=this.options.hintDirection||"bottom";this.hints=Array.isArray(this.hint)?this.hint:[this.hint];this.events={"summernote.keyup":function(a,b){b.isDefaultPrevented()||c.handleKeyup(b)},"summernote.keydown":function(a,b){c.handleKeydown(b)},"summernote.disable summernote.dialog.shown summernote.blur":function(){c.hide()}}}Vb(b,[{key:"shouldInitialize",value:function(){return 0<this.hints.length}},{key:"initialize",value:function(){var a=this;this.matchingWord=this.lastWordRange=null;this.$popover=this.ui.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo(this.options.container);this.$popover.hide();this.$content=this.$popover.find(".popover-content,.note-popover-content");this.$content.on("click",".note-hint-item",function(b){a.$content.find(".active").removeClass("active");f()(b.currentTarget).addClass("active");a.replace()});this.$popover.on("mousedown",function(a){a.preventDefault()})}},{key:"destroy",value:function(){this.$popover.remove()}},{key:"selectItem",value:function(a){this.$content.find(".active").removeClass("active");a.addClass("active");this.$content[0].scrollTop=a[0].offsetTop-this.$content.innerHeight()/2}},{key:"moveDown",value:function(){var a=this.$content.find(".note-hint-item.active"),b=a.next();b.length?this.selectItem(b):(a=a.parent().next(),a.length||(a=this.$content.find(".note-hint-group").first()),this.selectItem(a.find(".note-hint-item").first()))}},{key:"moveUp",value:function(){var a=this.$content.find(".note-hint-item.active"),b=a.prev();b.length?this.selectItem(b):(a=a.parent().prev(),a.length||(a=this.$content.find(".note-hint-group").last()),this.selectItem(a.find(".note-hint-item").last()))}},{key:"replace",value:function(){var a=this.$content.find(".note-hint-item.active");if(a.length){a=this.nodeFromItem(a);if(null!==this.matchingWord&&0===this.matchingWord.length)this.lastWordRange.so=this.lastWordRange.eo;else if(null!==this.matchingWord&&0<this.matchingWord.length&&!this.lastWordRange.isCollapsed()){var b=this.lastWordRange.eo-this.lastWordRange.so-this.matchingWord.length;0<b&&(this.lastWordRange.so+=b)}this.lastWordRange.insertNode(a);"next"===this.options.hintSelect?(b=document.createTextNode(""),f()(a).after(b),z.createFromNodeBefore(b).select()):z.createFromNodeAfter(a).select();this.lastWordRange=null;this.hide();this.context.invoke("editor.focus")}}},{key:"nodeFromItem",value:function(a){var b=this.hints[a.data("index")];a=a.data("item");b=b.content?b.content(a):a;"string"===typeof b&&(b=e.createText(b));return b}},{key:"createItemTemplates",value:function(a,b){var c=this.hints[a];return b.map(function(b){var e=f()('\x3cdiv class\x3d"note-hint-item"/\x3e');e.append(c.template?c.template(b):b+"");e.data({index:a,item:b});return e})}},{key:"handleKeydown",value:function(a){this.$popover.is(":visible")&&(a.keyCode===A.code.ENTER?(a.preventDefault(),this.replace()):a.keyCode===A.code.UP?(a.preventDefault(),this.moveUp()):a.keyCode===A.code.DOWN&&(a.preventDefault(),this.moveDown()))}},{key:"searchKeyword",value:function(a,b,e){(a=this.hints[a])&&a.match.test(b)&&a.search?(b=a.match.exec(b),this.matchingWord=b[0],a.search(b[1],e)):e()}},{key:"createGroup",value:function(a,b){var c=this,e=f()('\x3cdiv class\x3d"note-hint-group note-hint-group-'+a+'"\x3e\x3c/div\x3e');this.searchKeyword(a,b,function(b){b=b||[];b.length&&(e.html(c.createItemTemplates(a,b)),c.show())});return e}},{key:"handleKeyup",value:function(a){var b=this;if(!p.contains([A.code.ENTER,A.code.UP,A.code.DOWN],a.keyCode)){var e=this.context.invoke("editor.getLastRange"),g,l;if("words"===this.options.hintMode){if(g=e.getWordsRange(e),l=g.toString(),this.hints.forEach(function(a){if(a.match.test(l))return g=e.getWordsMatchRange(a.match),!1}),!g){this.hide();return}}else g=e.getWordRange();l=g.toString();if(this.hints.length&&l){this.$content.empty();a=x.rect2bnd(p.last(g.getClientRects()));var k=f()(this.options.container).offset();a&&(a.top-=k.top,a.left-=k.left,this.$popover.hide(),this.lastWordRange=g,this.hints.forEach(function(a,c){a.match.test(l)&&b.createGroup(c,l).appendTo(b.$content)}),this.$content.find(".note-hint-item:first").addClass("active"),"top"===this.direction?this.$popover.css({left:a.left,top:a.top-this.$popover.outerHeight()-5}):this.$popover.css({left:a.left,top:a.top+a.height+5}))}else this.hide()}}},{key:"show",value:function(){this.$popover.show()}},{key:"hide",value:function(){this.$popover.hide()}}]);return b}();f.a.summernote=f.a.extend(f.a.summernote,{version:"0.8.18",plugins:{},dom:e,range:z,lists:p,options:{langInfo:f.a.summernote.lang["en-US"],editing:!0,modules:{editor:gc,clipboard:hc,dropzone:ic,codeview:jc,statusbar:kc,fullscreen:lc,handle:mc,hintPopover:Ec,autoLink:oc,autoSync:pc,autoReplace:qc,placeholder:rc,buttons:sc,toolbar:tc,linkDialog:uc,linkPopover:vc,imageDialog:wc,imagePopover:xc,tablePopover:yc,videoDialog:zc,helpDialog:Cc,llvideoDialog:Ac,attachDialog:Bc,airPopover:Dc},buttons:{},lang:"en-US",followingToolbar:!1,toolbarPosition:"top",otherStaticBar:"",isImageTitle:"",isImageAlt:"",codeviewKeepButton:!1,toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["link",["link"]],["attach",["attach"]],["picture",["picture","help"]],["video",["video","llvideo"]],["view",["codeview"]]],popatmouse:!0,popover:{image:[["resize",["resizeFull","resizeHalf","resizeQuarter","resizeNone"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],table:[["add",["addRowDown","addRowUp","addColLeft","addColRight"]],["delete",["deleteRow","deleteCol","deleteTable"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]],["view",["fullscreen","codeview"]]]},airMode:!1,overrideContextMenu:!1,width:null,height:null,linkTargetBlank:!0,useProtocol:!0,defaultProtocol:"http://",focus:!1,tabDisabled:!1,tabSize:4,styleWithCSS:!1,shortcuts:!0,textareaAutoSync:!0,tooltip:"auto",container:null,maxTextLength:0,blockquoteBreakingLevel:2,spellCheck:!0,disableGrammar:!1,placeholder:null,inheritPlaceholder:!1,recordEveryKeystroke:!1,historyLimit:200,showDomainOnlyForAutolink:!1,hintMode:"word",hintSelect:"after",hintDirection:"bottom",styleTags:"p blockquote pre h1 h2 h3 h4 h5 h6".split(" "),fontNames:"Arial;Arial Black;Comic Sans MS;Courier New;Helvetica Neue;Helvetica;Impact;Lucida Grande;Tahoma;Times New Roman;Verdana".split(";"),fontNamesIgnoreCheck:[],addDefaultFonts:!0,fontSizes:"8 9 10 11 12 14 18 24 36".split(" "),fontSizeUnits:["px","pt"],colors:["#000000 #424242 #636363 #9C9C94 #CEC6CE #EFEFEF #F7F7F7 #FFFFFF".split(" "),"#FF0000 #FF9C00 #FFFF00 #00FF00 #00FFFF #0000FF #9C00FF #FF00FF".split(" "),"#F7C6CE #FFE7CE #FFEFC6 #D6EFD6 #CEDEE7 #CEE7F7 #D6D6E7 #E7D6DE".split(" "),"#E79C9C #FFC69C #FFE79C #B5D6A5 #A5C6CE #9CC6EF #B5A5D6 #D6A5BD".split(" "),"#E76363 #F7AD6B #FFD663 #94BD7B #73A5AD #6BADDE #8C7BC6 #C67BA5".split(" "),"#CE0000 #E79439 #EFC631 #6BA54A #4A7B8C #3984C6 #634AA5 #A54A7B".split(" "),"#9C0000 #B56308 #BD9400 #397B21 #104A5A #085294 #311873 #731842".split(" "),"#630000 #7B3900 #846300 #295218 #083139 #003163 #21104A #4A1031".split(" ")],colorsName:["Black;Tundora;Dove Gray;Star Dust;Pale Slate;Gallery;Alabaster;White".split(";"),"Red;Orange Peel;Yellow;Green;Cyan;Blue;Electric Violet;Magenta".split(";"),"Azalea;Karry;Egg White;Zanah;Botticelli;Tropical Blue;Mischka;Twilight".split(";"),"Tonys Pink;Peach Orange;Cream Brulee;Sprout;Casper;Perano;Cold Purple;Careys Pink".split(";"),"Mandy;Rajah;Dandelion;Olivine;Gulf Stream;Viking;Blue Marguerite;Puce".split(";"),"Guardsman Red;Fire Bush;Golden Dream;Chelsea Cucumber;Smalt Blue;Boston Blue;Butterfly Bush;Cadillac".split(";"),"Sangria;Mai Tai;Buddha Gold;Forest Green;Eden;Venice Blue;Meteorite;Claret".split(";"),"Rosewood;Cinnamon;Olive;Parsley;Tiber;Midnight Blue;Valentino;Loulou".split(";")],colorButton:{foreColor:"#000000",backColor:"#FFFF00"},lineHeights:"1.0 1.2 1.4 1.5 1.6 1.8 2.0 3.0".split(" "),tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,callbacks:{onBeforeCommand:null,onBlur:null,onBlurCodeview:null,onChange:null,onChangeCodeview:null,onDialogShown:null,onEnter:null,onFocus:null,onImageLinkInsert:null,onImageUpload:null,onImageUploadError:null,onInit:null,onKeydown:null,onKeyup:null,onMousedown:null,onMouseup:null,onPaste:null,onScroll:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},codeviewFilter:!1,codeviewFilterRegex:/<\/*(?:applet|b(?:ase|gsound|link)|embed|frame(?:set)?|ilayer|l(?:ayer|ink)|meta|object|s(?:cript|tyle)|t(?:itle|extarea)|xml)[^>]*?>/gi,codeviewIframeFilter:!0,codeviewIframeWhitelistSrc:[],codeviewIframeWhitelistSrcBase:"www.youtube.com www.youtube-nocookie.com www.facebook.com vine.co instagram.com player.vimeo.com www.dailymotion.com player.youku.com v.qq.com".split(" "),keyMap:{pc:{ESC:"escape",ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ESC:"escape",ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"fa fa-align",alignCenter:"fa fa-align-center",alignJustify:"fa fa-align-justify",alignLeft:"fa fa-align-left",alignRight:"fa fa-align-right",rowBelow:"bi bi-arrow-bar-down",colBefore:"bi bi-arrow-bar-left",colAfter:"bi bi-arrow-bar-right",rowAbove:"bi bi-arrow-bar-up",rowRemove:"bi bi-backspace-fill",colRemove:"bi bi-backspace-reverse-fill",indent:"fa fa-indent",outdent:"fa fa-outdent",arrowsAlt:"fa fa-arrows-alt",bold:"fa fa-bold",caret:"bi bi-caret-down-fill",circle:"fa fa-circle",close:"fa fa-close",code:"fa fa-code",eraser:"fa fa-eraser",floatLeft:"fa fa-chevron-left",floatRight:"fa fa-chevron-right",font:"fa fa-font",frame:"fa fa-file",italic:"fa fa-italic",link:"fa fa-link",unlink:"fa fa-chain-broken",magic:"fa fa-magic",menuCheck:"fa fa-menu-check",minus:"fa fa-minus",orderedlist:"fa fa-list-ol",pencil:"fa fa-pencil",picture:"bi bi-card-image",question:"bi bi-images",redo:"fa fa-redo",rollback:"fa fa-close",square:"fa fa-square",strikethrough:"fa fa-strikethrough",subscript:"fa fa-subscript",superscript:"fa fa-superscript",table:"fa fa-table",textHeight:"fa fa-text-height",trash:"fa fa-trash",underline:"fa fa-underline",llvideo:"bi bi-camera-reels-fill",attach:"fa fa-folder-o",undo:"fa fa-undo",unorderedlist:"fa fa-list",video:"bi bi-camera-video-fill"}}})},4:function(C,v,u){},52:function(C,v,u){function m(n){"@babel/helpers - typeof";m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(k){return typeof k}:function(k){return k&&"function"===typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k};return m(n)}u.r(v);C=u(0);var q=u.n(C),n=u(1),N=n.a.create('\x3cdiv class\x3d"note-editor note-frame panel panel-default"/\x3e'),F=n.a.create('\x3cdiv class\x3d"panel-heading note-toolbar" role\x3d"toolbar"/\x3e'),t=n.a.create('\x3cdiv class\x3d"note-editing-area"/\x3e'),D=n.a.create('\x3ctextarea class\x3d"note-codable" aria-multiline\x3d"true"/\x3e'),H=n.a.create('\x3cdiv class\x3d"note-editable" contentEditable\x3d"true" role\x3d"textbox" aria-multiline\x3d"true"/\x3e'),K=n.a.create('\x3coutput class\x3d"note-status-output" role\x3d"status" aria-live\x3d"polite"\x3e\x3c/output\x3e\x3cdiv class\x3d"note-statusbar" role\x3d"status"\x3e\x3cdiv class\x3d"note-resizebar" aria-label\x3d"Resize"\x3e\x3cdiv class\x3d"fa fa-bar"\x3e\x3c/div\x3e\x3cdiv class\x3d"fa fa-bar"\x3e\x3c/div\x3e\x3cdiv class\x3d"fa fa-bar"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),J=n.a.create('\x3cdiv class\x3d"note-editor note-airframe"/\x3e'),U=n.a.create('\x3cdiv class\x3d"note-editable" contentEditable\x3d"true" role\x3d"textbox" aria-multiline\x3d"true"\x3e\x3c/div\x3e\x3coutput class\x3d"note-status-output" role\x3d"status" aria-live\x3d"polite"\x3e\x3c/output\x3e'),mb=n.a.create('\x3cdiv class\x3d"note-btn-group btn-group"\x3e'),V=n.a.create('\x3cul class\x3d"note-dropdown-menu dropdown-menu"\x3e',function(n,k){var q=Array.isArray(k.items)?k.items.map(function(n){var q="string"===typeof n?n:n.value||"",t=k.template?k.template(n):n;n="object"===m(n)?n.option:void 0;return'\x3cli aria-label\x3d"'+q+'"\x3e\x3ca href\x3d"#" '+('data-value\x3d"'+q+'"'+(void 0!==n?' data-option\x3d"'+n+'"':""))+"\x3e"+t+"\x3c/a\x3e\x3c/li\x3e"}).join(""):k.items;n.html(q).attr({"aria-label":k.title});k&&k.codeviewKeepButton&&n.addClass("note-codeview-keep")}),G=function(m,k){return m+" "+R(k.icons.caret,"span")},L=n.a.create('\x3cul class\x3d"note-dropdown-menu dropdown-menu note-check"\x3e',function(m,k){var n=Array.isArray(k.items)?k.items.map(function(m){var n="string"===typeof m?m:m.value||"",q=k.template?k.template(m):m;return'\x3cli aria-label\x3d"'+m+'"\x3e\x3ca href\x3d"#" data-value\x3d"'+n+'"\x3e'+R(k.checkClassName)+" "+q+"\x3c/a\x3e\x3c/li\x3e"}).join(""):k.items;m.html(n).attr({"aria-label":k.title});k&&k.codeviewKeepButton&&m.addClass("note-codeview-keep")}),S=n.a.create('\x3cdiv class\x3d"modal note-modal" aria-hidden\x3d"false" tabindex\x3d"-1" role\x3d"dialog"/\x3e',function(m,k){k.fade&&m.addClass("fade");m.attr({"aria-label":k.title});m.html(['\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e',k.title?'\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-label\x3d"Close" aria-hidden\x3d"true"\x3e\x26times;\x3c/button\x3e\x3ch4 class\x3d"modal-title"\x3e'+k.title+"\x3c/h4\x3e\x3c/div\x3e":"",'\x3cdiv class\x3d"modal-body"\x3e'+k.body+"\x3c/div\x3e",k.footer?'\x3cdiv class\x3d"modal-footer"\x3e'+k.footer+"\x3c/div\x3e":"","\x3c/div\x3e\x3c/div\x3e"].join(""))}),P=n.a.create('\x3cdiv class\x3d"note-popover popover in"\x3e\x3cdiv class\x3d"arrow"\x3e\x3c/div\x3e\x3cdiv class\x3d"popover-content note-children-container"\x3e\x3c/div\x3e\x3c/div\x3e',function(m,k){m.addClass("undefined"!==typeof k.direction?k.direction:"bottom");k.hideArrow&&m.find(".arrow").hide()}),ca=n.a.create('\x3cdiv class\x3d"checkbox"\x3e\x3c/div\x3e',function(m,k){m.html(["\x3clabel"+(k.id?' for\x3d"note-'+k.id+'"':"")+"\x3e",'\x3cinput type\x3d"checkbox"'+(k.id?' id\x3d"note-'+k.id+'"':""),k.checked?" checked":"",' aria-checked\x3d"'+(k.checked?"true":"false")+'"/\x3e',k.text?k.text:"","\x3c/label\x3e"].join(""))}),R=function(m,k){k=k||"i";return"\x3c"+k+' class\x3d"'+m+'"\x3e\x3c/'+k+"\x3e"};u(3);u(4);q.a.summernote=q.a.extend(q.a.summernote,{ui_template:function(m){return{editor:N,toolbar:F,editingArea:t,codable:D,editable:H,statusbar:K,airEditor:J,airEditable:U,buttonGroup:mb,dropdown:V,dropdownButtonContents:G,dropdownCheck:L,dialog:S,popover:P,checkbox:ca,icon:R,options:m,palette:function(k,q){return n.a.create('\x3cdiv class\x3d"note-color-palette"/\x3e',function(k,n){for(var q=[],t=0,u=n.colors.length;t<u;t++){for(var v=n.eventName,O=n.colors[t],C=n.colorsName[t],F=[],D=0,G=O.length;D<G;D++){var H=O[D],J=C[D];F.push(['\x3cbutton type\x3d"button" class\x3d"note-color-btn"style\x3d"background-color:',H,'" data-event\x3d"',v,'" data-value\x3d"',H,'" title\x3d"',J,'" aria-label\x3d"',J,'" data-toggle\x3d"button" tabindex\x3d"-1"\x3e\x3c/button\x3e'].join(""))}q.push('\x3cdiv class\x3d"note-color-row"\x3e'+F.join("")+"\x3c/div\x3e")}k.html(q.join(""));n.tooltip&&k.find(".note-color-btn").tooltip({container:n.container||m.container,trigger:"hover",placement:"bottom"})})(k,q)},button:function(k,t){return n.a.create('\x3cbutton type\x3d"button" class\x3d"note-btn btn btn-default btn-sm" tabindex\x3d"-1"\x3e',function(k,n){if(n&&n.tooltip)k.attr({title:n.tooltip,"aria-label":n.tooltip}).tooltip({container:n.container||m.container,trigger:"hover",placement:"bottom"}).on("click",function(k){q()(k.currentTarget).tooltip("hide")});n&&n.codeviewButton&&k.addClass("note-codeview-keep")})(k,t)},toggleBtn:function(k,m){k.toggleClass("disabled",!m);k.attr("disabled",!m)},toggleBtnActive:function(k,m){k.toggleClass("active",m)},onDialogShown:function(k,m){k.one("shown.bs.modal",m)},onDialogHidden:function(k,m){k.one("hidden.bs.modal",m)},showDialog:function(k){k.modal("show")},hideDialog:function(k){k.modal("hide")},createLayout:function(k){var n=(m.airMode?J([t([D(),U()])]):"bottom"===m.toolbarPosition?N([t([D(),H()]),F(),K()]):N([F(),t([D(),H()]),K()])).render();n.insertAfter(k);return{note:k,editor:n,toolbar:n.find(".note-toolbar"),editingArea:n.find(".note-editing-area"),editable:n.find(".note-editable"),codable:n.find(".note-codable"),statusbar:n.find(".note-statusbar")}},removeLayout:function(k,m){k.html(m.editable.html());m.editor.remove();k.show()}}},"interface":"bs3"})}})});